{"version":3,"sources":["reportWebVitals.js","context/authContext.js","GuardedRoute.js","constants/keys.js","config/server.js","services/rating.js","services/book.js","services/subscription.js","services/event.js","components/loader/index.js","constants/common.js","components/star/index.js","components/book-card-medium/index.js","components/medium-event-card/index.js","pages/home/index.js","pages/landing/index.js","pages/no-match/index.js","utils/validation.js","hooks/useBookSearch.js","components/title/index.js","components/validation-error/index.js","pages/book/books/index.js","services/user.js","hooks/useAuthForm.js","pages/auth/login/index.js","pages/auth/logout/index.js","hooks/useEventSearch.js","pages/event/events/index.js","context/notificationContext.js","components/notification/index.js","components/book-card-lite/index.js","components/lite-event-card/index.js","pages/auth/my-page/index.js","pages/auth/register/index.js","services/image.js","hooks/useBookForm.js","components/category/index.js","pages/book/book-edit/index.js","hooks/useEventForm.js","components/map-event/index.js","pages/event/event-edit/index.js","pages/book/book-create/index.js","utils/navigation.js","components/nav-link/index.js","components/logo-link/index.js","components/header/index.js","components/footer/index.js","components/scroller/index.js","components/page-layout/index.js","services/comment.js","hooks/useBook.js","components/rating/index.js","components/comment/index.js","pages/book/book-details/index.js","pages/event/event-create/index.js","hooks/useEvent.js","pages/event/event-details/index.js","App.js","ErrorBoundary.js","hooks/useLocalStorage.js","AuthContextProvider.js","NotificationContextProvider.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","AuthContext","React","createContext","AuthRoute","useContext","isAuthenticated","to","UserRoute","storageKeys","PARSE_APPLICATION_ID","PARSE_HOST_URL","PARSE_JAVASCRIPT_KEY","Parse","initialize","serverURL","createBookRating","bookId","a","rating","Object","set","save","result","console","log","error","rateBook","userId","value","getBookById","book","updatedVoted","voted","slice","push","updatedValue","Math","floor","length","data","bookRatingId","createBook","ratingResult","title","author","description","User","current","category","image","editBook","Book","extend","query","Query","get","include","equalTo","first","viewModel","getAllBooks","pagination","descending","skip","counter","perPage","limit","find","results","map","getAllBooksCount","count","getBooksByAuthor","search","matches","getBooksByAuthorCount","getBooksByTitle","getBooksByTitleCount","getBooksByCategory","getBooksByCategoryCount","getBooksByCreator","innerQuery","toLocaleLowerCase","matchesQuery","getBooksByCreatorCount","getLastFourBooks","getMostLikedBooks","BookRating","record","creator","id","date","Date","createdAt","toLocaleDateString","year","month","day","imageUrl","getMySubscriptions","username","subscription","containedIn","createEventSubscription","event","signSubscription","subscriptionId","subscribed","unsignSubscription","list","splice","indexOf","hour","minute","hour12","name","status","eventId","createEvent","GeoPoint","latitude","location","longitude","response","editEvent","cancelEvent","getEventById","getAllEvents","getAllEventsCount","getActiveEvents","greaterThan","ascending","getActiveEventsCount","getCancelledEvents","getCancelledEventsCount","getMyEvents","getMyEventsCount","getLastFourEvents","getMostRecentEvents","dateRespone","dateObj","getFullYear","getMonth","getDate","getHours","getMinutes","_latitude","_longitude","Loader","className","DEFAULT_BOOK_CATEGORIES","DEFAULT_BOOK_URL","DEFAULT_EVENT_URL","INITIAL_AUTH_VALUE","sessionToken","INITIAL_USER_FORM_VALUE","password","rePass","INITIAL_AUTH_VALIDATION_ERROR","exists","credentials","INITIAL_BOOK_VALUE","categories","INITIAL_BOOK_VALIDATION_ERROR","required","INITIAL_EVENT_VALUE","INITIAL_EVENT_VALIDATION_ERROR","DEFAULT_LAG_LTD","DEFAULT_MAP_CENTER","INITIAL_NOTIFICATION_VALUE","show","message","Star","stars","Array","fill","x","i","BookCardMedium","src","alt","EventCardMedium","initState","books","events","labelLatestBooks","labelLikedBooks","labelUpcomingEvents","labelNewestEvents","isLoading","reducer","state","action","type","payload","Home","useReducer","dispatch","useEffect","latestBooksHandler","newestEventHandler","mostLikedBooksHandler","res","upcomingEventsHandler","pageIntro","onClick","Landing","NoMatch","bookDataValidation","trim","size","includes","eventDataValidation","now","searchDataValidation","criteria","commentDataValidation","isDisabledIncreaseButton","isDisabledDecreaseButton","searchMessage","useBookSearch","useState","all","setQuery","setBooks","totalPages","setPagination","setIsloading","validationError","setValidationError","requestCountHandler","myPosts","postedBy","ceil","prev","requestDataHandler","onClickMyPostsHandler","onClickAllPostsHandler","onSubmitSearchHandler","e","preventDefault","formData","FormData","target","reset","decreaseCounter","increaseCounter","Title","ValidationError","Books","user","searchMyPosts","searchAllPosts","searchResults","disabled","onSubmit","placeholder","defaultValue","login","authData","logIn","register","signUp","logout","logOut","checkUserExists","updateUserReadingList","relation","add","getUserReadingList","checkBookInUserReadingList","removeBookFromUserReadingList","remove","authServices","useAuthForm","formValue","setFormValue","authValue","setAuthValue","isSuccess","setIsSuccess","doesUserExist","userService","onChangeInputHandler","check","userDataValidation","onSubmitUserRegisterHandler","requestHandler","onSubmitUserLoginHandler","catch","err","Login","navigate","useNavigate","replace","method","htmlFor","onChange","Logout","useEventSearch","setEvents","myEvents","active","cancelled","onClickMyEventsHandler","onClickAllEventsHandler","onClickActiveEventsHandler","onClickCancelledEventsHandler","Events","searchMyEvents","searchAllEvents","searchActiveEvents","searchCancelledEvents","NotificationContext","Notification","notification","handleNotification","BookCardLite","onClickRemoveBook","EventCardLite","onClickSignoutEvent","pagesReadingCounter","pagesEventCounter","MyPage","useParams","showNotification","reading","update","setUpdate","view","readingList","setReadingList","eventList","setEventList","setTotalPages","increase","decrease","readingListButtonsDisabled","setReadingListButtonsDisabled","eventListButtonsDisabled","setEventListButtonsDisabled","fetchData","fetchedReadingListData","fetchedEventListData","readingPages","eventPages","onClickRemoveEvent","objectId","toLocaleUpperCase","Register","uploadImage","apiUrl","file","append","fetch","body","json","secure_url","useBookForm","isImageLoading","setIsImageloading","bookValue","setBookValue","notCreator","setNotCreator","imagePreview","setImagePreview","setInitialBookEditValue","useCallback","bookFormReset","onChangeImageHandler","files","url","onBlurInputHandler","onSubmitBookCreateHandler","selectedCategories","reduce","onSubmitBookEditHandler","Category","onChangeSelectedHandler","index","BookEdit","accept","lang","cols","rows","useEventForm","point","setPoint","eventValue","setEventValue","setInitialEventEditValue","onClickCancelEventHandler","eventFormReset","getGeoPoint","onSubmitEventCreateHandler","dataParser","dateError","JSON","stringify","onSubmitEventEditHandler","Number","MapComponent","useMapEvent","latlng","lat","lng","Marker","position","Popup","toString","MapEvent","center","MapContainer","zoom","scrollWheelZoom","TileLayer","attribution","EventEdit","min","max","BookCreate","onBlur","getNavigation","authLinks","link","NavLink","href","LogoLink","props","children","Header","links","setLinks","Footer","onClickHandler","window","scrollTo","top","behavior","Scroller","visible","setVisible","addEventListener","scrolled","scrollY","style","display","PageLayout","getAllCommentsByBookId","BookComment","getAllCommentsByEventId","EventComment","createBookComment","text","bookComment","createEventComment","eventComment","second","initialBookValue","useBook","setBook","canVote","setCanVote","canAdd","setCanAdd","comments","setComments","isCreator","Boolean","onClickAddBookHandler","onSubmitCommentHandler","comment","updated","Rating","isDisabled","setIsDisabled","from","values","CustomComment","BookDetails","EventCreate","initialEventValue","useEvent","setEvent","canSubscribe","setCanSubscribe","eventDate","onClickAddEventHandler","updatedSuscribed","EventDetails","App","useLocation","pathname","path","element","ErrorBoundary","hasError","this","Component","useLocalStorage","key","item","localStorage","getItem","parse","setState","setItem","AuthContextProvider","setUser","Provider","NotificationContextProvider","setNotification","setTimeout","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.21cb202a.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\n\r\nconst AuthContext = React.createContext({});\r\n\r\nexport default AuthContext;","import { useContext } from 'react';\r\nimport { Navigate, Outlet } from 'react-router-dom';\r\n\r\nimport AuthContext from './context/authContext';\r\n\r\nexport const AuthRoute = () => {\r\n    const { isAuthenticated } = useContext(AuthContext);\r\n    return isAuthenticated ? <Outlet /> : <Navigate to=\"/home\" />\r\n}\r\n\r\nexport const UserRoute = () => {\r\n    const { isAuthenticated } = useContext(AuthContext);\r\n    return isAuthenticated ? <Navigate to=\"/home\" /> : <Outlet />\r\n}\r\n","const storageKeys = {\r\n    CLOUD_NAME: 'dah8nslpd',\r\n    API_KEY: '168873961773654',\r\n    API_SECRET: 'lig8cRrBNm2dC9neNGIbVlaQmlM',\r\n    API_URL:\"https://api.cloudinary.com/v1_1/dah8nslpd/image/upload\"\r\n}\r\n\r\nconst serverKeys = {\r\n    PARSE_APPLICATION_ID: 'YjKlytQJo1humRIEH3Gc60URQzhuFnx9bQ3ilkNf',\r\n    PARSE_HOST_URL: 'https://parseapi.back4app.com/',\r\n    PARSE_JAVASCRIPT_KEY: 'IvQTv5y5lYBeXVgcZfyDzHrb6XabLtaHREZQfadT'\r\n}\r\n\r\nexport{\r\n    storageKeys,\r\n    serverKeys\r\n}\r\n","import Parse from 'parse/dist/parse.min.js';\r\nimport { serverKeys } from '../constants/keys';\r\n\r\n\r\nconst PARSE_APPLICATION_ID = serverKeys.PARSE_APPLICATION_ID;\r\nconst PARSE_HOST_URL = serverKeys.PARSE_HOST_URL;\r\nconst PARSE_JAVASCRIPT_KEY = serverKeys.PARSE_JAVASCRIPT_KEY;\r\nParse.initialize(PARSE_APPLICATION_ID, PARSE_JAVASCRIPT_KEY);\r\nParse.serverURL = PARSE_HOST_URL;\r\n\r\nexport default Parse;\r\n","import Parse from \"../config/server\";\r\nimport { getBookById } from \"./book\";\r\n\r\n\r\nconst getRatingByBookId = async (bookId) => {\r\n    const rating = new Parse.Object('BookRating');\r\n\r\n    const query = new Parse.Query(rating);\r\n    query.equalTo('book', bookId);\r\n\r\n    try {\r\n        const results = await query.find();\r\n        for (const object of results) {\r\n            const id = object.id\r\n            const star = Number(object.get('star'))\r\n            const voted = object.get('voted')\r\n            return {\r\n                id,\r\n                star,\r\n                voted\r\n            }\r\n        }\r\n    } catch (error) {\r\n        console.error('Error while fetching BookRating', error);\r\n    }\r\n}\r\n\r\nconst createBookRating = async (bookId) => {\r\n    const rating = new Parse.Object('BookRating');\r\n    rating.set('voted', []);\r\n    rating.set('star', 0);\r\n    \r\n    try {\r\n        const result = await rating.save();\r\n        console.log('BookRating created', result);\r\n        return result;\r\n    } catch (error) {\r\n        console.error('Error while creating BookRating: ', error);\r\n    }\r\n\r\n}\r\n\r\nconst rateBook = async (userId, bookId, value) => {\r\n    try {\r\n        const book = await getBookById(bookId);\r\n\r\n        const updatedVoted = book.voted.slice();\r\n        updatedVoted.push(userId);\r\n        const updatedValue = Math.floor((value + book.rating) / updatedVoted.length)\r\n\r\n        const data = new Parse.Object('BookRating');\r\n        data.set('objectId', book.bookRatingId)\r\n        data.set('voted', updatedVoted);\r\n        data.set('star', updatedValue);\r\n\r\n       await data.save();\r\n    } catch (error) {\r\n        console.error('Error while updating BookRating: ', error);\r\n    }\r\n};\r\n\r\nexport {\r\n    rateBook,\r\n    createBookRating,\r\n    getRatingByBookId\r\n}\r\n","import Parse from \"../config/server\";\r\n\r\nimport { createBookRating } from \"./rating\";\r\n\r\nconst createBook = async (data) => {\r\n\ttry {\r\n\t\tconst ratingResult = await createBookRating();\r\n\r\n\t\tconst book = new Parse.Object('Book');\r\n\t\tbook.set('title', data.title);\r\n\t\tbook.set('author', data.author);\r\n\t\tbook.set('description', data.description);\r\n\t\tbook.set('creator', Parse.User.current());\r\n\t\tbook.set('category', data.category);\r\n\t\tbook.set('imageUrl', data.image);\r\n\t\tbook.set('bookRating', ratingResult);\r\n\r\n\t\tconst result = await book.save();\r\n\t\treturn result;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while creating Book: ', error);\r\n\t}\r\n}\r\n\r\nconst editBook = async (bookId, data) => {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\tconst query = new Parse.Query(Book);\r\n\r\n\ttry {\r\n\t\tconst book = await query.get(bookId);\r\n\t\tbook.set('title', data.title);\r\n\t\tbook.set('author', data.author);\r\n\t\tbook.set('description', data.description);\r\n\t\tbook.set('creator', Parse.User.current());\r\n\t\tif(data.category.length>0){\r\n\t\t\tbook.set('category', data.category);\r\n\t\t}\r\n\t\tbook.set('imageUrl', data.image);\r\n\t\ttry {\r\n\t\t\tconst result = await book.save();\r\n\t\t\treturn result;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error while updating Book', error);\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while retrieving Book', error);\r\n\t}\r\n}\r\n\r\nconst deleteBook = async (bookId) => {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\r\n\ttry {\r\n\t\tconst book = await query.get(bookId);\r\n\t\ttry {\r\n\t\t\tconst response = await book.destroy();\r\n\t\t\tconsole.log('Deleted ParseObject', response);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error while deleting ParseObject', error);\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while retrieving ParseObject', error);\r\n\t}\r\n}\r\n\r\nconst getBookById = async function (bookId) {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\tquery.include('creator');\r\n\tquery.include('bookRating');\r\n\tquery.equalTo('objectId', bookId);\r\n\r\n\ttry {\r\n\t\tconst data = await query.first();\r\n\t\tconst result = viewModel(data);\r\n\t\treturn result;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst getAllBooks = async function (pagination) {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\tquery.include('creator');\r\n\tquery.include('bookRating');\r\n\tquery.descending('createdAt');\r\n\tquery.skip((pagination.counter-1)*pagination.perPage).limit(pagination.perPage);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst getAllBooksCount = async function () {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\ttry {\r\n\t\treturn await query.count();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst getBooksByAuthor = async function (pagination,search) {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\tquery.include('creator');\r\n\tquery.include('bookRating');\r\n\tquery.matches('author', search, 'i');\r\n\tquery.skip((pagination.counter-1)*pagination.perPage).limit(pagination.perPage);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst getBooksByAuthorCount = async function (search) {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\tquery.matches('author', search, 'i');\r\n\r\n\ttry {\r\n\t\treturn await query.count();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst getBooksByTitle = async function (pagination ,search) {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\tquery.include('creator');\r\n\tquery.include('bookRating');\r\n\tquery.matches('title', search, 'i');\r\n\tquery.skip((pagination.counter-1)*pagination.perPage).limit(pagination.perPage);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst getBooksByTitleCount = async function (search) {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\tquery.matches('title', search, 'i');\r\n\r\n\ttry {\r\n\t\treturn await query.count();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\n\r\nconst getBooksByCategory = async function (pagination,search) {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\tquery.include('creator');\r\n\tquery.include('bookRating');\r\n\tquery.equalTo('category', search);\r\n\tquery.skip((pagination.counter-1)*pagination.perPage).limit(pagination.perPage);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst getBooksByCategoryCount = async function (search) {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\tquery.equalTo('category', search);\r\n\r\n\ttry {\r\n\t\treturn await query.count();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst getBooksByCreator = async function (pagination,search) {\r\n\tconst innerQuery = new Parse.Query('User');\r\n\tinnerQuery.equalTo('username', search.toLocaleLowerCase());\r\n\r\n\tconst query = new Parse.Query('Book');\r\n\tquery.include('creator');\r\n\tquery.include('bookRating');\r\n\tquery.matchesQuery('creator', innerQuery);\r\n\tquery.skip((pagination.counter-1)*pagination.perPage).limit(pagination.perPage);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst getBooksByCreatorCount = async function (search) {\r\n\tconst innerQuery = new Parse.Query('User');\r\n\tinnerQuery.equalTo('username', search.toLocaleLowerCase());\r\n\r\n\tconst query = new Parse.Query('Book');\r\n\tquery.include('creator');\r\n\tquery.matchesQuery('creator', innerQuery);\r\n\r\n\ttry {\r\n\t\treturn await query.count();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\n\r\nconst getLastFourBooks = async function () {\r\n\tconst Book = Parse.Object.extend('Book');\r\n\r\n\tconst query = new Parse.Query(Book);\r\n\tquery.include('creator');\r\n\tquery.include('bookRating');\r\n\tquery.descending('createdAt').limit(4);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel)\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst getMostLikedBooks = async function () {\r\n\tconst BookRating = Parse.Object.extend('BookRating');\r\n\tconst innerQuery = new Parse.Query(BookRating);\r\n\tinnerQuery.equalTo('star', 5);\r\n\r\n\tconst Book = Parse.Object.extend('Book');\r\n\tconst query = new Parse.Query(Book);\r\n\tquery.include('creator');\r\n\tquery.include('bookRating');\r\n\tquery.matchesQuery('bookRating', innerQuery);\r\n\tquery.descending('createdAt');\r\n\tquery.limit(4);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching Book', error);\r\n\t}\r\n}\r\n\r\nconst viewModel = (record) => {\r\n\tconst creator = record.get('creator').get('username');\r\n\tconst bookRatingId = record.get('bookRating').id;\r\n\tconst rating = record.get('bookRating').get('star');\r\n\tconst voted = record.get('bookRating').get('voted');\r\n\tconst date = new Date(record.createdAt)\r\n\t\t.toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric' })\r\n\r\n\treturn {\r\n\t\tid: record.id,\r\n\t\tcreatedAt: date,\r\n\t\ttitle: record.get('title'),\r\n\t\tauthor: record.get('author'),\r\n\t\tdescription: record.get('description'),\r\n\t\timageUrl: record.get('imageUrl'),\r\n\t\tcategory: record.get('category'),\r\n\t\tvoted,\r\n\t\trating,\r\n\t\tcreator,\r\n\t\tbookRatingId\r\n\t}\r\n}\r\n\r\nexport {\r\n\tcreateBook,\r\n\teditBook,\r\n\tdeleteBook,\r\n\tgetBookById,\r\n\tgetAllBooks,\r\n\tgetAllBooksCount,\r\n\tgetLastFourBooks,\r\n\tgetMostLikedBooks,\r\n\tgetBooksByAuthor,\r\n\tgetBooksByAuthorCount,\r\n\tgetBooksByTitle,\r\n\tgetBooksByTitleCount,\r\n\tgetBooksByCategory,\r\n\tgetBooksByCategoryCount,\r\n\tgetBooksByCreator,\r\n\tgetBooksByCreatorCount\r\n}\r\n","import Parse from \"../config/server\";\r\n\r\nconst getSubscriptionByEventId = async (eventId) => {\r\n    const subscription = new Parse.Object('EventSubscription');\r\n    const query = new Parse.Query(subscription);\r\n    query.equalTo('event', eventId);\r\n\r\n    try {\r\n        const result = await query.find();\r\n        return {\r\n            id: result.id,\r\n            subscribed: result.get('subscribed')\r\n        }\r\n    } catch (error) {\r\n        console.error('Error while fetching EventSubscription', error);\r\n    }\r\n}\r\n\r\nconst getMySubscriptions = async (username) => {\r\n    const subscription = new Parse.Object('EventSubscription');\r\n    const query = new Parse.Query(subscription);\r\n    query.include('event');\r\n    query.containedIn('subscribed', [username]);\r\n\r\n    try {\r\n        const data = await query.find();\r\n        const results = data.map(viewModel);\r\n        return results;\r\n    } catch (error) {\r\n        console.error('Error while fetching EventSubscription', error);\r\n    }\r\n}\r\n\r\nconst createEventSubscription = async (event) => {\r\n    const subscription = new Parse.Object('EventSubscription');\r\n    subscription.set('subscribed', []);\r\n    subscription.set('event', event);\r\n\r\n    try {\r\n        const result = await subscription.save();\r\n        return result;\r\n    } catch (error) {\r\n        console.error('Error while creating EventSubscription: ', error);\r\n    }\r\n\r\n}\r\n\r\nconst signSubscription = async (userId, subscriptionId, subscribed) => {\r\n    const subscription = new Parse.Object('EventSubscription');\r\n    const query = new Parse.Query(subscription);\r\n\r\n    try {\r\n        const data = await query.get(subscriptionId);\r\n        data.set('subscribed', [...subscribed, userId]);\r\n\r\n        try {\r\n            await data.save();\r\n        } catch (error) {\r\n            console.error('Error while updating EventSubscription', error);\r\n        }\r\n    } catch (error) {\r\n        console.error('Error while retrieving object EventSubscription', error);\r\n    }\r\n}\r\n\r\nconst unsignSubscription = async (username,subscriptionId) => {\r\n    try {\r\n        const subscription = new Parse.Object('EventSubscription');\r\n        const query = new Parse.Query(subscription);\r\n        \r\n        const data = await query.get(subscriptionId);\r\n\r\n        const list = data.get('subscribed');\r\n        list.splice(list.indexOf(username), 1);\r\n        data.set('subscribed', list);\r\n\r\n         await data.save();\r\n        return true;\r\n    } catch (error) {\r\n        console.error('Error while updating EventSubscription: ', error);\r\n    }\r\n};\r\n\r\nconst viewModel = (record) => {\r\n\tconst dateRespone=new Date(record.get('event').get('date'));\r\n\tconst date = dateRespone\r\n\t\t.toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric',hour12: false });\r\n\treturn {\r\n\t\tsubscriptionId: record.id,\r\n\t\tname: record.get('event').get('name'),\r\n\t\timageUrl: record.get('event').get('imageUrl'),\r\n\t\tstatus: record.get('event').get('status'),\r\n\t\tdate,\r\n        eventId:record.get('event').id\r\n\t}\r\n}\r\n\r\n\r\n\r\nexport {\r\n    createEventSubscription,\r\n    signSubscription,\r\n    getMySubscriptions,\r\n    unsignSubscription,\r\n    getSubscriptionByEventId\r\n}\r\n","import Parse from \"../config/server\";\r\nimport { createEventSubscription } from \"./subscription\";\r\n\r\n\r\nconst createEvent = async (data) => {\r\n\ttry {\r\n\t\tconst event = new Parse.Object('Event');\r\n\t\tevent.set('name', data.name);\r\n\t\tevent.set('date', data.date);\r\n\t\tevent.set('description', data.description);\r\n\t\tevent.set('creator', Parse.User.current());\r\n\t\tevent.set('location', new Parse.GeoPoint({latitude: data.location[0], longitude: data.location[1]}));\r\n\t\tevent.set('imageUrl', data.image);\r\n\t\tevent.set('status', data.status);\r\n\t\tconst response = await event.save();\r\n\r\n\t\tconst subscription = await createEventSubscription(response);\r\n\t\tresponse.set('subscription', subscription);\r\n\r\n\t\tconst result = await response.save();\r\n\t\treturn result;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while creating event: ', error);\r\n\t}\r\n}\r\n\r\nconst editEvent = async (eventId, data) => {\r\n\tconst event = Parse.Object.extend('Event');\r\n\tconst query = new Parse.Query(event);\r\n\r\n\ttry {\r\n\t\tconst event = await query.get(eventId);\r\n\t\tevent.set('name', data.name);\r\n\t\tevent.set('date', data.date);\r\n\t\tevent.set('description', data.description);\r\n\t\tevent.set('creator', Parse.User.current());\r\n\t\tevent.set('location', new Parse.GeoPoint({latitude: data.location[0], longitude: data.location[1]}));\r\n\t\tevent.set('imageUrl', data.image);\r\n\t\ttry {\r\n\t\t\tconst result = await event.save();\r\n\t\t\treturn result;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error while updating event', error);\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while retrieving event', error);\r\n\t}\r\n}\r\n\r\nconst cancelEvent = async (eventId) => {\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\r\n\ttry {\r\n\t\tconst event = await query.get(eventId);\r\n\t\ttry {\r\n\t\t\tevent.set('status', 'cancelled');\r\n\t\t\tconst result = await event.save();\r\n\t\t\treturn result;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error while updating event', error);\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while retrieving event', error);\r\n\t}\r\n}\r\n\r\nconst getEventById = async function (eventId) {\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\tquery.include('creator');\r\n\tquery.include('subscription');\r\n\tquery.equalTo('objectId', eventId);\r\n\r\n\ttry {\r\n\t\tconst data = await query.first();\r\n\t\tconst result = viewModel(data);\r\n\t\treturn result;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst getAllEvents = async function (pagination) {\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\tquery.descending('createdAt');\r\n\tquery.skip((pagination.counter - 1) * pagination.perPage).limit(pagination.perPage);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst getAllEventsCount = async function () {\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\r\n\ttry {\r\n\t\treturn await query.count();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst getActiveEvents = async function (pagination) {\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\tquery.equalTo('status','active');\r\n\tquery.greaterThan('date',new Date());\r\n\tquery.ascending('date');\r\n\tquery.skip((pagination.counter - 1) * pagination.perPage).limit(pagination.perPage);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst getActiveEventsCount = async function () {\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\tquery.equalTo('status','active');\r\n\tquery.greaterThan('date',new Date());\r\n\tquery.ascending('date');\r\n\ttry {\r\n\t\treturn await query.count();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst getCancelledEvents = async function (pagination) {\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\tquery.equalTo('status','cancelled');\r\n\tquery.greaterThan('date',new Date());\r\n\tquery.ascending('date');\r\n\tquery.skip((pagination.counter - 1) * pagination.perPage).limit(pagination.perPage);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst getCancelledEventsCount = async function () {\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\tquery.equalTo('status','cancelled');\r\n\tquery.greaterThan('date',new Date());\r\n\tquery.ascending('date');\r\n\ttry {\r\n\t\treturn await query.count();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst getMyEvents = async function (username, pagination) {\r\n\tconst innerQuery = new Parse.Query('User');\r\n\tinnerQuery.equalTo('username', username.toLocaleLowerCase());\r\n\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\tquery.include('creator');\r\n\tquery.descending('createdAt');\r\n\tquery.matchesQuery('creator', innerQuery);\r\n\tquery.skip((pagination.counter - 1) * pagination.perPage).limit(pagination.perPage);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst getMyEventsCount = async function (username) {\r\n\tconst innerQuery = new Parse.Query('User');\r\n\tinnerQuery.equalTo('username', username.toLocaleLowerCase());\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\tquery.include('creator');\r\n\tquery.descending('createdAt');\r\n\tquery.matchesQuery('creator', innerQuery);\r\n\r\n\ttry {\r\n\t\treturn await query.count();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst getLastFourEvents = async function () {\r\n\tconst event = Parse.Object.extend('Event');\r\n\r\n\tconst query = new Parse.Query(event);\r\n\tquery.include('creator');\r\n\tquery.descending('createdAt').limit(4);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel)\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst getMostRecentEvents = async function () {\r\n\tconst event = Parse.Object.extend('Event');\r\n\tconst query = new Parse.Query(event);\r\n\tquery.include('creator');\r\n\tquery.equalTo('status','active');\r\n\tquery.greaterThan('date',new Date());\r\n\tquery.ascending('date');\r\n\tquery.limit(4);\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.map(viewModel);\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching event', error);\r\n\t}\r\n}\r\n\r\nconst viewModel = (record) => {\r\n\tconst creator = record.get('creator').get('username');\r\n\tconst subscriptionId = record.get('subscription').id;\r\n\tconst subscribed = record.get('subscription').get('subscribed');\r\n\tconst createdAt = new Date(record.createdAt)\r\n\t\t.toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric',hour12: false });\r\n\tconst dateRespone=new Date(record.get('date'));\r\n\tconst date = dateRespone\r\n\t\t.toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric',hour12: false });\r\n\t\t\r\n\t\tconst dateObj={\r\n\t\tyear:dateRespone.getFullYear(),\r\n\t\tmonth:(dateRespone.getMonth()+1),\r\n\t\tday:dateRespone.getDate(),\r\n\t\thour:(dateRespone.getHours()),\r\n\t\tminute:dateRespone.getMinutes()\r\n\t}\r\n\t\r\n\treturn {\r\n\t\tid: record.id,\r\n\t\tcreatedAt,\r\n\t\tname: record.get('name'),\r\n\t\tdescription: record.get('description'),\r\n\t\timageUrl: record.get('imageUrl'),\r\n\t\tstatus: record.get('status'),\r\n\t\tlocation:[record.get('location')._latitude,record.get('location')._longitude],\r\n\t\tdate,\r\n\t\tcreator,\r\n\t\tsubscriptionId,\r\n\t\tsubscribed,\r\n\t\tdateObj\r\n\t}\r\n}\r\n\r\nexport {\r\n\tcreateEvent,\r\n\teditEvent,\r\n\tcancelEvent,\r\n\tgetEventById,\r\n\tgetMyEvents,\r\n\tgetMyEventsCount,\r\n\tgetAllEvents,\r\n\tgetAllEventsCount,\r\n\tgetActiveEvents,\r\n\tgetActiveEventsCount,\r\n\tgetCancelledEvents,\r\n\tgetCancelledEventsCount,\r\n\tgetLastFourEvents,\r\n\tgetMostRecentEvents\r\n}\r\n","import './index.css';\r\n\r\nconst Loader = () => {\r\n\r\n  return (\r\n    <div className=\"spinner-container\">\r\n      <div className=\"spinner\">\r\n        <div className=\"spinner-element\">\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loader;","export const MAX_DEFAULT_RATING=5;\r\n\r\nexport const DEFAULT_BOOK_CATEGORIES=[\"classic\", \"fantasy\", \"science fiction\", \"adventure\", \"romance\", \"detective\", \"horror\", \"thriller\", \"historical fiction\", \"YA fiction\", \"travel\", \"education & teaching\", \"social sciences\", \"biography\", \"cooking\", \"art\", \"self - help\", \"motivational\", \"health & fitness\", \"history\", \"religion & spirituality\", \"crafts & hobbies\",\"comedy\", \"business & money\"];\r\n\r\nexport const DEFAULT_BOOK_URL=\"/read-aloud/default_book.png\";\r\n\r\nexport const DEFAULT_EVENT_URL=\"/read-aloud/default_event.png\";\r\n\r\nexport const INITIAL_AUTH_VALUE = {\r\n    userId: \"\",\r\n    username: \"\",\r\n    sessionToken: \"\"\r\n}\r\n\r\nexport const INITIAL_USER_FORM_VALUE = {\r\n    username: \"\",\r\n    password: \"\",\r\n    rePass: \"\"\r\n}\r\n\r\nexport const INITIAL_AUTH_VALIDATION_ERROR = {\r\n    username: null,\r\n    password: null,\r\n    rePass: null,\r\n    exists: null,\r\n    credentials:null\r\n};\r\n\r\nexport const INITIAL_BOOK_VALUE = {\r\n    id: \"\",\r\n    title: \"\",\r\n    author: \"\",\r\n    description: \"\",\r\n    imageUrl: \"\",\r\n    rating: \"\",\r\n    createdAt: \"\",\r\n    categories:[]\r\n}\r\n\r\nexport const INITIAL_BOOK_VALIDATION_ERROR = {\r\n    title: null,\r\n    author: null,\r\n    image: null,\r\n    description: null,\r\n    required:null\r\n};\r\n\r\nexport const INITIAL_EVENT_VALUE = {\r\n    id: \"\",\r\n    name: \"\",\r\n    date: \"\",\r\n    location: \"\",\r\n    description: \"\",\r\n    imageUrl: \"\",\r\n    status: \"\",\r\n    createdAt:\"\",\r\n    creator:\"\",\r\n    dateObj:{}\r\n}\r\n\r\nexport const INITIAL_EVENT_VALIDATION_ERROR = {\r\n    name:null,\r\n    date: null,\r\n    location: null,\r\n    description: null,\r\n    image: null,\r\n    required:null\r\n}\r\n\r\nexport const DEFAULT_LAG_LTD = [38.6855, -101.0733];\r\n\r\nexport const DEFAULT_MAP_CENTER = [42.69751, 23.32415];\r\n\r\nexport const DEFAULT_MAP_CENTER_CITY = \"Sofia\";\r\n\r\nexport const INITIAL_NOTIFICATION_VALUE={\r\n    show:false,\r\n    message:\"\",\r\n    result:\"\",\r\n}\r\n","import './index.css';\r\nimport { MAX_DEFAULT_RATING } from '../../constants/common';\r\n\r\nconst Star = ({ rating }) => {\r\n    \r\n    const stars = Array(MAX_DEFAULT_RATING).fill(1);\r\n\r\n    return (\r\n        <>\r\n            {stars.map((x, i) =>\r\n                i < rating\r\n                    ? (<span key={i} className=\"fa fa-star checked\"></span>)\r\n                    : (<span key={i} className=\"fa fa-star\"></span>)\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Star;","import { Link } from 'react-router-dom';\r\n\r\nimport './index.css';\r\n\r\nimport Star from '../star';\r\n\r\nconst BookCardMedium = ({ id, imageUrl, title, author, rating = '0' }) => {\r\n   \r\n    return (\r\n        <div className=\"book-card-medium\">\r\n            <span className=\"book-card-medium-img\">\r\n                <img src={imageUrl ? imageUrl :\"/default_book.png\"} alt=\"Book_cover\" />\r\n            </span>\r\n            <div className=\"book-card-medium-content\">\r\n                <Link className=\"details-link\" to={`/books/${id}`}>VIEW</Link>\r\n                <div className=\"book-card-medium-content-text\">\r\n                    <p><span className=\"book-card-medium-content-heading\" >Title: </span>{title}</p>\r\n                    <p> <span className=\"book-card-medium-content-heading\"> Author: </span>{author}</p>\r\n                    <p><span className=\"book-card-medium-content-heading\">Rating: </span>\r\n                        <Star rating={rating} />\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BookCardMedium;","import { Link } from 'react-router-dom';\r\n\r\nimport './index.css';\r\nimport { DEFAULT_EVENT_URL } from '../../constants/common';\r\n\r\nconst EventCardMedium = ({ id, imageUrl, name, date, status,createdAt }) => {\r\n   \r\n    return (\r\n        <div className=\"event-card-medium\">\r\n            <span className=\"event-card-medium-img\">\r\n                <img src={imageUrl ? imageUrl :DEFAULT_EVENT_URL} alt=\"event_cover\" />\r\n            </span>\r\n            <div className=\"event-card-medium-content\">\r\n                <Link className=\"details-link\" to={`/events/${id}`}>VIEW</Link>\r\n                <div className=\"event-card-medium-content-text\">\r\n                    <p><span className=\"event-card-medium-content-heading\" >Topic: </span>{name}</p>\r\n                    <p> <span className=\"event-card-medium-content-heading date\"> Date: </span>{date}</p>\r\n                    <p><span className=\"event-card-medium-content-heading\">Status: </span>{status}</p>\r\n                    <p className='date-post' > <span className=\"event-card-medium-content-heading date-post\"> Posted on: </span>{createdAt}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EventCardMedium;","import { useEffect, useReducer } from \"react\";\r\n\r\nimport './index.css';\r\n\r\nimport { getLastFourBooks, getMostLikedBooks } from \"../../services/book\";\r\nimport { getLastFourEvents, getMostRecentEvents } from \"../../services/event\";\r\n\r\nimport Loader from \"../../components/loader\";\r\nimport BookCardMedium from \"../../components/book-card-medium\";\r\nimport EventCardMedium from \"../../components/medium-event-card\";\r\n\r\nconst initState = {\r\n  books: [],\r\n  events: [],\r\n  labelLatestBooks: 'selected',\r\n  labelLikedBooks: '',\r\n  labelUpcomingEvents: 'selected',\r\n  labelNewestEvents: '',\r\n  isLoading: false,\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'books':\r\n      return { ...state, books: action.payload };\r\n    case 'events':\r\n      return { ...state, events: action.payload };\r\n    case 'latestBooks':\r\n      return { ...state, labelLatestBooks: 'selected', labelLikedBooks: '' };\r\n    case 'likedBooks':\r\n      return { ...state, labelLikedBooks: 'selected', labelLatestBooks: '' };\r\n    case 'upcomingEvents':\r\n      return { ...state, labelUpcomingEvents: 'selected', labelNewestEvents: '' };\r\n    case 'newestEvents':\r\n      return { ...state, labelUpcomingEvents: '', labelNewestEvents: 'selected' };\r\n    case 'loading':\r\n      return { ...state, isLoading: !state.isLoading };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\n\r\n\r\nconst Home = () => {\r\n  const [state, dispatch] = useReducer(reducer, initState);\r\n\r\n  useEffect(() => {\r\n    latestBooksHandler();\r\n    newestEventHandler();\r\n  }, [])\r\n\r\n\r\n  const mostLikedBooksHandler = async () => {\r\n    dispatch({ type: 'loading' });\r\n    const res = await getMostLikedBooks();\r\n    dispatch({ type: 'loading' });\r\n    dispatch({ type: 'books', payload: res });\r\n    dispatch({ type: 'likedBooks' });\r\n\r\n  }\r\n\r\n  const latestBooksHandler = async () => {\r\n    dispatch({ type: 'loading' });\r\n    const res = await getLastFourBooks();\r\n    dispatch({ type: 'loading' });\r\n    dispatch({ type: 'books', payload: res });\r\n    dispatch({ type: 'latestBooks' });\r\n  }\r\n\r\n  const newestEventHandler = async () => {\r\n    dispatch({ type: 'loading' });\r\n    const res = await getLastFourEvents();\r\n    dispatch({ type: 'loading' });\r\n    dispatch({ type: 'events', payload: res });\r\n    dispatch({ type: 'newestEvents' });\r\n  }\r\n\r\n  const upcomingEventsHandler = async () => {\r\n    dispatch({ type: 'loading' });\r\n    const res = await getMostRecentEvents();\r\n    dispatch({ type: 'loading' });\r\n    dispatch({ type: 'events', payload: res });\r\n    dispatch({ type: 'upcomingEvents' });\r\n  }\r\n\r\n  const pageIntro = (\r\n    <div className=\"inner-container\">\r\n      <section className=\"inner-container-text\">\r\n        <h3>READING IS AN EMOTION THAT CAN BE SHARED.</h3>\r\n        <h1 className=\"read-aloud-header\">&gt;&gt;&gt; read aloud &lt;&lt;&lt; </h1>\r\n        <h3> IS A PLACE TO </h3>\r\n        <h3> PRESENT YOUR FAVOURITE BOOKS AND FIND FRIENDS.</h3>\r\n        <h3>Read Aloud is a social platform, where users publish posts about books, they love. Events on different themes are organised in order to join people with similar interests and hobbies.Everyone is welcomed. There is only one condition - to love reading.</h3>\r\n      </section>\r\n      <section className=\"inner-container-img\">\r\n        <img src=\"/read-aloud/reading-time.jpg\" alt=\"Reading Time\" />\r\n      </section>\r\n    </div>\r\n  )\r\n\r\n  if (state.isLoading) {\r\n    return (\r\n      <>\r\n        {pageIntro}\r\n        <Loader />\r\n      </>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {pageIntro}\r\n      <div className=\"inner-container-books-events\">\r\n        <section className=\"inner-container-books\">\r\n          <div className=\"books-container-items\">\r\n            {state.books.map(x => <BookCardMedium key={x.id} id={x.id} imageUrl={x.imageUrl} title={x.title} author={x.author} rating={x.rating} />)}\r\n          </div>\r\n          {state.books.length > 0\r\n            ? <div className=\"label-container\">\r\n              <p className={`label ${state.labelLatestBooks}`} onClick={latestBooksHandler}>LATEST BOOKS</p>\r\n              <p className={`label ${state.labelLikedBooks}`} onClick={mostLikedBooksHandler}>MOST LIKED BOOKS</p>\r\n            </div>\r\n            : <h3>No books yet...</h3>\r\n          }\r\n        </section>\r\n        <section className=\"inner-container-events\">\r\n          <div className=\"events-container-items\">\r\n            {state.events.map(x => <EventCardMedium key={x.id} id={x.id} imageUrl={x.imageUrl} name={x.name} createdAt={x.createdAt} date={x.date} status={x.status} />)}\r\n          </div>\r\n          {state.events.length > 0\r\n            ? <div className=\"label-container\">\r\n              <p className={`label ${state.labelNewestEvents}`} onClick={newestEventHandler} >NEWEST EVENTS</p>\r\n              <p className={`label ${state.labelUpcomingEvents}`} onClick={upcomingEventsHandler}>UPCOMING EVENTS</p>\r\n            </div>\r\n            : <h3>No events yet...</h3>\r\n          }\r\n        </section>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Home;\r\n","import { Link } from 'react-router-dom';\r\n\r\nimport './index.css';\r\n\r\n\r\nconst Landing = () => {\r\n    return (\r\n        <div className=\"landing-page-wrapper\">\r\n            <div className=\"line-first\">\r\n                <p> You love reading...</p>\r\n            </div>\r\n            <div className=\"line-second\">\r\n                <p> Find other people who share your passion.</p>\r\n            </div>\r\n            <div className=\"line-third\">\r\n                <p> Join them.</p>\r\n                <Link to='/home' ><i className=\"fas fa-book-reader\"></i></Link>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Landing;","import { Link } from \"react-router-dom\";\r\n\r\nimport './index.css';\r\n\r\nconst NoMatch = () => {\r\n    return (\r\n        <div className=\"no-match\">\r\n            <h2>Something went wrong!</h2>\r\n            <p>\r\n                <Link to=\"/home\">Go to the home page</Link>\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default NoMatch;","const userDataValidation = (type, value, check) => {\r\n    if (type === \"username\") {\r\n        if (value.trim().length < 5 || value.trim().length > 15) {\r\n            return \"Username must be between 5 and 15 characters long.\";\r\n        }\r\n    }\r\n\r\n    if (type === \"password\") {\r\n        if (value.trim().length < 6 || value.trim().length > 12) {\r\n            return \"Password must be between 6 and 12 characters long.\";\r\n        }\r\n    }\r\n\r\n    if (type === \"rePass\") {\r\n        if (value !== check) {\r\n            return \"Passwords don't match.\";\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nconst bookDataValidation = (type, value) => {\r\n\r\n    if (type === \"title\") {\r\n        if (value.trim().length < 2) {\r\n            return \" Book title must be at least 2 characters.\"\r\n        }\r\n    }\r\n\r\n    if (type === \"author\") {\r\n        if (value.trim().length < 2 || value.trim() > 50) {\r\n            return \" Book author must  be between 2 and 50 characters.\"\r\n        }\r\n    }\r\n\r\n    if (type === \"description\") {\r\n        if (value.trim().length === 0) {\r\n            return \"Book description is required.\"\r\n        }\r\n        if (value.trim().length > 500) {\r\n            return \"Book description can be up to 500 characters.\"\r\n        }\r\n    }\r\n\r\n    if (type === \"imageUrl\") {\r\n        if (value.size > 0 && !value.type.includes(\"image\")) {\r\n            return \"Choose images to upload (PNG, JPG, JPEG...)\"\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\nconst eventDataValidation = (type, value,month) => {\r\n\r\n    if (type === \"name\") {\r\n        if (value.trim().length < 2) {\r\n            return \" Event name must be at least 2 characters.\"\r\n        }\r\n    }\r\n\r\n    if (type === \"date\") {\r\n        const now = Date.now();\r\n        if (!value || value.getFullYear()===1899||month==='') {\r\n            return \"Date is invalid.\"\r\n        }\r\n        if (now > value) {\r\n            return \"You have entered a past date.\"\r\n        }\r\n    }\r\n\r\n    if (type === \"description\") {\r\n        if (value.trim().length === 0) {\r\n            return \"Event description is required.\"\r\n        }\r\n        if (value.trim().length > 500) {\r\n            return \"Event description can be up to 500 characters.\"\r\n        }\r\n    }\r\n\r\n    if (type === \"imageUrl\") {\r\n        if (value.size > 0 && !value.type.includes(\"image\")) {\r\n            return \"Choose images to upload (PNG, JPG, JPEG...)\"\r\n        }\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nconst searchDataValidation = (criteria, value) => {\r\n    if (!criteria || !value || criteria.trim() === \"\" || value.trim() === \"\") {\r\n        return \"Both search keys and criteria are required. E.g. 'The lord of the rings' and 'by 'title'\"\r\n    }\r\n    return null;\r\n}\r\n\r\nconst commentDataValidation = (value) => {\r\n    if (value.trim().length === 0 || value.trim().length > 400) {\r\n        return \"*Your comment can not be 0 or more than 400 characters.\";\r\n    }\r\n    return null;\r\n}\r\n\r\nexport {\r\n    userDataValidation,\r\n    bookDataValidation,\r\n    searchDataValidation,\r\n    commentDataValidation,\r\n    eventDataValidation\r\n}\r\n","import {useState } from \"react\";\r\n\r\nimport {\r\n    getAllBooks,\r\n    getAllBooksCount,\r\n    getBooksByAuthor,\r\n    getBooksByAuthorCount,\r\n    getBooksByCategory,\r\n    getBooksByCategoryCount,\r\n    getBooksByTitle,\r\n    getBooksByTitleCount,\r\n    getBooksByCreator,\r\n    getBooksByCreatorCount\r\n} from \"../services/book\";\r\n\r\nimport { searchDataValidation } from \"../utils/validation\";\r\n\r\nlet isDisabledIncreaseButton=true;\r\nlet isDisabledDecreaseButton=true;\r\n\r\nlet searchMessage={\r\n    criteria:null,\r\n    search:null\r\n}\r\n\r\nconst useBookSearch = (username) => {\r\n    const [query, setQuery] = useState({all:true});\r\n    const [books, setBooks] = useState([]);\r\n    const [pagination, setPagination] = useState({ counter: 1, perPage: 2, totalPages: 0, count: 0 });\r\n    const [isLoading, setIsloading] = useState(false);\r\n    const [validationError, setValidationError] = useState(null);\r\n\r\n    const requestCountHandler = async () => {\r\n\r\n        setIsloading(true);\r\n        let count = 0;\r\n        if (query.all) {\r\n            count = await getAllBooksCount();\r\n        }\r\n        if (query.myPosts) {\r\n            count = await getBooksByCreatorCount(query.myPosts);\r\n        }\r\n        if (query.postedBy) {\r\n            count = await getBooksByCreatorCount(query.postedBy);\r\n        }\r\n        if (query.category) {\r\n            count = await getBooksByCategoryCount(query.category);\r\n        }\r\n        if (query.author) {\r\n            count = await getBooksByAuthorCount(query.author);\r\n        }\r\n        if (query.title) {\r\n            count = await getBooksByTitleCount(query.title);\r\n        }\r\n        const totalPages = Math.ceil(count / pagination.perPage);\r\n        if(totalPages<=1){\r\n            isDisabledIncreaseButton=true;\r\n            isDisabledDecreaseButton=true;\r\n        }\r\n        if(totalPages>1){\r\n            isDisabledIncreaseButton=false;\r\n        }\r\n\r\n        setPagination(prev => ({ ...prev, count, totalPages }));\r\n        setIsloading(false);\r\n    }\r\n\r\n    const requestDataHandler = async () => {\r\n        setIsloading(true);\r\n        let books = [];\r\n        if (query.all) {\r\n            books = await getAllBooks(pagination);\r\n        }\r\n        if (query.myPosts) {\r\n            books = await getBooksByCreator(pagination, query.myPosts);\r\n        }\r\n        if (query.postedBy) {\r\n            books = await getBooksByCreator(pagination, query.postedBy);\r\n        }\r\n        if (query.category) {\r\n            books = await getBooksByCategory(pagination, query.category);\r\n        }\r\n        if (query.author) {\r\n            books = await getBooksByAuthor(pagination, query.author);\r\n        }\r\n        if (query.title) {\r\n            books = await getBooksByTitle(pagination, query.title);\r\n        }\r\n\r\n        setIsloading(false);\r\n        setBooks(books);\r\n    }\r\n    \r\n    const increaseCounter = () => {\r\n        const counter = pagination.counter + 1;\r\n        if (counter >= pagination.totalPages) {\r\n            isDisabledIncreaseButton=true;\r\n        }\r\n            isDisabledDecreaseButton=false;\r\n        setPagination(prev => ({ ...prev, counter:counter }));\r\n    }\r\n\r\n    const decreaseCounter = () => {\r\n        const counter = pagination.counter - 1;\r\n        if (counter === 1) {\r\n            isDisabledDecreaseButton=true;\r\n        }\r\n            isDisabledIncreaseButton=false;\r\n        setPagination(prev => ({ ...prev, counter:counter }));\r\n    }\r\n\r\n\r\n    const onClickMyPostsHandler = async () => {\r\n        setValidationError(null);\r\n        setPagination(prev => ({ ...prev, counter:1 }));\r\n        setQuery({myPosts:username});\r\n        searchMessage={ criteria: username + ' profile', search: 'books' };\r\n\r\n    }\r\n\r\n    const onClickAllPostsHandler = async () => {\r\n        setValidationError(null);\r\n        setPagination(prev => ({ ...prev, counter:1 }));\r\n        setQuery({all:true});\r\n        searchMessage.criteria=null;\r\n    }\r\n\r\n\r\n    const onSubmitSearchHandler = async (e) => {\r\n        e.preventDefault();\r\n        const formData = new FormData(e.target);\r\n        const search = formData.get('search');\r\n        const criteria = formData.get('criteria');\r\n        const error = searchDataValidation(criteria, search);\r\n\r\n        setValidationError(error);\r\n        if (error) {\r\n            return;\r\n        }\r\n\r\n        setPagination(prev => ({ ...prev, counter:1 }));\r\n        setQuery({[criteria]:search});\r\n\r\n        if (criteria === 'postedBy') {\r\n            searchMessage={ criteria: 'users', search };\r\n        }\r\n        if (criteria === 'category') {\r\n            searchMessage={ criteria: 'books categories', search };\r\n        }\r\n        if (criteria === 'author') {\r\n            searchMessage={ criteria: 'books authors', search };\r\n        }\r\n        if (criteria === 'title') {\r\n            searchMessage={ criteria: 'books titles', search };\r\n        }\r\n        e.target.reset();\r\n    }\r\n    \r\n    return {\r\n        query,\r\n        books,\r\n        pagination,\r\n        isLoading,\r\n        validationError,\r\n        searchMessage,\r\n        isDisabledIncreaseButton,\r\n        isDisabledDecreaseButton,\r\n        decreaseCounter,\r\n        increaseCounter,\r\n        onClickMyPostsHandler,\r\n        onClickAllPostsHandler,\r\n        onSubmitSearchHandler,\r\n        requestCountHandler,\r\n        requestDataHandler,\r\n    }\r\n}\r\n\r\nexport default useBookSearch;\r\n","import './index.css';\r\n\r\nconst Title = ({ title }) => {\r\n  return (\r\n    <h1 className=\"page-title\">{title}</h1>\r\n  )\r\n}\r\n\r\nexport default Title;","import './index.css';\r\n\r\nconst ValidationError = ({ message }) => {\r\n  return (\r\n    <p className=\"validation-error\">{message}</p>\r\n  )\r\n}\r\n\r\nexport default ValidationError;","import { useEffect, useContext } from \"react\";\r\n\r\nimport './index.css';\r\n\r\nimport AuthContext from \"../../../context/authContext\";\r\nimport useBookSearch from \"../../../hooks/useBookSearch\";\r\n\r\nimport Title from \"../../../components/title\";\r\nimport Loader from \"../../../components/loader\";\r\nimport BookCardMedium from \"../../../components/book-card-medium\";\r\nimport ValidationError from \"../../../components/validation-error\";\r\n\r\nconst Books = () => {\r\n\tconst { user,isAuthenticated } = useContext(AuthContext);\r\n\tconst {\r\n\t\tquery,\r\n\t\tbooks,\r\n\t\tpagination,\r\n\t\tisLoading,\r\n\t\tvalidationError,\r\n\t\tsearchMessage,\r\n\t\tisDisabledIncreaseButton,\r\n\t\tisDisabledDecreaseButton,\r\n\t\tdecreaseCounter,\r\n\t\tincreaseCounter,\r\n\t\tonClickMyPostsHandler,\r\n\t\tonClickAllPostsHandler,\r\n\t\tonSubmitSearchHandler,\r\n\t\trequestCountHandler,\r\n\t\trequestDataHandler,\r\n\t} = useBookSearch(user.username)\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\trequestCountHandler();\r\n\t},[query]);\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif(pagination.count>0){\r\n\t\t\trequestDataHandler();\r\n\t\t}\r\n\t}, [pagination]);\r\n\r\n\r\n\tconst searchMyPosts = (\r\n\t\t<div className=\"search-my-posts\">\r\n\t\t\t<div className=\"search-my-posts-icon\">\r\n\t\t\t\t<i className=\"far fa-calendar-check\"></i>\r\n\t\t\t\t<span className=\"search-my-posts-action\" onClick={onClickMyPostsHandler} >MY BOOKS</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst searchAllPosts = (\r\n\t\t<div className=\"search-all-posts\">\r\n\t\t\t<div className=\"search-all-posts-icon\">\r\n\t\t\t\t<i className=\"far fa-calendar-check\"></i>\r\n\t\t\t\t<span className=\"search-all-posts-action\" onClick={onClickAllPostsHandler} >ALL BOOKS</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n\r\n\tconst searchResults = (\r\n\t\t<>\r\n\t\t\t{!query.all && searchMessage.criteria && <p className=\"search-message\">Found &nbsp; <strong>{pagination.count}</strong>\t&nbsp; search results for\t&nbsp; <strong>{searchMessage.search}</strong>\t&nbsp; in \t&nbsp;<strong>{searchMessage.criteria}</strong>\t&nbsp;</p>}\r\n\t\t\t{query.all && <p className=\"search-message\">Latest books...</p>}\r\n\t\t\t<div className=\"books-container search\">\r\n\t\t\t\t<button className=\"prev-books\" disabled={isDisabledDecreaseButton} onClick={decreaseCounter}>&#10094;</button>\r\n\t\t\t\t<div className=\"books-inner-container\">\r\n\t\t\t\t\t{books.map(x => <BookCardMedium key={x.id} id={x.id} imageUrl={x.imageUrl} title={x.title} author={x.author} rating={x.rating} />)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<button className=\"next-books\" disabled={isDisabledIncreaseButton} onClick={increaseCounter}>&#10095;</button>\r\n\t\t\t</div>\r\n\t\t\t<p className=\"search-pages\">{(pagination.totalPages===0 ?pagination.counter-1:pagination.counter)}/{pagination.totalPages}</p>\r\n\t\t</>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Title title=\"Books\" />\r\n\t\t\t<div className=\"search-posts\">\r\n\t\t\t{searchAllPosts}\r\n\t\t\t{isAuthenticated && searchMyPosts}\r\n\t\t\t</div>\r\n\t\t\t<div className=\"all-books-container\">\r\n\t\t\t\t<div className=\"search-container\">\r\n\t\t\t\t\t<form action=\"\" onSubmit={onSubmitSearchHandler}>\r\n\t\t\t\t\t\t<input className=\"main-input\" type=\"text\" placeholder=\"Search by key and criteria...\" name=\"search\" />\r\n\t\t\t\t\t\t<div className=\"search-options-list\">\r\n\t\t\t\t\t\t\t<div className=\"search-option popup-title\">\r\n\t\t\t\t\t\t\t\t<label className=\"search-options-label-title\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" className=\"popup-title\" name=\"criteria\" defaultValue=\"title\" />\r\n\t\t\t\t\t\t\t\t\t<i className=\"far fa-bookmark\"></i>\r\n\t\t\t\t\t\t\t\t\t<span className=\"popuptext-title\">BY TITLE</span>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"search-option popup-author\">\r\n\t\t\t\t\t\t\t\t<label className=\"search-options-label-author\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" className=\"popup-author\" name=\"criteria\" defaultValue=\"author\" />\r\n\t\t\t\t\t\t\t\t\t<i className=\"far fa-edit\"></i>\r\n\t\t\t\t\t\t\t\t\t<span className=\"popuptext-author\">BY AUTHOR</span>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"search-option popup-category\">\r\n\t\t\t\t\t\t\t\t<label className=\"search-options-label-category\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" className=\"popup-category\" name=\"criteria\" defaultValue=\"category\" />\r\n\t\t\t\t\t\t\t\t\t<i className=\"fas fa-list-ul\"></i>\r\n\t\t\t\t\t\t\t\t\t<span className=\"popuptext-category\">BY CATEGORY</span>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"search-option popup-postedBy\">\r\n\t\t\t\t\t\t\t\t<label className=\"search-options-label-postedBy\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" className=\"popup-postedBy\" name=\"criteria\" defaultValue=\"postedBy\" />\r\n\t\t\t\t\t\t\t\t\t<i className=\"far fa-id-badge\"></i>\r\n\t\t\t\t\t\t\t\t\t<span className=\"popuptext-postedBy\">POSTED BY</span>\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<button className=\"search-btn\" type=\"submit\"> <i className=\"fa fa-search\"></i></button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t{validationError && <ValidationError message={validationError} />}\r\n\t\t\t\t</div>\r\n\t\t\t\t{isLoading ?<Loader/> :searchResults}\r\n\t\t\t</div>\r\n\t\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Books;","import Parse from \"../config/server\";\r\n\r\nconst login = async (authData) => {\r\n\tconst { username, password } = authData;\r\n\r\n\ttry {\r\n\t\tconst res = await Parse.User.logIn(username.toLocaleLowerCase(), password);\r\n\t\treturn {\r\n\t\t\tuserId: res.id,\r\n\t\t\tusername: res.get('username'),\r\n\t\t\tsessionToken: res.get('sessionToken')\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.log('Error while logging in user', error);\r\n\t\tif(error.message==='Invalid username/password.'){\r\n\t\t\tthrow  error;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst register = async (authData) => {\r\n\tconst { username, password } = authData;\r\n\r\n\tconst user = new Parse.User();\r\n\tuser.set('username', username.toLocaleLowerCase());\r\n\tuser.set('password', password);\r\n\r\n\ttry {\r\n\t\tconst res = await user.signUp();\r\n\t\treturn {\r\n\t\t\tuserId: res.id,\r\n\t\t\tusername: res.get('username'),\r\n\t\t\tsessionToken: res.get('sessionToken')\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while signing up user', error);\r\n\t}\r\n}\r\n\r\nconst logout = async () => {\r\n\ttry {\r\n\t\tawait Parse.User.logOut();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error!', error);\r\n\t}\r\n}\r\n\r\nconst checkUserExists = async (username) => {\r\n\tconst User = new Parse.User();\r\n\tconst query = new Parse.Query(User);\r\n\tquery.equalTo('username', username.toLocaleLowerCase());\r\n\r\n\ttry {\r\n\t\tconst res = await query.first();\r\n\t\treturn res;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while retrieving user', error);\r\n\t}\r\n}\r\n\r\nconst updateUserReadingList = async (userId, bookId) => {\r\n\tconst book = new Parse.Object('Book');\r\n\tbook.id = bookId;\r\n\r\n\tconst User = new Parse.User();\r\n\tconst query = new Parse.Query(User);\r\n\r\n\ttry {\r\n\t\tconst user = await query.get(userId);\r\n\t\ttry {\r\n\t\t\tconst relation = user.relation('readingList')\r\n\t\t\trelation.add(book)\r\n\t\t\tawait user.save();\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error while updating user', error);\r\n\t\t}\r\n\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while retrieving user', error);\r\n\t}\r\n}\r\n\r\nconst getUserReadingList = async (userId) => {\r\n\tconst User = new Parse.User();\r\n\tconst query = new Parse.Query(User);\r\n\r\n\ttry {\r\n\t\tconst user = await query.get(userId);\r\n\t\ttry {\r\n\t\t\tconst relation = user.relation('readingList');\r\n\t\t\tconst data = await relation.query().find();\r\n\t\t\tconst results = data.map(x => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tid: x.id,\r\n\t\t\t\t\ttitle: x.get('title'),\r\n\t\t\t\t\tauthor: x.get('author'),\r\n\t\t\t\t\timageUrl: x.get('imageUrl')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treturn results;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error while updating user', error);\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while retrieving user', error);\r\n\t}\r\n}\r\n\r\nconst checkBookInUserReadingList = async (userId, bookId) => {\r\n\tconst User = new Parse.User();\r\n\tconst query = new Parse.Query(User);\r\n\ttry {\r\n\t\tconst user = await query.get(userId);\r\n\t\ttry {\r\n\t\t\tconst relation = user.relation('readingList');\r\n\t\t\tconst data = await relation.query().find();\r\n\t\t\tconst results = data.map(x => x.id);\r\n\t\t\tif (results.includes(bookId)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error while updating user', error);\r\n\t\t}\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while retrieving user', error);\r\n\t}\r\n}\r\n\r\nconst removeBookFromUserReadingList = async (userId, bookId) => {\r\n\tconst book = new Parse.Object('Book');\r\n\tbook.id = bookId;\r\n\r\n\tconst User = new Parse.User();\r\n\tconst query = new Parse.Query(User);\r\n\ttry {\r\n\t\tconst user = await query.get(userId);\r\n\t\ttry {\r\n\t\t\tconst relation = user.relation('readingList')\r\n\t\t\trelation.remove(book);\r\n\t\t\tawait user.save();\r\n\t\t\treturn true;\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error while updating user', error);\r\n\t\t}\r\n\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while retrieving user', error);\r\n\t}\r\n}\r\n\r\n\r\n\r\nconst authServices = {\r\n\tlogin,\r\n\tregister,\r\n\tlogout,\r\n\tcheckUserExists,\r\n\tupdateUserReadingList,\r\n\tgetUserReadingList,\r\n\tcheckBookInUserReadingList,\r\n\tremoveBookFromUserReadingList\r\n}\r\n\r\nexport default authServices;","import { useState } from 'react';\r\n\r\nimport { INITIAL_AUTH_VALIDATION_ERROR, INITIAL_AUTH_VALUE, INITIAL_USER_FORM_VALUE } from '../constants/common';\r\n\r\nimport userService from '../services/user';\r\nimport { userDataValidation } from '../utils/validation';\r\n\r\n\r\nfunction useAuthForm() {\r\n\r\n    const [formValue, setFormValue] = useState(INITIAL_USER_FORM_VALUE);\r\n    const [authValue, setAuthValue] = useState(INITIAL_AUTH_VALUE);\r\n    const [isLoading, setIsloading] = useState(false);\r\n    const [validationError, setValidationError] = useState(INITIAL_AUTH_VALIDATION_ERROR);\r\n    const [isSuccess, setIsSuccess] = useState(false);\r\n\r\n\r\n    const onChangeInputHandler = (e) => {\r\n        e.preventDefault();\r\n        const value = e.target.value;\r\n        const type = e.target.name;\r\n        if (validationError.exists) {\r\n            setValidationError(prev => ({ ...prev, \"exists\": null }))\r\n        }\r\n        const error = userDataValidation(type, value, formValue.password);\r\n        setValidationError(prev => ({ ...prev, [type]: error }));\r\n        if (error) {\r\n            return;\r\n        }\r\n        setFormValue(prev => ({ ...prev, [type]: value }))\r\n    }\r\n\r\n    const onSubmitUserRegisterHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        const data = new FormData(e.target)\r\n        const user = {\r\n            username: data.get('username'),\r\n            password: data.get('password'),\r\n            rePass: data.get('rePass')\r\n        }\r\n\r\n        if (validationError.username || validationError.password || validationError.rePass) {\r\n            return;\r\n        }\r\n        if (user.username === '' || user.password === '' || user.rePass === '') {\r\n            return;\r\n        }\r\n\r\n        async function requestHandler() {\r\n            try {\r\n                setIsloading(true);\r\n                const isExisting = await doesUserExist(user.username);\r\n                if (isExisting) {\r\n                    setIsloading(false);\r\n                    return;\r\n                }\r\n                const res = await userService.register(user);\r\n                setAuthValue(res);\r\n                setIsloading(false);\r\n                setIsSuccess(true);\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        }\r\n        requestHandler();\r\n    }\r\n\r\n    const onSubmitUserLoginHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        const data = new FormData(e.target)\r\n        const user = {\r\n            username: data.get('username'),\r\n            password: data.get('password')\r\n        }\r\n\r\n        if (validationError.username || validationError.password) {\r\n            return;\r\n        }\r\n        if (user.username==='' || user.password==='') {\r\n            return;\r\n        }\r\n\r\n        userService.login(user)\r\n            .then(user => {\r\n                setIsloading(true);\r\n                setAuthValue(user);\r\n                setIsloading(false);\r\n                setIsSuccess(true);\r\n            })\r\n            .catch(err => {\r\n                if (err.message === 'Invalid username/password.') {\r\n                    setValidationError(prev => ({ ...prev, \"credentials\": err.message }))\r\n                    return;\r\n                }\r\n            })\r\n    }\r\n    \r\n    const doesUserExist = async (username) => {\r\n        try {\r\n            const res = await userService.checkUserExists(username);\r\n            if (res) {\r\n                setFormValue({ username: username })\r\n                setValidationError(prev => ({ ...prev, \"exists\": \"User with such name already exists. Please sign up with another name.\" }));\r\n                return true;\r\n            }\r\n            setValidationError(prev => ({ ...prev, \"exists\": null }));\r\n            return false;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    return {\r\n        formValue,\r\n        authValue,\r\n        isLoading,\r\n        validationError,\r\n        isSuccess,\r\n        onChangeInputHandler,\r\n        onSubmitUserRegisterHandler,\r\n        onSubmitUserLoginHandler,\r\n    };\r\n}\r\n\r\nexport default useAuthForm;","import { useContext,useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport './index.css';\r\n\r\nimport useAuthForm from \"../../../hooks/useAuthForm\";\r\nimport AuthContext from \"../../../context/authContext\";\r\n\r\nimport Title from \"../../../components/title\";\r\nimport Loader from \"../../../components/loader\";\r\nimport ValidationError from \"../../../components/validation-error\";\r\n\r\n\r\nconst Login = () => {\r\n\r\n\tconst navigate = useNavigate();\r\n\tconst {login} = useContext(AuthContext);\r\n\r\n\tconst {\r\n        authValue,\r\n        isLoading,\r\n        validationError,\r\n        isSuccess,\r\n\t\tonChangeInputHandler,\r\n\t\tonSubmitUserLoginHandler\r\n\t} = useAuthForm();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isSuccess) {\r\n\t\t\tlogin(authValue);\r\n\t\t\tnavigate(\"/home\", { replace: true });\r\n\t\t}\r\n\t},[isSuccess])\r\n\r\n\r\n\tif (isLoading) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Loader />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Title title=\"Login\" />\r\n\t\t\t<div className=\"signin-section-wrapper\">\r\n\t\t\t\t<div className=\"signin-section\">\r\n\t\t\t\t\t<div className=\"signin-section-info\">\r\n\t\t\t\t\t\t<h2>Happy </h2>\r\n\t\t\t\t\t\t<i className=\"fas fa-users\"></i>\r\n\t\t\t\t\t\t<h2>to have you here.</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<form action=\"#\" method=\"POST\" className=\"signup-form\" onSubmit={onSubmitUserLoginHandler}>\r\n\t\t\t\t\t\t<ul className=\"no-bullet\">\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"username\"></label>\r\n\t\t\t\t\t\t\t\t<input type=\"text\" className=\"input-fields\" id=\"username\" name=\"username\" placeholder=\"Username\"  onChange={onChangeInputHandler}/>\r\n\t\t\t\t\t\t\t\t{validationError.username && <ValidationError message={validationError.username}/>}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"password\"></label>\r\n\t\t\t\t\t\t\t\t<input type=\"password\" className=\"input-fields\" id=\"password\" name=\"password\" placeholder=\"Password\" onChange={onChangeInputHandler} />\r\n\t\t\t\t\t\t\t\t{validationError.password && <ValidationError message={validationError.password}/>}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li >\r\n\t\t\t\t\t\t\t\t<input type=\"submit\" className=\"join-btn\" name=\"join\" alt=\"Join\" value=\"Join\" />\r\n\t\t\t\t\t\t\t\t{validationError.credentials && <ValidationError message={validationError.credentials}/>}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Login;","import { useContext } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport './index.css'\r\n\r\nimport userService from \"../../../services/user\";\r\nimport AuthContext from \"../../../context/authContext\";\r\n\r\n\r\nconst Logout = () => {\r\n  const { logout } = useContext(AuthContext);\r\n  const navigate = useNavigate();\r\n\r\n  const onSubmitLogoutHandler = (e) => {\r\n    userService.logout()\r\n      .then(() => {\r\n        logout()\r\n        navigate(\"/home\", { replace: true });\r\n      });\r\n  }\r\n\r\n\r\n  return (\r\n    <>\r\n     <h1 className=\"page-title-logout\">Logout</h1>\r\n      <div className=\"signout-section-wrapper\">\r\n        <div className=\"signout-section\">\r\n          <div className=\"signout-section-text\">\r\n            <h2>You are about to unsubscribe  </h2>\r\n            <h3>&gt;&gt;&gt; READ ALOUD &lt;&lt;&lt;</h3>\r\n          </div>\r\n          <input type=\"submit\" className=\"logout-btn\" onClick={onSubmitLogoutHandler} value=\"Confirm\" />\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Logout;","import { useState } from \"react\";\r\n\r\nimport {\r\n    getMyEvents,\r\n    getMyEventsCount,\r\n    getAllEvents,\r\n    getAllEventsCount,\r\n    getActiveEvents,\r\n    getActiveEventsCount,\r\n    getCancelledEvents,\r\n    getCancelledEventsCount,\r\n} from \"../services/event\";\r\n\r\n\r\nlet isDisabledIncreaseButton = true;\r\nlet isDisabledDecreaseButton = true;\r\n\r\nlet searchMessage = {\r\n    criteria: null,\r\n    search: null\r\n}\r\n\r\nconst useEventSearch = (username) => {\r\n    const [query, setQuery] = useState({all:true});\r\n    const [events, setEvents] = useState([]);\r\n    const [pagination, setPagination] = useState({ counter: 1, perPage: 2, totalPages: 0, count: 0 });\r\n    const [isLoading, setIsloading] = useState(false);\r\n\r\n    const requestCountHandler = async () => {\r\n\r\n        setIsloading(true);\r\n        let count = 0;\r\n        if (query.all) {\r\n            count = await getAllEventsCount();\r\n        }\r\n        if (query.myEvents) {\r\n            count = await getMyEventsCount(username);\r\n        }\r\n        if (query.active) {\r\n            count = await getActiveEventsCount();\r\n        }\r\n        if (query.cancelled) {\r\n            count = await getCancelledEventsCount();\r\n        }\r\n        const totalPages = Math.ceil(count / pagination.perPage);\r\n        if (totalPages <= 1) {\r\n            isDisabledIncreaseButton = true;\r\n            isDisabledDecreaseButton = true;\r\n        }\r\n        if (totalPages > 1) {\r\n            isDisabledIncreaseButton = false;\r\n        }\r\n\r\n        setPagination(prev => ({ ...prev, count, totalPages }));\r\n        setIsloading(false);\r\n    }\r\n\r\n    const requestDataHandler = async () => {\r\n        setIsloading(true);\r\n        let events = [];\r\n        if (query.all) {\r\n            events = await getAllEvents(pagination);\r\n        }\r\n        if (query.myEvents) {\r\n            events = await getMyEvents(username, pagination);\r\n        }\r\n        if (query.active) {\r\n            events = await getActiveEvents(pagination);\r\n        }\r\n        if (query.cancelled) {\r\n            events = await getCancelledEvents(pagination);\r\n        }\r\n\r\n        setEvents(events);\r\n        setIsloading(false);\r\n    }\r\n\r\n    const increaseCounter = () => {\r\n        const counter = pagination.counter + 1;\r\n        if (counter >= pagination.totalPages) {\r\n            isDisabledIncreaseButton = true;\r\n        }\r\n        isDisabledDecreaseButton = false;\r\n        setPagination(prev => ({ ...prev, counter: counter }));\r\n    }\r\n\r\n    const decreaseCounter = () => {\r\n        const counter = pagination.counter - 1;\r\n        if (counter === 1) {\r\n            isDisabledDecreaseButton = true;\r\n        }\r\n        isDisabledIncreaseButton = false;\r\n        setPagination(prev => ({ ...prev, counter: counter }));\r\n    }\r\n\r\n\r\n    const onClickMyEventsHandler = async () => {\r\n        setPagination(prev => ({ ...prev, counter: 1 }));\r\n        setQuery({myEvents: username });\r\n        searchMessage = { criteria: username + ' profile', search: 'events' };\r\n    }\r\n\r\n    const onClickAllEventsHandler = async () => {\r\n        setPagination(prev => ({ ...prev, counter: 1 }));\r\n        setQuery({all:true });\r\n        searchMessage.criteria = null;\r\n    }\r\n\r\n    const onClickActiveEventsHandler = async () => {\r\n        setPagination(prev => ({ ...prev, counter: 1 }));\r\n        setQuery({active: true});\r\n\r\n        searchMessage = { criteria: 'active', search: 'events' };\r\n    }\r\n\r\n    const onClickCancelledEventsHandler = async () => {\r\n        setPagination(prev => ({ ...prev, counter: 1 }));\r\n        setQuery({cancelled: true});\r\n        searchMessage = { criteria: 'cancelled', search: 'events' };\r\n    }\r\n\r\n\r\n\r\n    return {\r\n        query,\r\n        events,\r\n        pagination,\r\n        isLoading,\r\n        searchMessage,\r\n        isDisabledIncreaseButton,\r\n        isDisabledDecreaseButton,\r\n        decreaseCounter,\r\n        increaseCounter,\r\n        onClickMyEventsHandler,\r\n        onClickAllEventsHandler,\r\n        onClickActiveEventsHandler,\r\n        onClickCancelledEventsHandler,\r\n        requestCountHandler,\r\n        requestDataHandler,\r\n    }\r\n}\r\n\r\nexport default useEventSearch;","import { useEffect, useContext } from \"react\";\r\n\r\nimport './index.css';\r\n\r\nimport AuthContext from \"../../../context/authContext\";\r\nimport useEventSearch from \"../../../hooks/useEventSearch\";\r\n\r\nimport Title from \"../../../components/title\";\r\nimport Loader from \"../../../components/loader\";\r\nimport EventCardMedium from \"../../../components/medium-event-card\";\r\n\r\nconst Events = () => {\r\n  const { user, isAuthenticated } = useContext(AuthContext);\r\n  const {\r\n    query,\r\n    events,\r\n    pagination,\r\n    isLoading,\r\n    searchMessage,\r\n    isDisabledIncreaseButton,\r\n    isDisabledDecreaseButton,\r\n    decreaseCounter,\r\n    increaseCounter,\r\n    onClickMyEventsHandler,\r\n    onClickAllEventsHandler,\r\n    onClickActiveEventsHandler,\r\n    onClickCancelledEventsHandler,\r\n    requestCountHandler,\r\n    requestDataHandler,\r\n  } = useEventSearch(user.username)\r\n\r\n\r\n  useEffect(() => {\r\n    requestCountHandler();\r\n  }, [query]);\r\n\r\n  useEffect(() => {\r\n    if (pagination.count > 0) {\r\n      requestDataHandler();\r\n    }\r\n  }, [pagination]);\r\n\r\n\r\n  const searchMyEvents = (\r\n    <div className=\"search-my-events\">\r\n      <div className=\"search-my-events-icon\">\r\n        <i className=\"far fa-calendar-check\"></i>\r\n        <span className=\"search-my-events-action\" onClick={onClickMyEventsHandler} >MY EVENTS</span>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n  const searchAllEvents = (\r\n    <div className=\"search-all-events\">\r\n      <div className=\"search-all-events-icon\">\r\n        <i className=\"far fa-calendar-check\"></i>\r\n        <span className=\"search-all-events-action\" onClick={onClickAllEventsHandler} >ALL EVENTS</span>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n  const searchActiveEvents = (\r\n    <div className=\"search-all-events\">\r\n      <div className=\"search-all-events-icon\">\r\n        <i className=\"far fa-calendar-check\"></i>\r\n        <span className=\"search-all-events-action\" onClick={onClickActiveEventsHandler} >ACTIVE EVENTS</span>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n  const searchCancelledEvents = (\r\n    <div className=\"search-all-events\">\r\n      <div className=\"search-all-events-icon\">\r\n        <i className=\"far fa-calendar-check\"></i>\r\n        <span className=\"search-all-events-action\" onClick={onClickCancelledEventsHandler} >CANCELLED EVENTS</span>\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n  const searchResults = (\r\n    <>\r\n      {query.all && <p className=\"search-message\">Latest events...</p>}\r\n      {!query.all && searchMessage.criteria && <p className=\"search-message\">Found &nbsp; <strong>{pagination.count}</strong>\t&nbsp; search results for\t&nbsp; <strong>{searchMessage.search}</strong>\t&nbsp; in \t&nbsp;<strong>{searchMessage.criteria}</strong>\t&nbsp;</p>}\r\n      <div className=\"events-container search\">\r\n        <button className=\"prev-events\" disabled={isDisabledDecreaseButton} onClick={decreaseCounter}>&#10094;</button>\r\n        <div className=\"events-inner-container\">\r\n          {events.map(x => <EventCardMedium key={x.id} id={x.id} imageUrl={x.imageUrl} name={x.name} createdAt={x.createdAt} date={x.date} status={x.status} />)}\r\n        </div>\r\n        <button className=\"next-events\" disabled={isDisabledIncreaseButton} onClick={increaseCounter}>&#10095;</button>\r\n      </div>\r\n      <p className=\"search-pages\">{(pagination.totalPages === 0 ? pagination.counter - 1 : pagination.counter)}/{pagination.totalPages}</p>\r\n    </>\r\n  )\r\n\r\n  return (\r\n      <>\r\n      <Title title=\"EVENTS\" />\r\n      <div className=\"search-events\">\r\n        {searchAllEvents}\r\n        {searchActiveEvents}\r\n        {searchCancelledEvents}\r\n        {isAuthenticated && searchMyEvents}\r\n      </div>\r\n      <div className=\"all-events-container\">\r\n        {isLoading ? <Loader /> : searchResults}\r\n      </div>\r\n      </>\r\n  )\r\n}\r\n\r\nexport default Events;","import React from 'react';\r\n\r\nconst NotificationContext = React.createContext({});\r\n\r\nexport default NotificationContext;","import { useContext } from 'react';\r\n\r\nimport './index.css';\r\n\r\nimport NotificationContext from '../../context/notificationContext';\r\n\r\nconst Notification = () => {\r\n  const { notification, handleNotification } = useContext(NotificationContext);\r\n\r\n  if(!notification.show){\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"notification-message\">\r\n      <p className=\"notification-message-text\">{notification.message}</p>\r\n      <div className=\"notification-message-buttons\">\r\n        <button onClick={()=>handleNotification(\"confirm\")} className=\"confirm\">CONFIRM</button>\r\n        <button onClick={()=>handleNotification(\"cancel\")} className=\"cancel\">CANCEL</button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification;","import { Link } from 'react-router-dom';\r\n\r\nimport './index.css';\r\nimport { DEFAULT_BOOK_URL } from '../../constants/common';\r\n\r\n\r\nconst BookCardLite = ({onClickRemoveBook, userId,bookId, imageUrl, title, author}) => {\r\n\r\n    return (\r\n        <div className=\"book-card-lite\">\r\n            <span className=\"book-card-lite-img\">\r\n                <img src={imageUrl ? imageUrl : DEFAULT_BOOK_URL} alt=\"Book_cover\" />\r\n            </span>\r\n            <div className=\"book-card-lite-content\">\r\n                <div className=\"book-card-lite-content-text\">\r\n                    <p> <span className=\"book-card-lite-content-heading\" >Title: </span>{title}</p>\r\n                    <p> <span className=\"book-card-lite-content-heading\"> Author: </span>{author}</p>\r\n                </div>\r\n                <div className=\"book-card-lite-content-actions\">\r\n                <Link className=\"details-link-lite\" to={`/books/${bookId}`}>VIEW</Link>\r\n                <span className='slash-span'>&#47;</span>\r\n                <Link className=\"delete-link-lite\" to={`/my-page/${userId}/book-remove/${bookId}`} onClick={onClickRemoveBook}>REMOVE</Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BookCardLite;","import { Link } from 'react-router-dom';\r\n\r\nimport './index.css';\r\nimport { DEFAULT_EVENT_URL } from '../../constants/common';\r\n\r\nconst EventCardLite = ({onClickSignoutEvent, eventId, imageUrl, name, date, status}) => {\r\n   \r\n    return (\r\n        <div className=\"event-card-lite\">\r\n            <span className=\"event-card-lite-img\">\r\n                <img src={imageUrl ? imageUrl :DEFAULT_EVENT_URL} alt=\"event_cover\" />\r\n            </span>\r\n            <div className=\"event-card-lite-content\">\r\n                <div className=\"event-card-lite-content-text\">\r\n                    <p><span className=\"event-card-lite-content-heading\">Status: </span>{status}</p>\r\n                    <p> <span className=\"event-card-lite-content-heading date\"> Date: </span>{date}</p>\r\n                    <p><span className=\"event-card-lite-content-heading\" >Topic: </span>{name}</p>\r\n                </div>\r\n                <div className=\"book-card-lite-content-actions\">\r\n                <Link className=\"details-link-lite\" to={`/events/${eventId}`}>VIEW</Link>\r\n                <span className='slash-span'>&#47;</span>\r\n                <Link className=\"delete-link-lite\" to={`/my-page/${eventId}/event-remove/${eventId}`} onClick={onClickSignoutEvent}>SIGNOUT</Link>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EventCardLite;","import { Link, useParams } from 'react-router-dom';\r\nimport { useState, useEffect, useContext } from \"react\";\r\n\r\nimport './index.css';\r\n\r\nimport authServices from '../../../services/user';\r\nimport AuthContext from \"../../../context/authContext\";\r\nimport { getMySubscriptions, unsignSubscription } from '../../../services/subscription';\r\n\r\nimport Title from \"../../../components/title\";\r\nimport Loader from '../../../components/loader';\r\nimport Notification from '../../../components/notification';\r\nimport BookCardLite from '../../../components/book-card-lite';\r\nimport EventCardLite from '../../../components/lite-event-card';\r\nimport NotificationContext from '../../../context/notificationContext';\r\n\r\nlet pagesReadingCounter = 1;\r\nlet pagesEventCounter = 1;\r\n\r\n\r\nconst MyPage = () => {\r\n\tconst { userId } = useParams();\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst { notification, showNotification } = useContext(NotificationContext);\r\n\r\n\tconst [update, setUpdate] = useState({ reading: false, events: false });\r\n\tconst [isLoading, setIsloading] = useState(false);\r\n\tconst [readingList, setReadingList] = useState({ all: [], view: [] });\r\n\tconst [eventList, setEventList] = useState({ all: [], view: [] });\r\n\tconst [totalPages, setTotalPages] = useState({ reading: 0, events: 0 });\r\n\tconst [readingListButtonsDisabled, setReadingListButtonsDisabled] = useState({ increase: true, decrease: true });\r\n\tconst [eventListButtonsDisabled, setEventListButtonsDisabled] = useState({ increase: true, decrease: true });\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchData = async () => {\r\n\r\n\t\t\tsetIsloading(true);\r\n\t\t\tconst fetchedReadingListData = await authServices.getUserReadingList(userId);\r\n\t\t\tconst fetchedEventListData = await getMySubscriptions(user.username);\r\n\t\t\tsetIsloading(false);\r\n\r\n\t\t\tconst readingPages = Math.ceil(fetchedReadingListData.length / 3);\r\n\t\t\tconst eventPages = Math.ceil(fetchedEventListData.length / 3);\r\n\r\n\t\t\tsetTotalPages({ reading: readingPages, events: eventPages });\r\n\r\n\t\t\tif (readingPages > 1) {\r\n\t\t\t\tsetReadingListButtonsDisabled({ increase: false, decrease: true });\r\n\t\t\t} else {\r\n\t\t\t\tsetReadingListButtonsDisabled({ increase: true, decrease: true });\r\n\t\t\t}\r\n\t\t\tpagesReadingCounter = 1;\r\n\r\n\t\t\tif (eventPages > 1) {\r\n\t\t\t\tsetEventListButtonsDisabled(prev => ({ ...prev, increase: false }));\r\n\t\t\t} else {\r\n\t\t\t\tsetEventListButtonsDisabled({ increase: true, decrease: true });\r\n\t\t\t}\r\n\t\t\tpagesEventCounter = 1;\r\n\r\n\t\t\tsetReadingList(prev => ({ all: fetchedReadingListData, view: fetchedReadingListData.slice(0, 3) }));\r\n\t\t\tsetEventList(prev => ({ all: fetchedEventListData, view: fetchedEventListData.slice(0, 3) }));\r\n\t\t}\r\n\t\tfetchData()\r\n\t}, [userId, update])\r\n\r\n\tconst increaseReadingCounter = () => {\r\n\t\tpagesReadingCounter++;\r\n\t\tif (pagesReadingCounter >= totalPages.reading) {\r\n\t\t\tsetReadingListButtonsDisabled(prev => ({ increase: true, decrease: false }));\r\n\t\t} else {\r\n\t\t\tsetReadingListButtonsDisabled(prev => ({ increase: false, decrease: false }));\r\n\t\t}\r\n\t\tsetReadingList(prev => ({ ...prev, view: readingList.all.slice((pagesReadingCounter * 3) - 3, pagesReadingCounter * 3) }));\r\n\t}\r\n\r\n\tconst decreaseReadingCounter = () => {\r\n\t\tpagesReadingCounter--;\r\n\t\tif (pagesReadingCounter === 1) {\r\n\t\t\tsetReadingListButtonsDisabled(prev => ({ increase: false, decrease: true }));\r\n\t\t} else {\r\n\t\t\tsetReadingListButtonsDisabled(prev => ({ increase: false, decrease: false }));\r\n\t\t}\r\n\t\tsetReadingList(prev => ({ ...prev, view: readingList.all.slice((pagesReadingCounter * 3) - 3, pagesReadingCounter * 3) }));\r\n\t}\r\n\r\n\tconst increaseEventCounter = () => {\r\n\t\tpagesEventCounter++;\r\n\t\tif (pagesEventCounter >= totalPages.events) {\r\n\t\t\tsetEventListButtonsDisabled(prev => ({ increase: true, decrease: false }));\r\n\t\t} else {\r\n\t\t\tsetEventListButtonsDisabled(prev => ({ increase: false, decrease: false }));\r\n\t\t}\r\n\t\tsetEventList(prev => ({ ...prev, view: eventList.all.slice((pagesEventCounter * 3) - 3, pagesEventCounter * 3) }));\r\n\t}\r\n\r\n\tconst decreaseEventCounter = () => {\r\n\t\tpagesEventCounter--;\r\n\t\tif (pagesEventCounter === 1) {\r\n\t\t\tsetEventListButtonsDisabled(prev => ({ increase: false, decrease: true }));\r\n\t\t} else {\r\n\t\t\tsetEventListButtonsDisabled(prev => ({ increase: false, decrease: false }));\r\n\t\t}\r\n\t\tsetEventList(prev => ({ ...prev, view: eventList.all.slice((pagesEventCounter * 3) - 3, pagesEventCounter * 3) }));\r\n\t}\r\n\r\n\tconst onClickRemoveBook = async (e, id) => {\r\n\t\te.preventDefault();\r\n\t\tshowNotification(\"You are above to remove this book from your reading list!\", id);\r\n\t}\r\n\r\n\tconst onClickRemoveEvent = async (e, subscriptionId) => {\r\n\t\te.preventDefault();\r\n\t\tshowNotification(\"You are above to remove this event from your event list!\", subscriptionId);\r\n\t}\r\n\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tif (notification.message.includes('book') && notification.result === \"confirm\") {\r\n\t\t\tauthServices.removeBookFromUserReadingList(userId, notification.objectId)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tsetUpdate(prev => ({ reading: res, events: false }));\r\n\t\t\t\t})\r\n\t\t}\r\n\t\tif (notification.message.includes('event') && notification.result === \"confirm\") {\r\n\t\t\tunsignSubscription(user.username, notification.objectId)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tsetUpdate(prev => ({ reading: false, events: res }));\r\n\t\t\t\t})\r\n\t\t}\r\n\r\n\t}, [notification.result])\r\n\r\n\r\n\tif (isLoading) {\r\n\t\treturn (\r\n\t\t\t<Loader />\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Notification />\r\n\t\t\t<Title title={user.username.toLocaleUpperCase() + ' \\'s page'} />\r\n\t\t\t<div className=\"my-page-container\">\r\n\r\n\t\t\t\t<div className=\"my-page-navigation\">\r\n\t\t\t\t\t<Link className=\"create-book-link\" to=\"/books/create\"><i className=\"fas fa-plus\"></i>POST NEW BOOK</Link>\r\n\t\t\t\t\t<Link className=\"create-event-link\" to=\"/events/create\"><i className=\"fas fa-plus\"></i>POST NEW EVENT</Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"my-page-events-list\">\r\n\t\t\t\t\t<h3 className=\"my-page-events-list-title\">MY EVENT SCHEDULE</h3>\r\n\t\t\t\t\t{eventList.view.length > 0\r\n\t\t\t\t\t\t? <>\r\n\t\t\t\t\t\t\t<div className=\"my-page-events-list-items-container\">\r\n\t\t\t\t\t\t\t\t<button className=\"prev\" disabled={eventListButtonsDisabled.decrease} onClick={decreaseEventCounter}>&#10094;</button>\r\n\t\t\t\t\t\t\t\t<div className=\"my-page-events-list-items\">\r\n\t\t\t\t\t\t\t\t\t{eventList.view.map(x => <EventCardLite onClickSignoutEvent={(e) => onClickRemoveEvent(e, x.subscriptionId)} key={x.subscriptionId} eventId={x.eventId} imageUrl={x.imageUrl} date={x.date} name={x.name} status={x.status} />)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button className=\"next\" disabled={eventListButtonsDisabled.increase} onClick={increaseEventCounter}>&#10095;</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<p>{pagesEventCounter}/{totalPages.events}</p>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t: <p className=\"empty-events-list\">You have not added anything to your event list yet.</p>\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"my-page-reading-list\">\r\n\t\t\t\t\t<h3 className=\"my-page-reading-list-title\">MY READING LIST</h3>\r\n\t\t\t\t\t{readingList.view.length > 0\r\n\t\t\t\t\t\t? <>\r\n\t\t\t\t\t\t\t<div className=\"my-page-reading-list-items-container\">\r\n\t\t\t\t\t\t\t\t<button className=\"prev\" disabled={readingListButtonsDisabled.decrease} onClick={decreaseReadingCounter}>&#10094;</button>\r\n\t\t\t\t\t\t\t\t<div className=\"my-page-reading-list-items\">\r\n\t\t\t\t\t\t\t\t\t{readingList.view.map(x => <BookCardLite onClickRemoveBook={(e) => onClickRemoveBook(e, x.id)} key={x.id} userId={userId} bookId={x.id} imageUrl={x.imageUrl} title={x.title} author={x.author} />)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<button className=\"next\" disabled={readingListButtonsDisabled.increase} onClick={increaseReadingCounter}>&#10095;</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<p>{pagesReadingCounter}/{totalPages.reading}</p>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t: <p className=\"empty-reading-list\">You have not added anything to your reading list yet.</p>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default MyPage;","import { useContext, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport './index.css'\r\n\r\nimport useAuthForm from \"../../../hooks/useAuthForm\";\r\nimport AuthContext from \"../../../context/authContext\";\r\n\r\nimport Title from \"../../../components/title\";\r\nimport Loader from \"../../../components/loader\";\r\nimport ValidationError from \"../../../components/validation-error\";\r\n\r\n\r\nconst Register = () => {\r\n\r\n\tconst navigate = useNavigate();\r\n\tconst {login } = useContext(AuthContext);\r\n\r\n\tconst {\r\n\t\tformValue,\r\n        authValue,\r\n        isLoading,\r\n        validationError,\r\n        isSuccess,\r\n        onChangeInputHandler,\r\n        onSubmitUserRegisterHandler,\r\n\t} = useAuthForm();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isSuccess) {\r\n\t\t\tlogin(authValue);\r\n\t\t\tnavigate(\"/home\", { replace: true });\r\n\t\t}\r\n\t},[isSuccess])\r\n\r\n\tif (isLoading) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Loader />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Title title=\"Register\" />\r\n\t\t\t<div className=\"signup-section-wrapper\">\r\n\t\t\t\t<div className=\"signup-section\">\r\n\t\t\t\t\t<div className=\"signup-section-info\">\r\n\t\t\t\t\t\t<h2>Welcome </h2>\r\n\t\t\t\t\t\t<i className=\"fas fa-users\"></i>\r\n\t\t\t\t\t\t<h2>to our community.</h2>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<form action=\"#\" method=\"POST\" className=\"signup-form\" onSubmit={onSubmitUserRegisterHandler}>\r\n\t\t\t\t\t\t<ul className=\"no-bullet\">\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"username\"></label>\r\n\t\t\t\t\t\t\t\t<input type=\"text\" className=\"input-fields\" id=\"username\" name=\"username\" placeholder=\"Username\" defaultValue={formValue.username} onChange={onChangeInputHandler} />\r\n\t\t\t\t\t\t\t\t{validationError.username && <ValidationError message={validationError.username} />}\r\n\t\t\t\t\t\t\t\t{validationError.exists && <ValidationError message={validationError.exists} />}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"password\"></label>\r\n\t\t\t\t\t\t\t\t<input type=\"password\" className=\"input-fields\" id=\"password\" name=\"password\" placeholder=\"Password\" defaultValue={formValue.password} onChange={onChangeInputHandler} />\r\n\t\t\t\t\t\t\t\t{validationError.password && <ValidationError message={validationError.password} />}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li>\r\n\t\t\t\t\t\t\t\t<label htmlFor=\"rePass\"></label>\r\n\t\t\t\t\t\t\t\t<input type=\"password\" className=\"input-fields\" id=\"rePass\" name=\"rePass\" placeholder=\"Repeat password\" defaultValue={formValue.rePass} onChange={onChangeInputHandler} />\r\n\t\t\t\t\t\t\t\t{validationError.rePass && <ValidationError message={validationError.rePass} />}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li >\r\n\t\t\t\t\t\t\t\t<input type=\"submit\" className=\"join-btn\" name=\"join\" alt=\"Join\" value=\"Join\" />\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Register;","import { storageKeys } from \"../constants/keys\";\r\n\r\nconst uploadImage = async (data) => {\r\n    const apiUrl = storageKeys.API_URL;\r\n\r\n    const file = new FormData();\r\n    file.append('file', data);\r\n    file.append(\"upload_preset\", \"ReadAloud\");\r\n\r\n    const res = await fetch(apiUrl, { method: \"POST\", body: file });\r\n\r\n    const result = await res.json();\r\n    return result.secure_url;\r\n}\r\n\r\nexport default uploadImage;","import { useState, useCallback } from 'react';\r\n\r\nimport { DEFAULT_BOOK_CATEGORIES, DEFAULT_BOOK_URL, INITIAL_BOOK_VALIDATION_ERROR, INITIAL_BOOK_VALUE } from '../constants/common';\r\n\r\nimport uploadImage from '../services/image';\r\nimport { bookDataValidation } from '../utils/validation';\r\nimport { createBook, editBook, getBookById } from '../services/book';\r\n\r\n\r\nconst useBookForm = (user, categories) => {\r\n    const [isLoading, setIsloading] = useState(false);\r\n    const [isImageLoading, setIsImageloading] = useState(false);\r\n    const [isSuccess, setIsSuccess] = useState(false);\r\n    const [bookValue, setBookValue] = useState(INITIAL_BOOK_VALUE);\r\n    const [notCreator, setNotCreator] = useState(false);\r\n    const [validationError, setValidationError] = useState(INITIAL_BOOK_VALIDATION_ERROR);\r\n    const [imagePreview, setImagePreview] = useState(DEFAULT_BOOK_URL);\r\n\r\n    const onSubmitBookCreateHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (validationError.required) {\r\n            setValidationError(prev => ({ ...prev, \"required\": null }))\r\n        }\r\n        const data = new FormData(e.target)\r\n        const book = {\r\n            title: data.get('title'),\r\n            author: data.get('author'),\r\n            description: data.get('description'),\r\n            image: imagePreview\r\n        }\r\n\r\n        if (book.title === '' || book.description === '' || book.author === '') {\r\n            setValidationError(prev => ({ ...prev, 'required': '*Title, author and description are required.' }))\r\n            return;\r\n        }\r\n        \r\n        if (validationError.title || validationError.description\r\n            || validationError.image || validationError.author) {\r\n            return;\r\n        }\r\n        \r\n        const selectedCategories = DEFAULT_BOOK_CATEGORIES.reduce((a, x) => {\r\n            if (data.get(x)) {\r\n                a.push(x)\r\n            }\r\n            return a;\r\n        }, []);\r\n        book.category=selectedCategories;\r\n        createBook(book)\r\n            .then(res => {\r\n                setIsloading(true);\r\n                setBookValue(prev => ({ ...prev, res }));\r\n                setIsSuccess(true);\r\n            })\r\n            .catch(err => console.log(err));\r\n\r\n        bookFormReset();\r\n    }\r\n\r\n    const onSubmitBookEditHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (validationError.required) {\r\n            setValidationError(prev => ({ ...prev, \"required\": null }))\r\n        }\r\n        const data = new FormData(e.target)\r\n        const book = {\r\n            title: data.get('title'),\r\n            author: data.get('author'),\r\n            description: data.get('description'),\r\n            category: categories,\r\n            image: imagePreview\r\n        }\r\n\r\n        if (book.title === '' || book.description === '' || book.author === '') {\r\n            setValidationError(prev => ({ ...prev, 'required': '*Title, author and description are required.' }))\r\n            return;\r\n        }\r\n        \r\n        if (validationError.title || validationError.description\r\n            || validationError.image || validationError.author) {\r\n            return;\r\n        }\r\n\r\n        editBook(bookValue.id, book)\r\n            .then(res => {\r\n                setIsloading(true);\r\n                setBookValue(prev => ({ ...prev, res }));\r\n                setIsSuccess(true);\r\n            })\r\n            .catch(err => console.log(err))\r\n\r\n        bookFormReset();\r\n    }\r\n\r\n    const onBlurInputHandler = (e) => {\r\n        const value = e.target.value;\r\n        const type = e.target.name;\r\n\r\n        if (validationError.required) {\r\n            setValidationError(prev => ({ ...prev, \"required\": null }))\r\n        }\r\n\r\n        const error = bookDataValidation(type, value);\r\n        setValidationError(prev => ({ ...prev, [type]: error }))\r\n        if (error) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    const onChangeInputHandler = (e) => {\r\n        const value = e.target.value;\r\n        const type = e.target.name;\r\n\r\n        if (validationError.required) {\r\n            setValidationError(prev => ({ ...prev, \"required\": null }))\r\n        }\r\n\r\n        const error = bookDataValidation(type, value);\r\n        setValidationError(prev => ({ ...prev, [type]: error }))\r\n        if (error) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    const onChangeImageHandler = (e) => {\r\n        const value = e.target.files[0];\r\n\r\n        const error = bookDataValidation('imageUrl', (value || ''));\r\n        setValidationError(prev => ({ ...prev, 'image': error }))\r\n        if (error) {\r\n            return;\r\n        }\r\n        if (!value) {\r\n            setImagePreview(DEFAULT_BOOK_URL);\r\n        } else {\r\n            setIsImageloading(true);\r\n            uploadImage(value)\r\n                .then(url => {\r\n                    setIsImageloading(false);\r\n                    setImagePreview(url);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                })\r\n        }\r\n    }\r\n\r\n    const setInitialBookEditValue = useCallback((bookId) => {\r\n        setIsloading(true);\r\n        getBookById(bookId)\r\n            .then(res => {\r\n                setBookValue(res);\r\n                setImagePreview(res.imageUrl)\r\n                setIsloading(false);\r\n                if (res.creator !== user.username) {\r\n                    setNotCreator(true);\r\n                }\r\n            })\r\n            .catch(err => console.log(err))\r\n    }, [])\r\n\r\n    const bookFormReset = () => {\r\n        setValidationError(INITIAL_BOOK_VALIDATION_ERROR);\r\n        setIsloading(false);\r\n        setIsSuccess(false);\r\n        setBookValue(INITIAL_BOOK_VALUE);\r\n        setImagePreview(DEFAULT_BOOK_URL);\r\n    }\r\n\r\n    return {\r\n        bookValue,\r\n        notCreator,\r\n        isLoading,\r\n        isImageLoading,\r\n        isSuccess,\r\n        validationError,\r\n        imagePreview,\r\n        onChangeImageHandler,\r\n        onBlurInputHandler,\r\n        onChangeInputHandler,\r\n        onSubmitBookCreateHandler,\r\n        setInitialBookEditValue,\r\n        onSubmitBookEditHandler,\r\n    }\r\n}\r\n\r\nexport default useBookForm;","import './index.css';\r\nimport { DEFAULT_BOOK_CATEGORIES } from '../../constants/common';\r\n\r\nconst Category = ({ selectedCategories }) => {\r\n    const categories = DEFAULT_BOOK_CATEGORIES;\r\n\r\n    const onChangeSelectedHandler = (e) => {\r\n        const index=selectedCategories.indexOf(e.target.name)\r\n        if (index===-1) {\r\n            selectedCategories.push(e.target.name)\r\n        }else{\r\n            selectedCategories.splice(index,1);\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"category-container\">\r\n            {categories.map((x, i) => (\r\n                <label key={x} className=\"checkbox-label\" >{x}\r\n                    <input className=\"category-input\" type=\"checkbox\" id={i} name={x}  onChange={onChangeSelectedHandler} />\r\n                    <span className=\"checkmark\"></span>\r\n                </label>\r\n            ))}\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default Category;","import { useEffect, useContext } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\n\r\nimport './index.css';\r\n\r\nimport useBookForm from \"../../../hooks/useBookForm\";\r\nimport AuthContext from \"../../../context/authContext\";\r\n\r\nimport Loader from \"../../../components/loader\";\r\nimport Category from \"../../../components/category\";\r\nimport ValidationError from \"../../../components/validation-error\";\r\n\r\n\r\nconst BookEdit = () => {\r\n\tconst navigate = useNavigate();\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst { bookId } = useParams();\r\n\r\n\tconst categories = [];\r\n\r\n\tconst {\r\n\t\tbookValue: book,\r\n\t\tnotCreator,\r\n\t\tisLoading,\r\n\t\tisImageLoading,\r\n\t\tisSuccess,\r\n\t\tvalidationError,\r\n\t\timagePreview,\r\n\t\tonChangeImageHandler,\r\n\t\tonChangeInputHandler,\r\n\t\tonSubmitBookEditHandler,\r\n\t\tsetInitialBookEditValue,\r\n\t} = useBookForm(user,categories);\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (isSuccess) {\r\n\t\t\tnavigate('/books');\r\n\t\t}\r\n\t}, [isSuccess, navigate])\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetInitialBookEditValue(bookId);\r\n\t}, [bookId])\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif(notCreator){\r\n\t\t\tnavigate('/home');\r\n\t\t}\r\n\t}, [notCreator,navigate])\r\n\t\r\n\tif (isLoading) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Loader />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"book-form-container\">\r\n\t\t\t\t<div className=\"book-form-title\">\r\n\t\t\t\t\t<h3><i className=\"fa fa-arrow-right\"></i>Edit book</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<form className=\"book-form-body\" onSubmit={onSubmitBookEditHandler}>\r\n\t\t\t\t\t<div className=\"book-form-body-main\">\r\n\t\t\t\t\t\t<div className=\"title\">\r\n\t\t\t\t\t\t\t<input className=\"title-input\" type=\"text\" name=\"title\" id=\"title\" defaultValue={book.title} onChange={onChangeInputHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"title\"><i className=\"fa fa-pen\"></i>Title</label>\r\n\t\t\t\t\t\t\t{validationError.title && <ValidationError message={validationError.title} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"author\">\r\n\t\t\t\t\t\t\t<input className=\"author-input\" type=\"text\" name=\"author\" id=\"author\" defaultValue={book.author} onChange={onChangeInputHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"title\"><i className=\"fa fa-pen\"></i>Author</label>\r\n\t\t\t\t\t\t\t{validationError.author && <ValidationError message={validationError.author} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"default-image\">\r\n\t\t\t\t\t\t\t{isImageLoading ? <Loader /> : <img src={imagePreview} alt=\"Book_Image\" />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"image\">\r\n\t\t\t\t\t\t\t<input className=\"image-input\" type=\"file\" accept=\"image/*\" lang=\"en\" name=\"imageUrl\" id=\"imageUrl\" onChange={onChangeImageHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"image\"><i className=\"fas fa-image\"></i>Image</label>\r\n\t\t\t\t\t\t\t{validationError.image && <ValidationError message={validationError.image} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"book-form-body-details\">\r\n\t\t\t\t\t\t<div className=\"description\">\r\n\t\t\t\t\t\t\t<textarea className=\"description-input\" type=\"text\" name=\"description\" id=\"description\" cols=\"50\" rows=\"12\" defaultValue={book.description} onChange={onChangeInputHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"description\"><i className=\"fa fa-pen\"></i>Description</label>\r\n\t\t\t\t\t\t\t{validationError.description && <ValidationError message={validationError.description} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<Category selectedCategories={categories} />\r\n\t\t\t\t\t\t<p className=\"book-form-body-details-remark\">*The categories you choose will replace previous.</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"book-form-footer\">\r\n\t\t\t\t\t\t<div className=\"recommend\">\r\n\t\t\t\t\t\t\t<p>Recommended by</p>\r\n\t\t\t\t\t\t\t<h3>{user.username}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"action\">\r\n\t\t\t\t\t\t\t<button className=\"action-btn\" type=\"submit\">Edit book</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{validationError.required && <ValidationError message={validationError.required} />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default BookEdit;","import { useState, useCallback } from 'react';\r\n\r\nimport { DEFAULT_EVENT_URL, INITIAL_EVENT_VALUE, INITIAL_EVENT_VALIDATION_ERROR, DEFAULT_LAG_LTD } from '../constants/common';\r\n\r\nimport uploadImage from '../services/image';\r\nimport { eventDataValidation } from '../utils/validation';\r\nimport { cancelEvent, createEvent, editEvent, getEventById } from '../services/event';\r\n\r\n\r\nconst useEventForm = (user) => {\r\n    const [isLoading, setIsloading] = useState(false);\r\n    const [isImageLoading, setIsImageloading] = useState(false);\r\n    const [isSuccess, setIsSuccess] = useState(false);\r\n    const [point, setPoint] = useState(DEFAULT_LAG_LTD);\r\n    const [eventValue, setEventValue] = useState(INITIAL_EVENT_VALUE);\r\n    const[notCreator,setNotCreator]=useState(false);\r\n    const [validationError, setValidationError] = useState(INITIAL_EVENT_VALIDATION_ERROR);\r\n    const [imagePreview, setImagePreview] = useState(DEFAULT_EVENT_URL);\r\n\r\n    const getGeoPoint = (point) => {\r\n        setPoint(point);\r\n    }\r\n\r\n    const onSubmitEventCreateHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (validationError.required) {\r\n            setValidationError(prev => ({ ...prev, \"required\": null }))\r\n        }\r\n\r\n        const data = new FormData(e.target);\r\n        const event = dataParser(data);\r\n        event.image = imagePreview;\r\n        event.status = 'active';\r\n        event.location = point;\r\n\r\n        const dateError = eventDataValidation('date', event.date,data.get('month'));\r\n        setValidationError(prev => ({ ...prev, 'date': dateError }));\r\n       \r\n        \r\n        if (event.name === '' || event.description === ''\r\n        || JSON.stringify(event.location) === JSON.stringify(DEFAULT_LAG_LTD)) {\r\n            setValidationError(prev => ({ ...prev, 'required': '*Topic, description, date and location are required.' }))\r\n            return;\r\n        }\r\n        \r\n        if (validationError.name || validationError.description\r\n            || validationError.image || dateError) {\r\n            return;\r\n        }\r\n        createEvent(event)\r\n            .then(res => {\r\n                setIsloading(true);\r\n                setEventValue(prev => ({ ...prev, res }));\r\n                setIsSuccess(true);\r\n            })\r\n            .catch(err => console.log(err))\r\n\r\n        eventFormReset();\r\n    }\r\n\r\n    const onSubmitEventEditHandler = (e) => {\r\n        e.preventDefault();\r\n\r\n        if (validationError.required) {\r\n            setValidationError(prev => ({ ...prev, \"required\": null }))\r\n        }\r\n\r\n        const data = new FormData(e.target);\r\n        const event = dataParser(data);\r\n        event.image = imagePreview;\r\n        event.location = point;\r\n\r\n        const dateError = eventDataValidation('date', event.date,data.get('month'));\r\n        setValidationError(prev => ({ ...prev, 'date': dateError }));\r\n\r\n        \r\n        if (event.name === '' || event.description === '') {\r\n            setValidationError(prev => ({ ...prev, 'required': '*Topic, description, date and location are required.' }))\r\n            return;\r\n        }\r\n        \r\n        if (validationError.name || validationError.description\r\n            || validationError.image || dateError) {\r\n            return;\r\n        }\r\n\r\n        editEvent(eventValue.id, event)\r\n            .then(res => {\r\n                setIsloading(true);\r\n               \r\n                setEventValue(prev => ({ ...prev, res }));\r\n                setIsSuccess(true);\r\n            })\r\n            .catch(err => console.log(err))\r\n\r\n        eventFormReset();\r\n    }\r\n\r\n    const onBlurInputHandler = (e) => {\r\n        const value = e.target.value;\r\n        const type = e.target.name;\r\n\r\n        if (validationError.required) {\r\n            setValidationError(prev => ({ ...prev, \"required\": null }))\r\n        }\r\n\r\n        const error = eventDataValidation(type, value);\r\n        setValidationError(prev => ({ ...prev, [type]: error }))\r\n        if (error) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    const onChangeInputHandler = (e) => {\r\n        const value = e.target.value;\r\n        const type = e.target.name;\r\n\r\n        if (validationError.required) {\r\n            setValidationError(prev => ({ ...prev, \"required\": null }))\r\n        }\r\n\r\n        const error = eventDataValidation(type, value);\r\n        setValidationError(prev => ({ ...prev, [type]: error }))\r\n        if (error) {\r\n            return;\r\n        }\r\n    }\r\n\r\n    const onChangeImageHandler = (e) => {\r\n        const value = e.target.files[0];\r\n\r\n        const error = eventDataValidation('imageUrl', (value || ''));\r\n        setValidationError(prev => ({ ...prev, 'image': error }))\r\n        if (error) {\r\n            return;\r\n        }\r\n        if (!value) {\r\n            setImagePreview(DEFAULT_EVENT_URL);\r\n        } else {\r\n            setIsImageloading(true);\r\n            uploadImage(value)\r\n                .then(url => {\r\n                    setIsImageloading(false);\r\n                    setImagePreview(url);\r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                })\r\n        }\r\n    }\r\n\r\n    const setInitialEventEditValue = useCallback((eventId) => {\r\n        setIsloading(true);\r\n        getEventById(eventId)\r\n            .then(res => {\r\n                setEventValue(res);\r\n                setPoint(res.location)\r\n                setImagePreview(res.imageUrl);\r\n                setIsloading(false);\r\n                if(res.creator!==user.username){\r\n                    setNotCreator(true);\r\n                }\r\n            })\r\n            .catch(err => console.log(err))\r\n    }, [])\r\n\r\n    const onClickCancelEventHandler = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tawait cancelEvent(eventValue.id);\r\n        setEventValue(prev => ({ ...prev, status:'cancelled' }));\r\n        setIsSuccess(true);\r\n\t}\r\n\r\n    const eventFormReset = () => {\r\n        setValidationError(INITIAL_EVENT_VALIDATION_ERROR);\r\n        setIsloading(false);\r\n        setIsSuccess(false);\r\n        setPoint(DEFAULT_LAG_LTD);\r\n        setEventValue(INITIAL_EVENT_VALUE);\r\n        setImagePreview(DEFAULT_EVENT_URL);\r\n    }\r\n\r\n    return {\r\n        eventValue,\r\n        notCreator,\r\n        isLoading,\r\n        isImageLoading,\r\n        isSuccess,\r\n        validationError,\r\n        imagePreview,\r\n        getGeoPoint,\r\n        onChangeImageHandler,\r\n        onBlurInputHandler,\r\n        onChangeInputHandler,\r\n        onSubmitEventCreateHandler,\r\n        setInitialEventEditValue,\r\n        onSubmitEventEditHandler,\r\n        onClickCancelEventHandler,\r\n        eventFormReset\r\n    }\r\n}\r\n\r\nexport default useEventForm;\r\n\r\nconst dataParser = (data) => {\r\n    const year = data.get('year');\r\n    const month = Number(data.get('month')) - 1;\r\n    const day = data.get('day');\r\n    const hour = data.get('hour');\r\n    const minute = data.get('minute');\r\n    const date = new Date(year, month, day, hour, minute, 0);\r\n    const event = {\r\n        name: data.get('name'),\r\n        location: data.get('location'),\r\n        description: data.get('description'),\r\n        date: date,\r\n        status: data.get('status') || 'active'\r\n    }\r\n    return event;\r\n}","import { useState } from 'react';\r\nimport { MapContainer, Marker, Popup, TileLayer, useMapEvent } from 'react-leaflet';\r\n\r\nimport './index.css';\r\nimport { DEFAULT_LAG_LTD, DEFAULT_MAP_CENTER, DEFAULT_MAP_CENTER_CITY } from '../../constants/common';\r\n\r\n\r\nconst MapComponent = ({ getGeoPoint }) => {\r\n  const [point, setPoint] = useState(DEFAULT_LAG_LTD);\r\n\r\n  useMapEvent('click', (e) => {\r\n    if (!getGeoPoint) {\r\n      return null;\r\n    }\r\n    const data = [e.latlng.lat, e.latlng.lng];\r\n    getGeoPoint(data);\r\n    setPoint(data);\r\n  })\r\n  return (\r\n    <Marker position={point} >\r\n      <Popup>\r\n        New Location <br />{point[0].toString().slice(0, 7)}, {point[1].toString().slice(0, 7)}\r\n      </Popup>\r\n    </Marker>\r\n  )\r\n}\r\n\r\n\r\nconst MapEvent = ({ getGeoPoint, center, message }) => {\r\n  return (\r\n    <div className=\"map-event\">\r\n      <MapContainer center={center || DEFAULT_MAP_CENTER} zoom={8} scrollWheelZoom={false}>\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        <Marker position={center || DEFAULT_MAP_CENTER}>\r\n          <Popup>\r\n            {message && center\r\n              ? <span> {message} <br /> {center[0].toString().slice(0, 7)}, {center[1].toString().slice(0, 7)} </span>\r\n              : DEFAULT_MAP_CENTER_CITY\r\n            }\r\n          </Popup>\r\n        </Marker>\r\n        <MapComponent getGeoPoint={getGeoPoint} />\r\n      </MapContainer>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MapEvent;\r\n","import { useEffect, useContext } from \"react\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\n\r\nimport './index.css';\r\n\r\nimport AuthContext from \"../../../context/authContext\";\r\nimport useEventForm from \"../../../hooks/useEventForm\";\r\n\r\nimport Loader from \"../../../components/loader\";\r\nimport MapEvent from \"../../../components/map-event\";\r\nimport ValidationError from \"../../../components/validation-error\";\r\n\r\nconst EventEdit = () => {\r\n\tconst navigate = useNavigate();\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst { eventId } = useParams();\r\n\r\n\tconst {\r\n\t\teventValue: event,\r\n\t\tnotCreator,\r\n\t\tisLoading,\r\n\t\tisImageLoading,\r\n\t\tvalidationError,\r\n\t\timagePreview,\r\n\t\tisSuccess,\r\n\t\tgetGeoPoint,\r\n\t\tonChangeImageHandler,\r\n\t\tonChangeInputHandler,\r\n\t\tonSubmitEventEditHandler,\r\n\t\tsetInitialEventEditValue,\r\n\t\tonClickCancelEventHandler,\r\n\t} = useEventForm(user);\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (isSuccess) {\r\n\t\t\tnavigate('/events');\r\n\t\t}\r\n\t}, [isSuccess, navigate])\r\n\t\r\n\t\r\n\tuseEffect(() => {\r\n\t\tsetInitialEventEditValue(eventId);\r\n\t}, [eventId])\r\n\r\n\tuseEffect(() => {\r\n\t\tif(notCreator){\r\n\t\t\tnavigate('/home');\r\n\t\t}\r\n\t}, [notCreator,navigate])\r\n\t\r\n\r\n\tif (isLoading) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Loader />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"event-form-container\">\r\n\t\t\t\t<div className=\"event-form-title\">\r\n\t\t\t\t\t<h3><i className=\"fa fa-arrow-right\"></i>Edit event</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<form className=\"event-form-body\" onSubmit={onSubmitEventEditHandler}>\r\n\t\t\t\t\t<div className=\"event-form-body-main\">\r\n\t\t\t\t\t\t<div className=\"event-name\">\r\n\t\t\t\t\t\t\t<input className=\"event-name-input\" type=\"text\" name=\"name\" id=\"name\" defaultValue={event.name} onChange={onChangeInputHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"name\"><i className=\"fa fa-pen\"></i>Topic</label>\r\n\t\t\t\t\t\t\t{validationError.name && <ValidationError message={validationError.name} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"event-date edit\">\r\n\t\t\t\t\t\t\t<input className=\"event-date-input-box\" type=\"number\" name=\"year\" id=\"year\" min={2021} max={2050} placeholder=\"YYYY\" defaultValue={event.dateObj.year} />\r\n\t\t\t\t\t\t\t<input className=\"event-date-input-box\" type=\"number\" name=\"month\" id=\"month\" min={1} max={12} placeholder=\"MM\" defaultValue={event.dateObj.month} />\r\n\t\t\t\t\t\t\t<input className=\"event-date-input-box\" type=\"number\" name=\"day\" id=\"day\" min={1} max={31} placeholder=\"DD\" defaultValue={event.dateObj.day} />\r\n\t\t\t\t\t\t\t<input className=\"event-date-input-box\" type=\"number\" name=\"hour\" id=\"hour\" min={0} max={24} placeholder=\"HH\" defaultValue={event.dateObj.hour} />\r\n\t\t\t\t\t\t\t<input className=\"event-date-input-box\" type=\"number\" name=\"minute\" id=\"minute\" min={0} max={59} placeholder=\"MM\" defaultValue={event.dateObj.minute} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"date\"><i className=\"fa fa-pen\"></i>Date and time</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{validationError.date && <ValidationError message={validationError.date} />}\r\n\t\t\t\t\t\t<div className=\"event-status\">\r\n\t\t\t\t\t\t\t{event.status === 'active'\r\n\t\t\t\t\t\t\t\t? <span className=\"status-active\" ><i className=\"fas fa-chart-line\"></i>{event.status}</span>\r\n\t\t\t\t\t\t\t\t: <span className=\"status-cancelled\"><i className=\"fas fa-ban\"></i>{event.status}</span>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"event-default-image\">\r\n\t\t\t\t\t\t\t{isImageLoading ? <Loader /> : <img src={imagePreview} alt=\"Event_Image\" />}\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"event-image\">\r\n\t\t\t\t\t\t\t<input className=\"event-image-input\" type=\"file\" accept=\"image/*\" lang=\"en\" name=\"imageUrl\" id=\"imageUrl\" onChange={onChangeImageHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"image\"><i className=\"fas fa-image\"></i>Image</label>\r\n\t\t\t\t\t\t\t{validationError.image && <ValidationError message={validationError.image} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"event-form-body-details\">\r\n\t\t\t\t\t\t<div className=\"event-description\">\r\n\t\t\t\t\t\t\t<textarea className=\"event-description-input\" type=\"text\" name=\"description\" id=\"description\" cols=\"50\" rows=\"12\" defaultValue={event.description} onChange={onChangeInputHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"description\"><i className=\"fa fa-pen\"></i>Description</label>\r\n\t\t\t\t\t\t\t{validationError.description && <ValidationError message={validationError.description} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<MapEvent center={event.location} getGeoPoint={getGeoPoint} message={'Current location'} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"event-edit-form-footer\">\r\n\t\t\t\t\t\t<div className=\"event-actions cancel\">\r\n\t\t\t\t\t\t\t{event.status === 'active'\r\n\t\t\t\t\t\t\t\t? <div className=\"event-actions-icon\">\r\n\t\t\t\t\t\t\t\t\t<i className=\"far fa-calendar-check\"></i>\r\n\t\t\t\t\t\t\t\t\t<Link className=\"cancel-event-link\" to={`/events/${event.id}/cancel`} onClick={onClickCancelEventHandler} >CANCEL EVENT</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t: null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"recommend\">\r\n\t\t\t\t\t\t\t<p>Organised by</p>\r\n\t\t\t\t\t\t\t<h3>{user.username}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"event-action\">\r\n\t\t\t\t\t\t\t<button className=\"event-action-btn\" type=\"submit\">Edit event</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{validationError.required && <ValidationError message={validationError.required} />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default EventEdit;\r\n","import { useNavigate } from \"react-router-dom\";\r\nimport { useEffect, useContext } from \"react\";\r\n\r\nimport './index.css';\r\n\r\nimport useBookForm from \"../../../hooks/useBookForm\";\r\nimport AuthContext from \"../../../context/authContext\";\r\n\r\nimport Loader from \"../../../components/loader\";\r\nimport Category from \"../../../components/category\";\r\nimport ValidationError from \"../../../components/validation-error\";\r\n\r\n\r\nconst BookCreate = () => {\r\n\tconst navigate = useNavigate();\r\n\tconst { user } = useContext(AuthContext);\r\n\tconst categories = [];\r\n\t\r\n\tconst {\r\n\t\tisLoading,\r\n\t\tisImageLoading,\r\n\t\tisSuccess,\r\n\t\tvalidationError,\r\n\t\timagePreview,\r\n\t\tonChangeImageHandler,\r\n\t\tonBlurInputHandler,\r\n\t\tonSubmitBookCreateHandler\r\n\t} = useBookForm(user,categories);\r\n\t\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isSuccess) {\r\n\t\t\tnavigate('/books');\r\n\t\t}\r\n\t}, [isSuccess, navigate])\r\n\r\n\tif (isLoading) {\r\n\t\treturn (\r\n\t\t  <>\r\n\t\t\t<Loader />\r\n\t\t  </>\r\n\t\t)\r\n\t  }\r\n\t  \r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"book-form-container\">\r\n\t\t\t\t<div className=\"book-form-title\">\r\n\t\t\t\t\t<h3><i className=\"fa fa-arrow-right\"></i>New book</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<form className=\"book-form-body\" onSubmit={onSubmitBookCreateHandler}>\r\n\t\t\t\t\t<div className=\"book-form-body-main\">\r\n\t\t\t\t\t\t<div className=\"title\">\r\n\t\t\t\t\t\t\t<input className=\"title-input\" type=\"text\" name=\"title\" id=\"title\" onBlur={onBlurInputHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"title\"><i className=\"fa fa-pen\"></i>Title</label>\r\n\t\t\t\t\t\t\t{validationError.title && <ValidationError message={validationError.title} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"author\">\r\n\t\t\t\t\t\t\t<input className=\"author-input\" type=\"text\" name=\"author\" id=\"author\" onBlur={onBlurInputHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"title\"><i className=\"fa fa-pen\"></i>Author</label>\r\n\t\t\t\t\t\t\t{validationError.author &&  <ValidationError message={validationError.author} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"default-image\">\r\n\t\t\t\t\t\t\t{isImageLoading ? <Loader /> : <img src={imagePreview} alt=\"Book_Image\" />}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"image\">\r\n\t\t\t\t\t\t\t<input className=\"image-input\" type=\"file\" accept=\"image/*\" lang=\"en\" name=\"imageUrl\" id=\"imageUrl\" onChange={onChangeImageHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"image\"><i className=\"fas fa-image\"></i>Image</label>\r\n\t\t\t\t\t\t\t{validationError.image && <ValidationError message={validationError.image} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"book-form-body-details\">\r\n\t\t\t\t\t\t<div className=\"description\">\r\n\t\t\t\t\t\t\t<textarea className=\"description-input\" type=\"text\" name=\"description\" id=\"description\" cols=\"50\" rows=\"12\" onBlur={onBlurInputHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"description\"><i className=\"fa fa-pen\"></i>Description</label>\r\n\t\t\t\t\t\t\t{validationError.description && <ValidationError message={validationError.description} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<Category selectedCategories={categories} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"book-form-footer\">\r\n\t\t\t\t\t\t<div className=\"recommend\">\r\n\t\t\t\t\t\t\t<p>Recommended by</p>\r\n\t\t\t\t\t\t\t<h3>{user.username}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"action\">\r\n\t\t\t\t\t\t\t<button className=\"action-btn\" type=\"submit\">Add to books</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{validationError.required && <ValidationError message={validationError.required} />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default BookCreate;\r\n","const getNavigation = (isAuthenticated, user) => {\r\n\r\n  const authLinks = [\r\n    {\r\n      title: \"Books\",\r\n      link: \"/books\"\r\n    },\r\n    {\r\n      title: \"Events\",\r\n      link: \"/events\"\r\n    },\r\n    {\r\n      title: \"My Page\",\r\n      link: `/my-page/${isAuthenticated && user.userId}`\r\n    },\r\n    {\r\n      title: \"Logout\",\r\n      link: \"/logout\"\r\n    }\r\n  ]\r\n\r\n  const guestLinks = [\r\n    {\r\n      title: \"Books\",\r\n      link: \"/books\"\r\n    },\r\n    {\r\n      title: \"Events\",\r\n      link: \"/events\"\r\n    },\r\n    {\r\n      title: \"Register\",\r\n      link: \"/register\"\r\n    },\r\n    {\r\n      title: \"Login\",\r\n      link: \"/login\"\r\n    }\r\n  ]\r\n  return isAuthenticated ? authLinks : guestLinks;\r\n}\r\n\r\nexport default getNavigation;","import { Link } from 'react-router-dom';\r\n\r\nimport './index.css';\r\n\r\nconst NavLink = ({ title, href, type }) => {\r\n  return (\r\n    <div  className={`${type}-list-item`}>\r\n      <Link to={href} className={`${type}-link`}>\r\n        {title}\r\n      </Link>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default NavLink;\r\n","import { Link } from 'react-router-dom';\r\n\r\nimport './index.css';\r\n\r\nconst LogoLink = (props) => {\r\n  return (\r\n    <Link to=\"/home\"  >\r\n      {props.children}\r\n    </Link>\r\n  )\r\n}\r\n\r\nexport default LogoLink;","import { useContext, useEffect, useState } from 'react';\r\n\r\nimport './index.css';\r\n\r\nimport getNavigation from '../../utils/navigation';\r\nimport AuthContext from '../../context/authContext';\r\n\r\nimport Link from '../nav-link';\r\nimport LogoLink from '../logo-link';\r\n\r\nconst Header = () => {\r\n  const { user, isAuthenticated } = useContext(AuthContext);\r\n  const [links, setLinks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    setLinks(getNavigation(isAuthenticated, user))\r\n  }, [user, isAuthenticated])\r\n\r\n\r\n  const date = new Date().toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric' });\r\n\r\n  return (\r\n    <header className=\"header-wrapper\">\r\n      <div className=\"logo-container-header\">\r\n        <span className=\"logo-header\">\r\n          <LogoLink href=\"/home\" className=\"logo-link\">{<img alt=\"logo\" className=\"logo-img-header\" src=\"/read-aloud/logo.png\" />}</LogoLink>\r\n        </span>\r\n        <div className=\"text-header\">\r\n          <span className=\"read-aloud\">&gt;&gt;&gt; read aloud &lt;&lt;&lt;</span>\r\n          <span>{date}</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"links-container\">\r\n        {\r\n          links.map(x => {\r\n            return (\r\n              <Link\r\n                key={x.title}\r\n                href={x.link}\r\n                title={x.title}\r\n                type=\"header\"\r\n              />\r\n            )\r\n          })\r\n        }\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\nexport default Header;","import './index.css';\r\n\r\nimport LogoLink from '../logo-link';\r\n\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <footer className=\"footer-wrapper\">\r\n      <div className=\"logo-container-footer\" >\r\n        <span className=\"logo-footer\">\r\n          <LogoLink href=\"/home\">{<img alt=\"logo\" className=\"logo-img-footer\" src=\"/read-aloud/logo.png\" />}</LogoLink>\r\n        </span>\r\n        <span className=\"text-footer\">READ ALOUD &copy; 2021</span>\r\n      </div>\r\n      <p>Designed and created by nradkova</p>\r\n    </footer>\r\n  )\r\n}\r\nexport default Footer;","import { useState} from 'react';\r\n\r\nimport './index.css';\r\n\r\nconst onClickHandler = (e) => {\r\n  window.scrollTo({top: 0, behavior: \"smooth\"});\r\n};\r\n\r\nconst Scroller = () => {\r\n  const [visible, setVisible] = useState(false);\r\n  \r\n  const showScroller = () => {\r\n      const scrolled = window.scrollY;\r\n      if (scrolled > 150) {\r\n          setVisible(true);\r\n      } else if (scrolled <= 150) {\r\n          setVisible(false);\r\n      }\r\n  };\r\n\r\n    window.addEventListener('scroll', showScroller);\r\n  \r\n  return (\r\n    <button className=\"scroller-button\" style={{display:visible?'block':'none'}} onClick={onClickHandler}><i className=\"fas fa-arrow-up\"></i></button>\r\n  )\r\n}\r\n\r\nexport default Scroller;\r\n","import './index.css';\r\n\r\nimport Header from '../header';\r\nimport Footer from '../footer';\r\nimport Scroller from '../scroller';\r\n\r\n\r\nconst PageLayout = (props) => {\r\n  return (\r\n    <div className=\"page-wrapper\">\r\n      <Header />\r\n      <div className=\"page-wrapper-inner\">\r\n          {props.children}\r\n      </div>\r\n      <Scroller />\r\n      <Footer />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PageLayout;","import Parse from \"../config/server\";\r\n\r\nconst getAllCommentsByBookId = async function (bookId) {\r\n\tconst book = new Parse.Object('Book');\r\n\tbook.id = bookId;\r\n\r\n\tconst BookComment = Parse.Object.extend('BookComment');\r\n\tconst query = new Parse.Query(BookComment);\r\n\tquery.include('creator');\r\n\tquery.equalTo('book', book);\r\n\tquery.descending('createdAt');\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.reduce((a, x) => {\r\n\t\t\ta.push(viewModel(x))\r\n\t\t\treturn a\r\n\t\t}, [])\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching BookComment', error);\r\n\t}\r\n}\r\n\r\nconst getAllCommentsByEventId = async function (eventId) {\r\n\tconst event = new Parse.Object('Event');\r\n\tevent.id = eventId;\r\n\r\n\tconst EventComment = Parse.Object.extend('EventComment');\r\n\tconst query = new Parse.Query(EventComment);\r\n\tquery.include('creator');\r\n\tquery.equalTo('event', event);\r\n\tquery.descending('createdAt');\r\n\r\n\ttry {\r\n\t\tconst data = await query.find();\r\n\t\tconst results = data.reduce((a, x) => {\r\n\t\t\ta.push(viewModel(x))\r\n\t\t\treturn a\r\n\t\t}, [])\r\n\t\treturn results;\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while fetching EventComment', error);\r\n\t}\r\n}\r\n\r\nconst createBookComment = async (bookId, text) => {\r\n\tconst book = new Parse.Object('Book');\r\n\tbook.id = bookId;\r\n\r\n\tconst bookComment = new Parse.Object('BookComment');\r\n\tbookComment.set('text', text);\r\n\tbookComment.set('creator', Parse.User.current());\r\n\tbookComment.set('book', book);\r\n\r\n\ttry {\r\n\t\tawait bookComment.save();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while creating BookComment: ', error);\r\n\t}\r\n}\r\n\r\nconst createEventComment = async (eventId, text) => {\r\n\tconst event = new Parse.Object('Event');\r\n\tevent.id = eventId;\r\n\r\n\tconst eventComment =new Parse.Object('EventComment');\r\n\teventComment.set('text', text);\r\n\teventComment.set('creator', Parse.User.current());\r\n\teventComment.set('event', event);\r\n\r\n\ttry {\r\n\t\tawait eventComment.save();\r\n\t} catch (error) {\r\n\t\tconsole.error('Error while creating EventComment: ', error);\r\n\t}\r\n}\r\n\r\n\r\nconst viewModel = (record) => {\r\n\tconst creator = record.get('creator').get('username');\r\n\tconst date = new Date(record.createdAt)\r\n\t\t.toLocaleDateString(\"en-US\", { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', second: 'numeric', })\r\n\r\n\treturn {\r\n\t\tid: record.id,\r\n\t\tcreatedAt: date,\r\n\t\ttext: record.get('text'),\r\n\t\tcreator,\r\n\t}\r\n}\r\n\r\nexport {\r\n\tcreateBookComment,\r\n\tcreateEventComment,\r\n\tgetAllCommentsByBookId,\r\n\tgetAllCommentsByEventId\r\n}\r\n","import { useState,useEffect } from 'react';\r\n\r\n\r\nimport userService from '../services/user';\r\nimport { getBookById } from '../services/book';\r\nimport { commentDataValidation } from '../utils/validation';\r\nimport { createBookComment, getAllCommentsByBookId } from '../services/comment';\r\n\r\nconst initialBookValue={\r\n\tid: \"\",\r\n\ttitle: \"\",\r\n\tauthor: \"\",\r\n\tdescription: \"\",\r\n\timageUrl: \"\",\r\n\trating: 0,\r\n\tvoted: [],\r\n\tcreatedAt: \"\",\r\n\tcreator: \"\",\r\n\tcategory: []\r\n};\r\n\r\nconst useBook = (bookId,isAuthenticated, user) => {\r\n\tconst [book, setBook] = useState(initialBookValue);\r\n\tconst [isLoading, setIsloading] = useState(false);\r\n\tconst [canVote, setCanVote] = useState(false);\r\n\tconst [canAdd, setCanAdd] = useState(true);\r\n\tconst [comments, setComments] = useState([]);\r\n\tconst [validationError, setValidationError] = useState(null);\r\n    \r\n\tconst isCreator=isAuthenticated && user.username === book.creator;\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function fetchData() {\r\n\t\t\tsetIsloading(true);\r\n\t\t\tconst book = await getBookById(bookId);\r\n\t\t\tsetIsloading(false);\r\n\t\t\tsetBook(book);\r\n\t\t\tif (isAuthenticated && user.username !== book.creator && !book.voted.includes(user.userId)) {\r\n\t\t\t\tsetCanVote(true);\r\n\t\t\t}\r\n\t\t\tif (Boolean(user.username) && user.username !== book.creator) {\r\n\t\t\t\tconst canAdd = await userService.checkBookInUserReadingList(user.userId, bookId);\r\n\t\t\t\tsetCanAdd(canAdd);\r\n\t\t\t}\r\n\t\t\tconst comments = await getAllCommentsByBookId(bookId);\r\n\t\t\tsetComments(comments);\r\n\t\t}\r\n\t\tfetchData()\r\n\t}, [bookId, user,isAuthenticated])\r\n\r\n\r\n\tconst onClickAddBookHandler = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tawait userService.updateUserReadingList(user.userId, bookId);\r\n\t\tsetCanAdd(false);\r\n\t}\r\n\t\r\n\tconst onSubmitCommentHandler = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst text=e.target.comment.value;\r\n\t\tconst error=commentDataValidation(text)\r\n\t\tif(error){\r\n\t\t\tsetValidationError(error);\r\n\t\t\treturn;\r\n\t\t}\r\n        if(validationError){\r\n            setValidationError(null);\r\n        }\r\n\t\tawait createBookComment(bookId, text);\r\n\t\tconst updated = await getAllCommentsByBookId(bookId);\r\n\t\tsetComments(updated);\r\n\t\te.target.comment.value = '';\r\n\t}\r\n\r\n    return{\r\n        book,\r\n        isLoading,\r\n        isCreator,\r\n        canVote, \r\n        canAdd,\r\n        comments,\r\n        validationError,\r\n        onClickAddBookHandler,\r\n        onSubmitCommentHandler\r\n    }\r\n}\r\n\r\nexport default useBook;","import { useState } from 'react';\r\n\r\nimport './index.css';\r\n\r\nimport { rateBook } from '../../services/rating';\r\n\r\nconst Rating = ({userId,bookId}) => {\r\n    const [isDisabled, setIsDisabled] = useState(false);\r\n\r\n    const onSubmitRatingHandler = (e) => {\r\n        e.preventDefault();\r\n        const data = new FormData(e.target);\r\n\r\n        const stars = Array.from(data.values());\r\n        const value = stars.reduce((a, x) => {\r\n            if (Number(x) > a) {\r\n                a = Number(x);\r\n            }\r\n            return a;\r\n        }, 0)\r\n\r\n        rateBook(userId,bookId,value)\r\n        .then(()=>{\r\n            setIsDisabled(true)\r\n        })\r\n        .catch(err=>console.log(err))\r\n    }\r\n\r\n    return (\r\n        <div className=\"rating\">\r\n            <form action=\"\" onSubmit={onSubmitRatingHandler} className=\"rating-form\">\r\n                <div className=\"stars\">\r\n                    <input className=\"star star-5\" id=\"star-5\" type=\"checkbox\" name=\"5\" defaultValue=\"5\" disabled={isDisabled} />\r\n                    <label className=\"star star-5\" htmlFor=\"star-5\">&#9733;</label>\r\n                    <input className=\"star star-4\" id=\"star-4\" type=\"checkbox\" name=\"4\" defaultValue=\"4\" disabled={isDisabled}/>\r\n                    <label className=\"star star-4\" htmlFor=\"star-4\">&#9733;</label>\r\n                    <input className=\"star star-3\" id=\"star-3\" type=\"checkbox\" name=\"3\" defaultValue=\"3\" disabled={isDisabled}/>\r\n                    <label className=\"star star-3\" htmlFor=\"star-3\">&#9733;</label>\r\n                    <input className=\"star star-2\" id=\"star-2\" type=\"checkbox\" name=\"2\" defaultValue=\"2\" disabled={isDisabled}/>\r\n                    <label className=\"star star-2\" htmlFor=\"star-2\">&#9733;</label>\r\n                    <input className=\"star star-1\" id=\"star-1\" type=\"checkbox\" name=\"1\" defaultValue=\"1\" disabled={isDisabled}/>\r\n                    <label className=\"star star-1\" htmlFor=\"star-1\">&#9733;</label>\r\n                </div>\r\n                <button type=\"submit\" disabled={isDisabled} className=\"rating-btn\">click the stars</button>\r\n            </form>\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default Rating;","import './index.css';\r\n\r\nconst CustomComment = ({creator, text, createdAt }) => {\r\n\r\n    return (\r\n        <div className=\"comment-container\">\r\n            <div className=\"comment-author\">\r\n                <i className=\"fas fa-user-circle\"></i>\r\n                <span>{creator}</span>\r\n            </div>\r\n            <p className=\"comment-date\">{createdAt}</p>\r\n            <div className=\"comment-text\">\r\n                {text}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CustomComment;","import {useContext } from \"react\";\r\nimport { Link, useParams} from \"react-router-dom\";\r\n\r\nimport './index.css';\r\nimport { DEFAULT_BOOK_URL } from \"../../../constants/common\";\r\n\r\nimport useBook from \"../../../hooks/useBook\";\r\nimport AuthContext from \"../../../context/authContext\";\r\n\r\nimport Star from \"../../../components/star\";\r\nimport Loader from \"../../../components/loader\";\r\nimport Rating from \"../../../components/rating\";\r\nimport CustomComment from \"../../../components/comment\";\r\n\r\nconst BookDetails = () => {\r\n\tconst {isAuthenticated, user } = useContext(AuthContext);\r\n\tconst { bookId } = useParams();\r\n\r\n\tconst{\r\n        book,\r\n        isLoading,\r\n        isCreator,\r\n        canVote, \r\n        canAdd,\r\n        comments,\r\n        validationError,\r\n        onClickAddBookHandler,\r\n        onSubmitCommentHandler\r\n    }=useBook(bookId,isAuthenticated,user)\r\n\r\n\tconst actionsAllowed = () => {\r\n\t\tif (!isAuthenticated) {\r\n\t\t\treturn <Link className=\"join-link\" to={'/register'}>JOIN US</Link>;\r\n\t\t}\r\n\t\tif (isCreator) {\r\n\t\t\treturn <Link className=\"edit-link\" to={`/books/${book.id}/edit`}>EDIT BOOK</Link>;\r\n\t\t}\r\n\t\tif (canAdd) {\r\n\t\t\treturn <Link className=\"add-to-reading-list-link\" to={`/books/${book.id}/add`} onClick={onClickAddBookHandler} >ADD TO YOUR LIST</Link>;\r\n\t\t} else {\r\n\t\t\treturn <p className=\"added-to-reading-list\">ADDED TO YOUR LIST</p>;\r\n\t\t}\r\n\t}\r\n\r\n\tif(isLoading){\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Loader/>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h1>Book</h1>\r\n\t\t\t<div className=\"book-details-container\">\r\n\t\t\t\t<div className=\"book-main\">\r\n\t\t\t\t\t<h4 className=\"book-author\">{book.author}</h4>\r\n\t\t\t\t\t<h1 className=\"book-title\">{book.title}</h1>\r\n\t\t\t\t\t<div className=\"book-details\">\r\n\t\t\t\t\t\t<span><i className=\"far fa-clock\"></i>{book.createdAt}</span>\r\n\t\t\t\t\t\t<span><i className=\"far fa-user\"></i>{book.creator}</span>\r\n\t\t\t\t\t\t<span><i className=\"far fa-comment-alt\"></i>{comments.length}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{!canVote\r\n\t\t\t\t\t\t? <Star rating={book.rating} />\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\t\t\t\t\t<div className=\"book-image\">\r\n\t\t\t\t\t\t<img src={book.imageUrl ? book.imageUrl : DEFAULT_BOOK_URL} alt=\"Book_cover\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p className=\"book-description\">{book.description}</p>\r\n\t\t\t\t\t<div className=\"book-categories\">\r\n\t\t\t\t\t\t{book.category.map(x => <span key={x}><i className=\"far fa-circle\"></i>{x}</span>)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"book-additional\">\r\n\t\t\t\t\t<div className=\"book-comments\">\r\n\t\t\t\t\t\t{comments.length > 0\r\n\t\t\t\t\t\t\t? comments.map(x => <CustomComment key={x.id} createdAt={x.createdAt} text={x.text} creator={x.creator} />)\r\n\t\t\t\t\t\t\t: <p>No comments yet... Be the first one to comment!</p>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"book-rating\">\r\n\t\t\t\t\t\t{canVote && <Rating userId={user.userId} bookId={bookId} />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{isAuthenticated\r\n\t\t\t\t\t\t? <div className=\"book-comments-form\">\r\n\t\t\t\t\t\t\t<form action=\"\" method=\"post\" onSubmit={onSubmitCommentHandler}>\r\n\t\t\t\t\t\t\t\t<h4>You can write your comment here:</h4>\r\n\t\t\t\t\t\t\t\t<textarea className=\"comment-input\" name=\"comment\" id=\"comment\" cols=\"50\" rows=\"6\"></textarea>\r\n\t\t\t\t\t\t\t\t{validationError && <p className=\"comment-error\">{validationError}</p>}\r\n\t\t\t\t\t\t\t\t<button className=\"comment-btn\" type=\"submit\">POST</button>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"book-actions\">\r\n\t\t\t\t\t<div className=\"book-actions-icon\">\r\n\t\t\t\t\t\t<i className=\"far fa-calendar-check\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{actionsAllowed()}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default BookDetails;\r\n","import { useNavigate } from \"react-router-dom\";\r\nimport { useEffect, useContext } from \"react\";\r\n\r\nimport './index.css';\r\n\r\nimport AuthContext from \"../../../context/authContext\";\r\nimport useEventForm from \"../../../hooks/useEventForm\";\r\n\r\nimport Loader from \"../../../components/loader\";\r\nimport MapEvent from \"../../../components/map-event\";\r\nimport ValidationError from \"../../../components/validation-error\";\r\n\r\nconst EventCreate = () => {\r\n\tconst navigate = useNavigate();\r\n\tconst { user } = useContext(AuthContext);\r\n\r\n\tconst {\r\n\t\tisLoading,\r\n\t\tisImageLoading,\r\n\t\tvalidationError,\r\n\t\timagePreview,\r\n\t\tisSuccess,\r\n\t\tgetGeoPoint,\r\n\t\tonChangeImageHandler,\r\n\t\tonBlurInputHandler,\r\n\t\tonSubmitEventCreateHandler\r\n\t} = useEventForm();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (isSuccess) {\r\n\t\t\tnavigate('/events');\r\n\t\t}\r\n\t}, [isSuccess, navigate])\r\n\r\n\tif (isLoading) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Loader />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"event-form-container\">\r\n\t\t\t\t<div className=\"event-form-title\">\r\n\t\t\t\t\t<h3><i className=\"fa fa-arrow-right\"></i>New event</h3>\r\n\t\t\t\t</div>\r\n\t\t\t\t<form className=\"event-form-body\" onSubmit={onSubmitEventCreateHandler}>\r\n\t\t\t\t\t<div className=\"event-form-body-main\">\r\n\t\t\t\t\t\t<div className=\"event-name\">\r\n\t\t\t\t\t\t\t<input className=\"event-name-input\" type=\"text\" name=\"name\" id=\"name\" onBlur={onBlurInputHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"name\"><i className=\"fa fa-pen\"></i>Topic</label>\r\n\t\t\t\t\t\t\t{validationError.name && <ValidationError message={validationError.name} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"event-date\">\r\n\t\t\t\t\t\t\t<input className=\"event-date-input-box\" type=\"number\" name=\"year\" id=\"year\" min={2021} max={2050} placeholder=\"YYYY\" />\r\n\t\t\t\t\t\t\t<input className=\"event-date-input-box\" type=\"number\" name=\"month\" id=\"month\" min={1} max={12} placeholder=\"MM\" />\r\n\t\t\t\t\t\t\t<input className=\"event-date-input-box\" type=\"number\" name=\"day\" id=\"day\" min={1} max={31} placeholder=\"DD\" />\r\n\t\t\t\t\t\t\t<input className=\"event-date-input-box\" type=\"number\" name=\"hour\" id=\"hour\" min={0} max={23} placeholder=\"HH\" />\r\n\t\t\t\t\t\t\t<input className=\"event-date-input-box\" type=\"number\" name=\"minute\" id=\"minute\" min={0} max={59} placeholder=\"MM\" />\r\n\t\t\t\t\t\t\t<label htmlFor=\"date\"><i className=\"fa fa-pen\"></i>Date and time</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{validationError.date && <ValidationError message={validationError.date} />}\r\n\t\t\t\t\t\t<div className=\"event-default-image\">\r\n\t\t\t\t\t\t\t{isImageLoading ? <Loader /> : <img src={imagePreview} alt=\"Event_Image\" />}\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"event-image\">\r\n\t\t\t\t\t\t\t<input className=\"event-image-input\" type=\"file\" accept=\"image/*\" lang=\"en\" name=\"imageUrl\" id=\"imageUrl\"  onChange={onChangeImageHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"image\"><i className=\"fas fa-image\"></i>Image</label>\r\n\t\t\t\t\t\t\t{validationError.image && <ValidationError message={validationError.image} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"event-form-body-details\">\r\n\t\t\t\t\t\t<div className=\"event-description\">\r\n\t\t\t\t\t\t\t<textarea className=\"event-description-input\" type=\"text\" name=\"description\" id=\"description\" cols=\"50\" rows=\"12\" onBlur={onBlurInputHandler} />\r\n\t\t\t\t\t\t\t<label htmlFor=\"description\"><i className=\"fa fa-pen\"></i>Description</label>\r\n\t\t\t\t\t\t\t{validationError.description && <ValidationError message={validationError.description} />}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<MapEvent getGeoPoint={getGeoPoint} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"event-form-footer\">\r\n\t\t\t\t\t\t<div className=\"recommend\">\r\n\t\t\t\t\t\t\t<p>Organised by</p>\r\n\t\t\t\t\t\t\t<h3>{user.username}</h3>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"event-action\">\r\n\t\t\t\t\t\t\t<button className=\"event-action-btn\" type=\"submit\">Add to events</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{validationError.required && <ValidationError message={validationError.required} />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default EventCreate;\r\n","import { useState, useEffect } from 'react';\r\n\r\n\r\nimport { getEventById } from '../services/event';\r\nimport { signSubscription } from '../services/subscription';\r\nimport { commentDataValidation } from '../utils/validation';\r\nimport { createEventComment, getAllCommentsByEventId } from '../services/comment';\r\n\r\nconst initialEventValue = {\r\n\tid: \"\",\r\n\tname: \"\",\r\n\tdate: \"\",\r\n\tlocation: '',\r\n\tdescription: \"\",\r\n\timageUrl: \"\",\r\n\tstatus: \"\",\r\n\tcreatedAt: \"\",\r\n\tcreator: \"\",\r\n\tsubscriptionId: \"\",\r\n\tsubscribed: [],\r\n\tdateObj: {}\r\n};\r\n\r\nconst useEvent = (eventId, isAuthenticated, user) => {\r\n\tconst [event, setEvent] = useState(initialEventValue);\r\n\tconst [isLoading, setIsloading] = useState(false);\r\n\tconst [canSubscribe, setCanSubscribe] = useState(false);\r\n\tconst [comments, setComments] = useState([]);\r\n\tconst [validationError, setValidationError] = useState(null);\r\n\r\n\tconst isCreator = isAuthenticated && user.username === event.creator;\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function fetchData() {\r\n\t\t\tsetIsloading(true);\r\n\t\t\tconst event = await getEventById(eventId);\r\n\t\t\tsetIsloading(false);\r\n\t\t\tsetEvent(event);\r\n\r\n\t\t\tconst eventDate = new Date(event.date)\r\n\t\t\tif (isAuthenticated && user.username !== event.creator\r\n\t\t\t\t&& !event.subscribed.includes(user.username) \r\n\t\t\t\t&& event.status === \"active\" && eventDate >= Date.now()) {\r\n\t\t\t\tsetCanSubscribe(true);\r\n\t\t\t}\r\n\t\t\tconst comments = await getAllCommentsByEventId(eventId);\r\n\t\t\tsetComments(comments);\r\n\t\t}\r\n\t\tfetchData()\r\n\t}, [eventId, user, isAuthenticated])\r\n\r\n\r\n\tconst onClickAddEventHandler = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tawait signSubscription(user.username, event.subscriptionId, event.subscribed);\r\n\t\tconst updatedSuscribed = [...event.subscribed, user.username];\r\n\t\tsetEvent(prev => ({ ...prev, subscribed: updatedSuscribed }));\r\n\t\tsetCanSubscribe(false);\r\n\t}\r\n\r\n\tconst onSubmitCommentHandler = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst text = e.target.comment.value;\r\n\t\tconst error = commentDataValidation(text)\r\n\t\tif (error) {\r\n\t\t\tsetValidationError(error);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (validationError) {\r\n\t\t\tsetValidationError(null);\r\n\t\t}\r\n\t\tawait createEventComment(eventId, text);\r\n\t\tconst updated = await getAllCommentsByEventId(eventId);\r\n\t\tsetComments(updated);\r\n\t\te.target.comment.value = '';\r\n\t}\r\n\r\n\treturn {\r\n\t\tevent,\r\n\t\tisLoading,\r\n\t\tisCreator,\r\n\t\tcanSubscribe,\r\n\t\tcomments,\r\n\t\tvalidationError,\r\n\t\tonClickAddEventHandler,\r\n\t\tonSubmitCommentHandler\r\n\t}\r\n}\r\n\r\nexport default useEvent;","import { useContext } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\n\r\nimport './index.css';\r\nimport { DEFAULT_EVENT_URL } from \"../../../constants/common\";\r\n\r\nimport useEvent from \"../../../hooks/useEvent\";\r\nimport AuthContext from \"../../../context/authContext\";\r\n\r\nimport Loader from \"../../../components/loader\";\r\nimport MapEvent from \"../../../components/map-event\";\r\nimport CustomComment from \"../../../components/comment\";\r\n\r\nconst EventDetails = () => {\r\n\tconst { isAuthenticated, user } = useContext(AuthContext);\r\n\tconst { eventId } = useParams();\r\n\r\n\tconst {\r\n\t\tevent,\r\n\t\tisLoading,\r\n\t\tisCreator,\r\n\t\tcanSubscribe,\r\n\t\tcomments,\r\n\t\tvalidationError,\r\n\t\tonClickAddEventHandler,\r\n\t\tonSubmitCommentHandler\r\n\t} = useEvent(eventId, isAuthenticated, user)\r\n\r\n\tconst actionsAllowed = () => {\r\n\t\tif (!isAuthenticated) {\r\n\t\t\treturn <Link className=\"join-link\" to={'/register'}>JOIN US</Link>;\r\n\t\t}\r\n\t\tif (isCreator) {\r\n\t\t\treturn <Link className=\"edit-link\" to={`/events/${event.id}/edit`}>EDIT EVENT</Link>;\r\n\t\t}\r\n\t\tif ( canSubscribe) {\r\n\t\t\treturn <Link className=\"add-to-event-list-link\" to={`/events/${event.id}/subscribe`} onClick={onClickAddEventHandler} >ADD TO YOUR LIST</Link>;\r\n\t\t} else {\r\n\t\t\tif(event.status===\"cancelled\"){\r\n\t\t\t\treturn <p className=\"added-to-event-list\">CANCELLED EVENT</p>;\r\n\t\t\t}\r\n\t\t\tif(new Date(event.date)<Date.now()){\r\n\t\t\t\treturn <p className=\"added-to-event-list\">EXPIRED EVENT</p>;\r\n\t\t\t}\r\n\t\t\treturn <p className=\"added-to-event-list\">ADDED TO YOUR LIST</p>;\r\n\t\t}\r\n\t}\r\n\r\n\tif (isLoading) {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Loader />\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<h1>Event</h1>\r\n\t\t\t<div className=\"event-details-container\">\r\n\t\t\t\t<div className=\"event-main\">\r\n\t\t\t\t\t<h3 className=\"event-schedule\">SCHEDULE: {event.date}</h3>\r\n\t\t\t\t\t<h3 className=\"event-heading\"> TOPIC: {event.name}</h3>\r\n\t\t\t\t\t<div className=\"event-details\">\r\n\t\t\t\t\t\t<span><i className=\"far fa-clock\"></i>{event.createdAt}</span>\r\n\t\t\t\t\t\t<span><i className=\"far fa-user\"></i>{event.creator}</span>\r\n\t\t\t\t\t\t<span><i className=\"far fa-comment-alt\"></i>{comments.length}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"event-status\">\r\n\t\t\t\t\t\t{event.status === 'active'\r\n\t\t\t\t\t\t\t? <span className=\"status-active\" ><i className=\"fas fa-chart-line\"></i>{event.status}</span>\r\n\t\t\t\t\t\t\t: <span className=\"status-cancelled\"><i className=\"fas fa-ban\"></i>{event.status}</span>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"event-image\">\r\n\t\t\t\t\t\t<img src={event.imageUrl ? event.imageUrl :DEFAULT_EVENT_URL} alt=\"Event_cover\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<p className=\"event-description\">{event.description}</p>\r\n\t\t\t\t\t<div className=\"event-subscribed\">\r\n\t\t\t\t\t\t{event.subscribed.length > 0\r\n\t\t\t\t\t\t\t? event.subscribed.map(x => <span key={x}> <i className=\"fas fa-user-circle subscribed\"></i>{x}</span>)\r\n\t\t\t\t\t\t\t: <p>No one has subscribed yet...</p>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"event-additional\">\r\n\t\t\t\t\t<div className=\"event-map-container\">\r\n\t\t\t\t\t\t{event.location && <MapEvent getGeoPoint={null} center={event.location} message={'Event location'} />}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"event-comments\">\r\n\t\t\t\t\t\t{comments.length > 0\r\n\t\t\t\t\t\t\t? comments.map(x => <CustomComment key={x.id} createdAt={x.createdAt} text={x.text} creator={x.creator} />)\r\n\t\t\t\t\t\t\t: <p>No comments yet... Be the first one to comment!</p>}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{isAuthenticated\r\n\t\t\t\t\t\t? <div className=\"event-comments-form\">\r\n\t\t\t\t\t\t\t<form action=\"\" method=\"post\" onSubmit={onSubmitCommentHandler}>\r\n\t\t\t\t\t\t\t\t<h4>You can write your comment here:</h4>\r\n\t\t\t\t\t\t\t\t<textarea className=\"comment-input\" name=\"comment\" id=\"comment\" cols=\"50\" rows=\"6\"></textarea>\r\n\t\t\t\t\t\t\t\t{validationError && <p className=\"comment-error\">{validationError}</p>}\r\n\t\t\t\t\t\t\t\t<button className=\"comment-btn\" type=\"submit\">POST</button>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: null\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"event-actions\">\r\n\t\t\t\t\t<div className=\"event-actions-icon\">\r\n\t\t\t\t\t\t<i className=\"far fa-calendar-check\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{actionsAllowed()}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default EventDetails;\r\n","import { Route, Routes, useLocation } from 'react-router-dom';\n\nimport './App.css';\n\nimport { AuthRoute, UserRoute } from './GuardedRoute';\n\nimport Home from './pages/home';\nimport Landing from './pages/landing';\nimport NoMatch from './pages/no-match';\nimport Books from './pages/book/books';\nimport Login from './pages/auth/login';\nimport Logout from './pages/auth/logout';\nimport Events from './pages/event/events';\nimport MyPage from './pages/auth/my-page';\nimport Register from './pages/auth/register';\nimport BookEdit from './pages/book/book-edit';\nimport EventEdit from './pages/event/event-edit';\nimport BookCreate from './pages/book/book-create';\nimport PageLayout from './components/page-layout';\nimport BookDetails from './pages/book/book-details';\nimport EventCreate from './pages/event/event-create';\nimport EventDetails from './pages/event/event-details';\n\n\nconst App = () => {\n  const location = useLocation();\n  \n  if (location.pathname === '/') {\n    return (\n      <Routes>\n        <Route path=\"/\" element={<Landing />} />\n      </Routes>\n    )\n  }\n\n  return (\n    <PageLayout>\n      <Routes>\n        <Route path=\"/home\" element={<Home />} />\n\n        <Route path=\"/books\" element={<Books />} />\n        <Route path=\"/books/:bookId\" element={<BookDetails />} />\n        <Route element={<AuthRoute />}>\n          <Route path=\"/books/:bookId/edit\" element={<BookEdit />} />\n          <Route path=\"/books/create\" element={<BookCreate />} />\n        </Route>\n\n        <Route path=\"/events\" element={<Events />} />\n        <Route path=\"/events/:eventId\" element={<EventDetails />} />\n        <Route element={<AuthRoute />}>\n          <Route path=\"/events/:eventId/edit\" element={<EventEdit />} />\n          <Route path=\"/events/create\" element={<EventCreate />} />\n        </Route>\n\n        <Route element={<UserRoute />}>\n          <Route path=\"/login\" element={<Login />} />\n          <Route path=\"/register\" element={<Register />} />\n        </Route>\n\n        <Route element={<AuthRoute />}>\n          <Route path=\"/my-page/:userId\" element={<MyPage />} />\n          <Route path=\"/logout\" element={<Logout />} />\n        </Route>\n\n        <Route path=\"*\" element={<NoMatch />} />\n      </Routes>\n    </PageLayout>\n  );\n}\n\nexport default App;\n","import React from 'react';\r\n\r\nclass ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            hasError: false\r\n        };\r\n    }\r\n\r\n    static getDerivedStateFromError(error) {\r\n        return {\r\n            hasError: true\r\n        }\r\n    }\r\n\r\n    componentDidCatch(error) {\r\n        console.log('Error from componentDidCatch: ', error);\r\n    }\r\n    \r\n    render() {\r\n        if (this.state.hasError) {\r\n            return <h1>Something went wrong!!!</h1>\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default ErrorBoundary;","import { useState } from \"react\";\r\n\r\nconst useLocalStorage = (key, value) => {\r\n\r\n    const [state, setState] = useState(()=>{\r\n        try {\r\n            const item = localStorage.getItem(key);\r\n            if (item) {\r\n                return JSON.parse(item)\r\n            }\r\n            return value;\r\n        } catch (error) {\r\n            console.log(error.message);\r\n            return value;\r\n        }\r\n    })\r\n\r\n\r\n    const setLocalStorageItem = (value) => {\r\n        try {\r\n            localStorage.setItem(key, JSON.stringify(value))\r\n            setState(value);\r\n        } catch (error) {\r\n            console.log(error.message);\r\n        }\r\n    }\r\n\r\n    return [\r\n        state,\r\n        setLocalStorageItem\r\n    ]\r\n};\r\n\r\nexport default useLocalStorage;","import { INITIAL_AUTH_VALUE } from './constants/common';\r\n\r\nimport AuthContext from './context/authContext';\r\nimport useLocalStorage from './hooks/useLocalStorage';\r\n\r\nconst AuthContextProvider = (props) => {\r\n\r\n    const [user, setUser] = useLocalStorage('user', INITIAL_AUTH_VALUE);\r\n    \r\n    const login = (authData) => {\r\n        setUser(authData);\r\n    }\r\n\r\n    const logout = () => {\r\n        setUser(INITIAL_AUTH_VALUE);\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n            value={{\r\n                user,\r\n                login,\r\n                logout,\r\n                isAuthenticated: user.username\r\n            }}\r\n        >\r\n            {props.children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AuthContextProvider;\r\n","import { useState,useCallback } from 'react';\r\n\r\nimport { INITIAL_NOTIFICATION_VALUE } from './constants/common';\r\n\r\nimport NotificationContext from './context/notificationContext';\r\n\r\n\r\nconst NotificationContextProvider = ({children}) => {\r\n\r\n    const [notification, setNotification] = useState(INITIAL_NOTIFICATION_VALUE);\r\n\r\n    const showNotification = useCallback((message,objectId) => {\r\n        setNotification(prev=>({...prev, show: true, message,objectId}));\r\n\r\n        setTimeout(() => {\r\n            setNotification(INITIAL_NOTIFICATION_VALUE);\r\n        }, 5000);\r\n    }, []);\r\n\r\n    const handleNotification = (result) => {\r\n        if(result==='cancel'){\r\n            setNotification(INITIAL_NOTIFICATION_VALUE);\r\n        }\r\n        setNotification(prev=>({...prev,result}));\r\n    };\r\n\r\n    return (\r\n        <NotificationContext.Provider\r\n            value={{ notification, showNotification, handleNotification} }>\r\n            { children }\r\n        </NotificationContext.Provider>\r\n    )\r\n};\r\n\r\nexport default NotificationContextProvider;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './App';\nimport ErrorBoundary from './ErrorBoundary';\nimport AuthContextProvider from './AuthContextProvider';\nimport NotificationContextProvider from './NotificationContextProvider';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ErrorBoundary>\n      <AuthContextProvider>\n        <NotificationContextProvider>\n        <BrowserRouter basename=\"/read-aloud\">\n          <App />\n        </BrowserRouter>\n        </NotificationContextProvider>\n      </AuthContextProvider>\n    </ErrorBoundary>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}