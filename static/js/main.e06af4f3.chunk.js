(this["webpackJsonpread-aloud-deploy"]=this["webpackJsonpread-aloud-deploy"]||[]).push([[0],Array(32).concat([function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(17),s=n.n(c),i=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},o=n(6),u=n(7),l=(n(32),a.a.createContext({})),d=n(0),j=function(){return Object(r.useContext)(l).isAuthenticated?Object(d.jsx)(u.b,{}):Object(d.jsx)(u.a,{to:"/home"})},b=function(){return Object(r.useContext)(l).isAuthenticated?Object(d.jsx)(u.a,{to:"/home"}):Object(d.jsx)(u.b,{})},m=n(2),h=n.n(m),p=n(4),O=n(5),f=(n(35),n(20)),x=n.n(f),v="https://api.cloudinary.com/v1_1/dah8nslpd/image/upload",g="YjKlytQJo1humRIEH3Gc60URQzhuFnx9bQ3ilkNf",N="https://parseapi.back4app.com/",k="IvQTv5y5lYBeXVgcZfyDzHrb6XabLtaHREZQfadT";x.a.initialize(g,k),x.a.serverURL=N;var w=x.a,y=(n(18),function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new w.Object("BookRating")).set("voted",[]),n.set("star",0),e.prev=3,e.next=6,n.save();case 6:return r=e.sent,console.log("BookRating created",r),e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(3),console.error("Error while creating BookRating: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()),E=function(){var e=Object(p.a)(h.a.mark((function e(t,n,r){var a,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(n);case 3:return a=e.sent,(c=a.voted.slice()).push(t),s=Math.floor((r+a.rating)/c.length),(i=new w.Object("BookRating")).set("objectId",a.bookRatingId),i.set("voted",c),i.set("star",s),e.next=13,i.save();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error("Error while updating BookRating: ",e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,r){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y();case 3:return n=e.sent,(r=new w.Object("Book")).set("title",t.title),r.set("author",t.author),r.set("description",t.description),r.set("creator",w.User.current()),r.set("category",t.category),r.set("imageUrl",t.image),r.set("bookRating",n),e.next=14,r.save();case 14:return a=e.sent,e.abrupt("return",a);case 18:e.prev=18,e.t0=e.catch(0),console.error("Error while creating Book: ",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.Object.extend("Book"),a=new w.Query(r),e.prev=2,e.next=5,a.get(t);case 5:return(c=e.sent).set("title",n.title),c.set("author",n.author),c.set("description",n.description),c.set("creator",w.User.current()),n.category.length>0&&c.set("category",n.category),c.set("imageUrl",n.image),e.prev=12,e.next=15,c.save();case 15:return s=e.sent,e.abrupt("return",s);case 19:e.prev=19,e.t0=e.catch(12),console.error("Error while updating Book",e.t0);case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(2),console.error("Error while retrieving Book",e.t1);case 27:case"end":return e.stop()}}),e,null,[[2,24],[12,19]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.Object.extend("Book"),(r=new w.Query(n)).include("creator"),r.include("bookRating"),r.equalTo("objectId",t),e.prev=5,e.next=8,r.first();case 8:return a=e.sent,c=Q(a),e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(5),console.error("Error while fetching Book",e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.Object.extend("Book"),(r=new w.Query(n)).include("creator"),r.include("bookRating"),r.descending("createdAt"),r.skip((t.counter-1)*t.perPage).limit(t.perPage),e.prev=6,e.next=9,r.find();case 9:return a=e.sent,c=a.map(Q),e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(6),console.error("Error while fetching Book",e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.Object.extend("Book"),n=new w.Query(t),e.prev=2,e.next=5,n.count();case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(2),console.error("Error while fetching Book",e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.Object.extend("Book"),(a=new w.Query(r)).include("creator"),a.include("bookRating"),a.matches("author",n,"i"),a.skip((t.counter-1)*t.perPage).limit(t.perPage),e.prev=6,e.next=9,a.find();case 9:return c=e.sent,s=c.map(Q),e.abrupt("return",s);case 14:e.prev=14,e.t0=e.catch(6),console.error("Error while fetching Book",e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.Object.extend("Book"),(r=new w.Query(n)).matches("author",t,"i"),e.prev=3,e.next=6,r.count();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(3),console.error("Error while fetching Book",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.Object.extend("Book"),(a=new w.Query(r)).include("creator"),a.include("bookRating"),a.matches("title",n,"i"),a.skip((t.counter-1)*t.perPage).limit(t.perPage),e.prev=6,e.next=9,a.find();case 9:return c=e.sent,s=c.map(Q),e.abrupt("return",s);case 14:e.prev=14,e.t0=e.catch(6),console.error("Error while fetching Book",e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.Object.extend("Book"),(r=new w.Query(n)).matches("title",t,"i"),e.prev=3,e.next=6,r.count();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(3),console.error("Error while fetching Book",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.Object.extend("Book"),(a=new w.Query(r)).include("creator"),a.include("bookRating"),a.equalTo("category",n),a.skip((t.counter-1)*t.perPage).limit(t.perPage),e.prev=6,e.next=9,a.find();case 9:return c=e.sent,s=c.map(Q),e.abrupt("return",s);case 14:e.prev=14,e.t0=e.catch(6),console.error("Error while fetching Book",e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.Object.extend("Book"),(r=new w.Query(n)).equalTo("category",t),e.prev=3,e.next=6,r.count();case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(3),console.error("Error while fetching Book",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new w.Query("User")).equalTo("username",n.toLocaleLowerCase()),(a=new w.Query("Book")).include("creator"),a.include("bookRating"),a.matchesQuery("creator",r),a.skip((t.counter-1)*t.perPage).limit(t.perPage),e.prev=7,e.next=10,a.find();case 10:return c=e.sent,s=c.map(Q),e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(7),console.error("Error while fetching Book",e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new w.Query("User")).equalTo("username",t.toLocaleLowerCase()),(r=new w.Query("Book")).include("creator"),r.matchesQuery("creator",n),e.prev=5,e.next=8,r.count();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(5),console.error("Error while fetching Book",e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.Object.extend("Book"),(n=new w.Query(t)).include("creator"),n.include("bookRating"),n.descending("createdAt").limit(4),e.prev=5,e.next=8,n.find();case 8:return r=e.sent,a=r.map(Q),e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(5),console.error("Error while fetching Book",e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n,r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.Object.extend("BookRating"),(n=new w.Query(t)).equalTo("star",5),r=w.Object.extend("Book"),(a=new w.Query(r)).include("creator"),a.include("bookRating"),a.matchesQuery("bookRating",n),a.descending("createdAt"),a.limit(4),e.prev=10,e.next=13,a.find();case 13:return c=e.sent,s=c.map(Q),e.abrupt("return",s);case 18:e.prev=18,e.t0=e.catch(10),console.error("Error while fetching Book",e.t0);case 21:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(){return e.apply(this,arguments)}}(),Q=function(e){var t=e.get("creator").get("username"),n=e.get("bookRating").id,r=e.get("bookRating").get("star"),a=e.get("bookRating").get("voted"),c=new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return{id:e.id,createdAt:c,title:e.get("title"),author:e.get("author"),description:e.get("description"),imageUrl:e.get("imageUrl"),category:e.get("category"),voted:a,rating:r,creator:t,bookRatingId:n}},Y=n(19),M=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new w.Object("EventSubscription"),(r=new w.Query(n)).include("event"),r.containedIn("subscribed",[t]),e.prev=4,e.next=7,r.find();case 7:return a=e.sent,c=a.map(K),e.abrupt("return",c);case 12:e.prev=12,e.t0=e.catch(4),console.error("Error while fetching EventSubscription",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new w.Object("EventSubscription")).set("subscribed",[]),n.set("event",t),e.prev=3,e.next=6,n.save();case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(3),console.error("Error while creating EventSubscription: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(p.a)(h.a.mark((function e(t,n,r){var a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new w.Object("EventSubscription"),c=new w.Query(a),e.prev=2,e.next=5,c.get(n);case 5:return(s=e.sent).set("subscribed",[].concat(Object(Y.a)(r),[t])),e.prev=7,e.next=10,s.save();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.error("Error while updating EventSubscription",e.t0);case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),console.error("Error while retrieving object EventSubscription",e.t1);case 20:case"end":return e.stop()}}),e,null,[[2,17],[7,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),_=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new w.Object("EventSubscription"),a=new w.Query(r),e.next=5,a.get(n);case 5:return c=e.sent,(s=c.get("subscribed")).splice(s.indexOf(t),1),c.set("subscribed",s),e.next=11,c.save();case 11:return e.abrupt("return",!0);case 14:e.prev=14,e.t0=e.catch(0),console.error("Error while updating EventSubscription: ",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n){return e.apply(this,arguments)}}(),K=function(e){var t=new Date(e.get("event").get("date")).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1});return{subscriptionId:e.id,name:e.get("event").get("name"),imageUrl:e.get("event").get("imageUrl"),status:e.get("event").get("status"),date:t,eventId:e.get("event").id}},W=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new w.Object("Event")).set("name",t.name),n.set("date",t.date),n.set("description",t.description),n.set("creator",w.User.current()),n.set("location",new w.GeoPoint({latitude:t.location[0],longitude:t.location[1]})),n.set("imageUrl",t.image),n.set("status",t.status),e.next=11,n.save();case 11:return r=e.sent,e.next=14,G(r);case 14:return a=e.sent,r.set("subscription",a),e.next=18,r.save();case 18:return c=e.sent,e.abrupt("return",c);case 22:e.prev=22,e.t0=e.catch(0),console.error("Error while creating event: ",e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.Object.extend("Event"),a=new w.Query(r),e.prev=2,e.next=5,a.get(t);case 5:return(c=e.sent).set("name",n.name),c.set("date",n.date),c.set("description",n.description),c.set("creator",w.User.current()),c.set("location",new w.GeoPoint({latitude:n.location[0],longitude:n.location[1]})),c.set("imageUrl",n.image),e.prev=12,e.next=15,c.save();case 15:return s=e.sent,e.abrupt("return",s);case 19:e.prev=19,e.t0=e.catch(12),console.error("Error while updating event",e.t0);case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(2),console.error("Error while retrieving event",e.t1);case 27:case"end":return e.stop()}}),e,null,[[2,24],[12,19]])})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.Object.extend("Event"),r=new w.Query(n),e.prev=2,e.next=5,r.get(t);case 5:return a=e.sent,e.prev=6,a.set("status","cancelled"),e.next=10,a.save();case 10:return c=e.sent,e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(6),console.error("Error while updating event",e.t0);case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(2),console.error("Error while retrieving event",e.t1);case 22:case"end":return e.stop()}}),e,null,[[2,19],[6,14]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.Object.extend("Event"),(r=new w.Query(n)).include("creator"),r.include("subscription"),r.equalTo("objectId",t),e.prev=5,e.next=8,r.first();case 8:return a=e.sent,c=ue(a),e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(5),console.error("Error while fetching event",e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.Object.extend("Event"),(r=new w.Query(n)).descending("createdAt"),r.skip((t.counter-1)*t.perPage).limit(t.perPage),e.prev=4,e.next=7,r.find();case 7:return a=e.sent,c=a.map(ue),e.abrupt("return",c);case 12:e.prev=12,e.t0=e.catch(4),console.error("Error while fetching event",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.Object.extend("Event"),n=new w.Query(t),e.prev=2,e.next=5,n.count();case 5:return e.abrupt("return",e.sent);case 8:e.prev=8,e.t0=e.catch(2),console.error("Error while fetching event",e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.Object.extend("Event"),(r=new w.Query(n)).equalTo("status","active"),r.greaterThan("date",new Date),r.ascending("date"),r.skip((t.counter-1)*t.perPage).limit(t.perPage),e.prev=6,e.next=9,r.find();case 9:return a=e.sent,c=a.map(ue),e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(6),console.error("Error while fetching event",e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.Object.extend("Event"),(n=new w.Query(t)).equalTo("status","active"),n.greaterThan("date",new Date),n.ascending("date"),e.prev=5,e.next=8,n.count();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(5),console.error("Error while fetching event",e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.Object.extend("Event"),(r=new w.Query(n)).equalTo("status","cancelled"),r.greaterThan("date",new Date),r.ascending("date"),r.skip((t.counter-1)*t.perPage).limit(t.perPage),e.prev=6,e.next=9,r.find();case 9:return a=e.sent,c=a.map(ue),e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(6),console.error("Error while fetching event",e.t0);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.Object.extend("Event"),(n=new w.Query(t)).equalTo("status","cancelled"),n.greaterThan("date",new Date),n.ascending("date"),e.prev=5,e.next=8,n.count();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(5),console.error("Error while fetching event",e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new w.Query("User")).equalTo("username",t.toLocaleLowerCase()),a=w.Object.extend("Event"),(c=new w.Query(a)).include("creator"),c.descending("createdAt"),c.matchesQuery("creator",r),c.skip((n.counter-1)*n.perPage).limit(n.perPage),e.prev=8,e.next=11,c.find();case 11:return s=e.sent,i=s.map(ue),e.abrupt("return",i);case 16:e.prev=16,e.t0=e.catch(8),console.error("Error while fetching event",e.t0);case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(t,n){return e.apply(this,arguments)}}(),se=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new w.Query("User")).equalTo("username",t.toLocaleLowerCase()),r=w.Object.extend("Event"),(a=new w.Query(r)).include("creator"),a.descending("createdAt"),a.matchesQuery("creator",n),e.prev=7,e.next=10,a.count();case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(7),console.error("Error while fetching event",e.t0);case 16:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.Object.extend("Event"),(n=new w.Query(t)).include("creator"),n.descending("createdAt").limit(4),e.prev=4,e.next=7,n.find();case 7:return r=e.sent,a=r.map(ue),e.abrupt("return",a);case 12:e.prev=12,e.t0=e.catch(4),console.error("Error while fetching event",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.Object.extend("Event"),(n=new w.Query(t)).include("creator"),n.equalTo("status","active"),n.greaterThan("date",new Date),n.ascending("date"),n.limit(4),e.prev=7,e.next=10,n.find();case 10:return r=e.sent,a=r.map(ue),e.abrupt("return",a);case 15:e.prev=15,e.t0=e.catch(7),console.error("Error while fetching event",e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(){return e.apply(this,arguments)}}(),ue=function(e){var t=e.get("creator").get("username"),n=e.get("subscription").id,r=e.get("subscription").get("subscribed"),a=new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}),c=new Date(e.get("date")),s=c.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}),i={year:c.getFullYear(),month:c.getMonth()+1,day:c.getDate(),hour:c.getHours(),minute:c.getMinutes()};return{id:e.id,createdAt:a,name:e.get("name"),description:e.get("description"),imageUrl:e.get("imageUrl"),status:e.get("status"),location:[e.get("location")._latitude,e.get("location")._longitude],date:s,creator:t,subscriptionId:n,subscribed:r,dateObj:i}},le=(n(37),function(){return Object(d.jsx)("div",{className:"spinner-container",children:Object(d.jsx)("div",{className:"spinner",children:Object(d.jsxs)("div",{className:"spinner-element",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{}),Object(d.jsx)("div",{})]})})})}),de=(n(38),n(39),function(e,t){var n=[{title:"Books",link:"/books"},{title:"Events",link:"/events"},{title:"My Page",link:"/my-page/".concat(e&&t.userId)},{title:"Logout",link:"/logout"}];return e?n:[{title:"Books",link:"/books"},{title:"Events",link:"/events"},{title:"Register",link:"/register"},{title:"Login",link:"/login"}]}),je=(n(40),function(e){var t=e.title,n=e.href,r=e.type;return Object(d.jsx)("div",{className:"".concat(r,"-list-item"),children:Object(d.jsx)(o.b,{to:n,className:"".concat(r,"-link"),children:t})})}),be=(n(41),function(e){return Object(d.jsx)(o.b,{to:"/home",children:e.children})}),me=function(){var e=Object(r.useContext)(l),t=e.user,n=e.isAuthenticated,a=Object(r.useState)([]),c=Object(O.a)(a,2),s=c[0],i=c[1];Object(r.useEffect)((function(){i(de(n,t))}),[t]);var o=(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return Object(d.jsxs)("header",{className:"header-wrapper",children:[Object(d.jsxs)("div",{className:"logo-container-header",children:[Object(d.jsx)("span",{className:"logo-header",children:Object(d.jsx)(be,{href:"/home",className:"logo-link",children:Object(d.jsx)("img",{alt:"logo",className:"logo-img-header",src:"/read-aloud/logo.png"})})}),Object(d.jsxs)("div",{className:"text-header",children:[Object(d.jsx)("span",{className:"read-aloud",children:">>> read aloud <<<"}),Object(d.jsx)("span",{children:o})]})]}),Object(d.jsx)("div",{className:"links-container",children:s.map((function(e){return Object(d.jsx)(je,{href:e.link,title:e.title,type:"header"},e.title)}))})]})},he=(n(42),function(){return Object(d.jsxs)("footer",{className:"footer-wrapper",children:[Object(d.jsxs)("div",{className:"logo-container-footer",children:[Object(d.jsx)("span",{className:"logo-footer",children:Object(d.jsx)(be,{href:"/home",children:Object(d.jsx)("img",{alt:"logo",className:"logo-img-footer",src:"/read-aloud/logo.png"})})}),Object(d.jsx)("span",{className:"text-footer",children:"READ ALOUD \xa9 2021"})]}),Object(d.jsx)("p",{children:"Designed and created by nradkova"})]})}),pe=(n(43),function(e){window.scrollTo({top:0,behavior:"smooth"})}),Oe=function(){var e=Object(r.useRef)();Object(r.useCallback)((function(){window.scrollY>0&&window.scrollTo({top:0,behavior:"smooth"})}),[]);return window.addEventListener("scroll",(function(){window.innerHeight+300>=window.outerHeight&&e.current&&(e.current.style.display="block")})),Object(d.jsx)("button",{ref:e,className:"scroller-button",onClick:pe,children:Object(d.jsx)("i",{className:"fas fa-arrow-up"})})},fe=function(e){return Object(d.jsxs)("div",{className:"page-wrapper",children:[Object(d.jsx)(me,{}),Object(d.jsx)("div",{className:"page-wrapper-inner",children:e.children}),Object(d.jsx)(Oe,{}),Object(d.jsx)(he,{})]})},xe=(n(44),n(45),["classic","fantasy","science fiction","adventure","romance","detective","horror","thriller","historical fiction","YA fiction","travel","education & teaching","social sciences","biography","cooking","art","self - help","motivational","health & fitness","history","religion & spirituality","crafts & hobbies","comedy","business & money"]),ve="/read-aloud/default_book.png",ge="/read-aloud/default_event.png",Ne={userId:"",username:"",sessionToken:""},ke={username:"",password:"",rePass:""},we={username:null,password:null,rePass:null,exists:null,credentials:null},ye={id:"",title:"",author:"",description:"",imageUrl:"",rating:"",createdAt:"",categories:[]},Ee={title:null,author:null,image:null,description:null,required:null},Se={id:"",name:"",date:"",location:"",description:"",imageUrl:"",status:"",createdAt:"",creator:"",dateObj:{}},Ce={name:null,date:null,location:null,description:null,image:null,required:null},Ie=[38.6855,-101.0733],Be=[42.69751,23.32415],Ue={show:!1,message:"",result:""},De=function(e){var t=e.rating,n=Array(5).fill(1);return Object(d.jsx)(d.Fragment,{children:n.map((function(e,n){return n<t?Object(d.jsx)("span",{className:"fa fa-star checked"},n):Object(d.jsx)("span",{className:"fa fa-star"},n)}))})},Pe=function(e){var t=e.id,n=e.imageUrl,r=e.title,a=e.author,c=e.rating,s=void 0===c?"0":c;return Object(d.jsxs)("div",{className:"book-card-medium",children:[Object(d.jsx)("span",{className:"book-card-medium-img",children:Object(d.jsx)("img",{src:n||"/default_book.png",alt:"Book_cover"})}),Object(d.jsxs)("div",{className:"book-card-medium-content",children:[Object(d.jsx)(o.b,{className:"details-link",to:"/books/".concat(t),children:"VIEW"}),Object(d.jsxs)("div",{className:"book-card-medium-content-text",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{className:"book-card-medium-content-heading",children:"Title: "}),r]}),Object(d.jsxs)("p",{children:[" ",Object(d.jsx)("span",{className:"book-card-medium-content-heading",children:" Author: "}),a]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{className:"book-card-medium-content-heading",children:"Rating: "}),Object(d.jsx)(De,{rating:s})]})]})]})]})},Te=(n(46),function(e){var t=e.id,n=e.imageUrl,r=e.name,a=e.date,c=e.status,s=e.createdAt;return Object(d.jsxs)("div",{className:"event-card-medium",children:[Object(d.jsx)("span",{className:"event-card-medium-img",children:Object(d.jsx)("img",{src:n||ge,alt:"event_cover"})}),Object(d.jsxs)("div",{className:"event-card-medium-content",children:[Object(d.jsx)(o.b,{className:"details-link",to:"/events/".concat(t),children:"VIEW"}),Object(d.jsxs)("div",{className:"event-card-medium-content-text",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{className:"event-card-medium-content-heading",children:"Topic: "}),r]}),Object(d.jsxs)("p",{children:[" ",Object(d.jsx)("span",{className:"event-card-medium-content-heading date",children:" Date: "}),a]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{className:"event-card-medium-content-heading",children:"Status: "}),c]}),Object(d.jsxs)("p",{className:"date-post",children:[" ",Object(d.jsx)("span",{className:"event-card-medium-content-heading date-post",children:" Posted on: "}),s]})]})]})]})}),Le=function(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(O.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(!1),l=Object(O.a)(u,2),j=l[0],b=l[1],m=Object(r.useState)("selected"),f=Object(O.a)(m,2),x=f[0],v=f[1],g=Object(r.useState)(""),N=Object(O.a)(g,2),k=N[0],w=N[1],y=Object(r.useState)("selected"),E=Object(O.a)(y,2),S=E[0],C=E[1],I=Object(r.useState)(""),B=Object(O.a)(I,2),U=B[0],D=B[1];Object(r.useEffect)((function(){b(!0),T(),v("selected"),L(),C("selected"),b(!1)}),[]);var P=function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,V();case 3:t=e.sent,b(!1),a(t),w("selected"),v("");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,F();case 3:t=e.sent,b(!1),a(t),v("selected"),w("");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,ie();case 3:t=e.sent,b(!1),o(t),D("selected"),C("");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,oe();case 3:t=e.sent,b(!1),o(t),C("selected"),D("");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=Object(d.jsxs)("div",{className:"inner-container",children:[Object(d.jsxs)("section",{className:"inner-container-text",children:[Object(d.jsx)("h3",{children:"READING IS AN EMOTION THAT CAN BE SHARED."}),Object(d.jsx)("h1",{className:"read-aloud-header",children:">>> read aloud <<< "}),Object(d.jsx)("h3",{children:" IS A PLACE TO "}),Object(d.jsx)("h3",{children:" PRESENT YOUR FAVOURITE BOOKS AND FIND FRIENDS."}),Object(d.jsx)("h3",{children:"Read Aloud is a social platform, where users publish posts about books, they love. Events on different themes are organised in order to join people with similar interests and hobbies.Everyone is welcomed. There is only one condition - to love reading."})]}),Object(d.jsx)("section",{className:"inner-container-img",children:Object(d.jsx)("img",{src:"/read-aloud/reading-time.jpg",alt:"Reading Time"})})]});return j?Object(d.jsxs)(fe,{children:[H,Object(d.jsx)(le,{})]}):Object(d.jsxs)(fe,{children:[H,Object(d.jsxs)("div",{className:"inner-container-books-events",children:[Object(d.jsxs)("section",{className:"inner-container-books",children:[Object(d.jsx)("div",{className:"books-container-items",children:n.map((function(e){return Object(d.jsx)(Pe,{id:e.id,imageUrl:e.imageUrl,title:e.title,author:e.author,rating:e.rating},e.id)}))}),n.length>0?Object(d.jsxs)("div",{className:"label-container",children:[Object(d.jsx)("p",{className:"label ".concat(x),onClick:T,children:"LATEST BOOKS"}),Object(d.jsx)("p",{className:"label ".concat(k),onClick:P,children:"MOST LIKED BOOKS"})]}):Object(d.jsx)("h3",{children:"No books yet..."})]}),Object(d.jsxs)("section",{className:"inner-container-events",children:[Object(d.jsx)("div",{className:"events-container-items",children:i.map((function(e){return Object(d.jsx)(Te,{id:e.id,imageUrl:e.imageUrl,name:e.name,createdAt:e.createdAt,date:e.date,status:e.status},e.id)}))}),i.length>0?Object(d.jsxs)("div",{className:"label-container",children:[Object(d.jsx)("p",{className:"label ".concat(U),onClick:L,children:"NEWEST EVENTS"}),Object(d.jsx)("p",{className:"label ".concat(S),onClick:A,children:"UPCOMING EVENTS"})]}):Object(d.jsx)("h3",{children:"No events yet..."})]})]})]})},Ae=(n(47),function(){return Object(d.jsxs)("div",{className:"landing-page-wrapper",children:[Object(d.jsx)("div",{className:"line-first",children:Object(d.jsx)("p",{children:" You love reading..."})}),Object(d.jsx)("div",{className:"line-second",children:Object(d.jsx)("p",{children:" Find other people who share your passion."})}),Object(d.jsxs)("div",{className:"line-third",children:[Object(d.jsx)("p",{children:" Join them."}),Object(d.jsx)(o.b,{to:"/home",children:Object(d.jsx)("i",{className:"fas fa-book-reader"})})]})]})}),He=(n(48),function(){return Object(d.jsxs)("div",{className:"no-match",children:[Object(d.jsx)("h2",{children:"Something went wrong!"}),Object(d.jsx)("p",{children:Object(d.jsx)(o.b,{to:"/home",children:"Go to the home page"})})]})}),qe=(n(49),n(9)),Re=n(3),Fe=function(e,t){if("title"===e&&t.trim().length<2)return" Book title must be at least 2 characters.";if("author"===e&&(t.trim().length<2||t.trim()>50))return" Book author must  be between 2 and 50 characters.";if("description"===e){if(0===t.trim().length)return"Book description is required.";if(t.trim().length>500)return"Book description can be up to 500 characters."}return"imageUrl"===e&&t.size>0&&!t.type.includes("image")?"Choose images to upload (PNG, JPG, JPEG...)":null},Ve=function(e,t,n){if("name"===e&&t.trim().length<2)return" Event name must be at least 2 characters.";if("date"===e){var r=Date.now();if(!t||1899===t.getFullYear()||""===n)return"Date is invalid.";if(r>t)return"You have entered a past date."}if("description"===e){if(0===t.trim().length)return"Event description is required.";if(t.trim().length>500)return"Event description can be up to 500 characters."}return"imageUrl"===e&&t.size>0&&!t.type.includes("image")?"Choose images to upload (PNG, JPG, JPEG...)":null},Qe=function(e,t){return e&&t&&""!==e.trim()&&""!==t.trim()?null:"Both search keys and criteria are required. E.g. 'The lord of the rings' and 'by 'title'"},Ye=function(e){return 0===e.trim().length||e.trim().length>400?"*Your comment can not be 0 or more than 400 characters.":null},Me=!0,Ge=!0,Je={criteria:null,search:null},_e=function(e){var t=Object(r.useState)({all:!0}),n=Object(O.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),i=Object(O.a)(s,2),o=i[0],u=i[1],l=Object(r.useState)({counter:1,perPage:2,totalPages:0,count:0}),d=Object(O.a)(l,2),j=d[0],b=d[1],m=Object(r.useState)(!1),f=Object(O.a)(m,2),x=f[0],v=f[1],g=Object(r.useState)(null),N=Object(O.a)(g,2),k=N[0],w=N[1],y=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),t=0,!a.all){e.next=6;break}return e.next=5,U();case 5:t=e.sent;case 6:if(!a.myPosts){e.next=10;break}return e.next=9,R(a.myPosts);case 9:t=e.sent;case 10:if(!a.postedBy){e.next=14;break}return e.next=13,R(a.postedBy);case 13:t=e.sent;case 14:if(!a.category){e.next=18;break}return e.next=17,H(a.category);case 17:t=e.sent;case 18:if(!a.author){e.next=22;break}return e.next=21,P(a.author);case 21:t=e.sent;case 22:if(!a.title){e.next=26;break}return e.next=25,L(a.title);case 25:t=e.sent;case 26:(n=Math.ceil(t/j.perPage))<=1&&(Me=!0,Ge=!0),n>1&&(Me=!1),b((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{count:t,totalPages:n})})),v(!1);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!0),t=[],!a.all){e.next=6;break}return e.next=5,B(j);case 5:t=e.sent;case 6:if(!a.myPosts){e.next=10;break}return e.next=9,q(j,a.myPosts);case 9:t=e.sent;case 10:if(!a.postedBy){e.next=14;break}return e.next=13,q(j,a.postedBy);case 13:t=e.sent;case 14:if(!a.category){e.next=18;break}return e.next=17,A(j,a.category);case 17:t=e.sent;case 18:if(!a.author){e.next=22;break}return e.next=21,D(j,a.author);case 21:t=e.sent;case 22:if(!a.title){e.next=26;break}return e.next=25,T(j,a.title);case 25:t=e.sent;case 26:v(!1),u(t);case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var t=Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w(null),b((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{counter:1})})),c({myPosts:e}),Je={criteria:e+" profile",search:"books"};case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(null),b((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{counter:1})})),c({all:!0}),Je.criteria=null;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=new FormData(t.target),r=n.get("search"),a=n.get("criteria"),s=Qe(a,r),w(s),!s){e.next=8;break}return e.abrupt("return");case 8:b((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{counter:1})})),c(Object(qe.a)({},a,r)),"postedBy"===a&&(Je={criteria:"users",search:r}),"category"===a&&(Je={criteria:"books categories",search:r}),"author"===a&&(Je={criteria:"books authors",search:r}),"title"===a&&(Je={criteria:"books titles",search:r}),t.target.reset();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{query:a,books:o,pagination:j,isLoading:x,validationError:k,searchMessage:Je,isDisabledIncreaseButton:Me,isDisabledDecreaseButton:Ge,decreaseCounter:function(){var e=j.counter-1;1===e&&(Ge=!0),Me=!1,b((function(t){return Object(Re.a)(Object(Re.a)({},t),{},{counter:e})}))},increaseCounter:function(){var e=j.counter+1;e>=j.totalPages&&(Me=!0),Ge=!1,b((function(t){return Object(Re.a)(Object(Re.a)({},t),{},{counter:e})}))},onClickMyPostsHandler:S,onClickAllPostsHandler:C,onSubmitSearchHandler:I,requestCountHandler:y,requestDataHandler:E}},Ke=(n(50),function(e){var t=e.title;return Object(d.jsx)("h1",{className:"page-title",children:t})}),We=(n(51),function(e){var t=e.message;return Object(d.jsx)("p",{className:"validation-error",children:t})}),ze=function(){var e=Object(r.useContext)(l),t=e.user,n=e.isAuthenticated,a=_e(t.username),c=a.query,s=a.books,i=a.pagination,o=a.isLoading,u=a.validationError,j=a.searchMessage,b=a.isDisabledIncreaseButton,m=a.isDisabledDecreaseButton,h=a.decreaseCounter,p=a.increaseCounter,O=a.onClickMyPostsHandler,f=a.onClickAllPostsHandler,x=a.onSubmitSearchHandler,v=a.requestCountHandler,g=a.requestDataHandler;Object(r.useEffect)((function(){v()}),[c]),Object(r.useEffect)((function(){i.count>0&&g()}),[i]);var N=Object(d.jsx)("div",{className:"search-my-posts",children:Object(d.jsxs)("div",{className:"search-my-posts-icon",children:[Object(d.jsx)("i",{className:"far fa-calendar-check"}),Object(d.jsx)("span",{className:"search-my-posts-action",onClick:O,children:"MY BOOKS"})]})}),k=Object(d.jsx)("div",{className:"search-all-posts",children:Object(d.jsxs)("div",{className:"search-all-posts-icon",children:[Object(d.jsx)("i",{className:"far fa-calendar-check"}),Object(d.jsx)("span",{className:"search-all-posts-action",onClick:f,children:"ALL BOOKS"})]})}),w=Object(d.jsxs)(d.Fragment,{children:[!c.all&&j.criteria&&Object(d.jsxs)("p",{className:"search-message",children:["Found \xa0 ",Object(d.jsx)("strong",{children:i.count})," \xa0 search results for \xa0 ",Object(d.jsx)("strong",{children:j.search})," \xa0 in  \xa0",Object(d.jsx)("strong",{children:j.criteria})," \xa0"]}),c.all&&Object(d.jsx)("p",{className:"search-message",children:"Latest books..."}),Object(d.jsxs)("div",{className:"books-container search",children:[Object(d.jsx)("button",{className:"prev-books",disabled:m,onClick:h,children:"\u276e"}),Object(d.jsx)("div",{className:"books-inner-container",children:s.map((function(e){return Object(d.jsx)(Pe,{id:e.id,imageUrl:e.imageUrl,title:e.title,author:e.author,rating:e.rating},e.id)}))}),Object(d.jsx)("button",{className:"next-books",disabled:b,onClick:p,children:"\u276f"})]}),Object(d.jsxs)("p",{className:"search-pages",children:[0===i.totalPages?i.counter-1:i.counter,"/",i.totalPages]})]});return Object(d.jsxs)(fe,{children:[Object(d.jsx)(Ke,{title:"Books"}),Object(d.jsxs)("div",{className:"search-posts",children:[k,n&&N]}),Object(d.jsxs)("div",{className:"all-books-container",children:[Object(d.jsxs)("div",{className:"search-container",children:[Object(d.jsxs)("form",{action:"",onSubmit:x,children:[Object(d.jsx)("input",{className:"main-input",type:"text",placeholder:"Search by key and criteria...",name:"search"}),Object(d.jsxs)("div",{className:"search-options-list",children:[Object(d.jsx)("div",{className:"search-option popup-title",children:Object(d.jsxs)("label",{className:"search-options-label-title",children:[Object(d.jsx)("input",{type:"radio",className:"popup-title",name:"criteria",defaultValue:"title"}),Object(d.jsx)("i",{className:"far fa-bookmark"}),Object(d.jsx)("span",{className:"popuptext-title",children:"BY TITLE"})]})}),Object(d.jsx)("div",{className:"search-option popup-author",children:Object(d.jsxs)("label",{className:"search-options-label-author",children:[Object(d.jsx)("input",{type:"radio",className:"popup-author",name:"criteria",defaultValue:"author"}),Object(d.jsx)("i",{className:"far fa-edit"}),Object(d.jsx)("span",{className:"popuptext-author",children:"BY AUTHOR"})]})}),Object(d.jsx)("div",{className:"search-option popup-category",children:Object(d.jsxs)("label",{className:"search-options-label-category",children:[Object(d.jsx)("input",{type:"radio",className:"popup-category",name:"criteria",defaultValue:"category"}),Object(d.jsx)("i",{className:"fas fa-list-ul"}),Object(d.jsx)("span",{className:"popuptext-category",children:"BY CATEGORY"})]})}),Object(d.jsx)("div",{className:"search-option popup-postedBy",children:Object(d.jsxs)("label",{className:"search-options-label-postedBy",children:[Object(d.jsx)("input",{type:"radio",className:"popup-postedBy",name:"criteria",defaultValue:"postedBy"}),Object(d.jsx)("i",{className:"far fa-id-badge"}),Object(d.jsx)("span",{className:"popuptext-postedBy",children:"POSTED BY"})]})})]}),Object(d.jsxs)("button",{className:"search-btn",type:"submit",children:[" ",Object(d.jsx)("i",{className:"fa fa-search"})]})]}),u&&Object(d.jsx)(We,{message:u})]}),o?Object(d.jsx)(le,{}):w]})]})},Ze=(n(52),function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.prev=1,e.next=4,w.User.logIn(n.toLocaleLowerCase(),r);case 4:return a=e.sent,e.abrupt("return",{userId:a.id,username:a.get("username"),sessionToken:a.get("sessionToken")});case 8:if(e.prev=8,e.t0=e.catch(1),console.log("Error while logging in user",e.t0),"Invalid username/password."!==e.t0.message){e.next=13;break}throw e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),Xe=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,(a=new w.User).set("username",n.toLocaleLowerCase()),a.set("password",r),e.prev=4,e.next=7,a.signUp();case 7:return c=e.sent,e.abrupt("return",{userId:c.id,username:c.get("username"),sessionToken:c.get("sessionToken")});case 11:e.prev=11,e.t0=e.catch(4),console.error("Error while signing up user",e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.User.logOut();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Error!",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),et=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new w.User,(r=new w.Query(n)).equalTo("username",t.toLocaleLowerCase()),e.prev=3,e.next=6,r.first();case 6:return a=e.sent,e.abrupt("return",a);case 10:e.prev=10,e.t0=e.catch(3),console.error("Error while retrieving user",e.t0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new w.Object("Book")).id=n,a=new w.User,c=new w.Query(a),e.prev=4,e.next=7,c.get(t);case 7:return s=e.sent,e.prev=8,s.relation("readingList").add(r),e.next=13,s.save();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.error("Error while updating user",e.t0);case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(4),console.error("Error while retrieving user",e.t1);case 23:case"end":return e.stop()}}),e,null,[[4,20],[8,15]])})));return function(t,n){return e.apply(this,arguments)}}(),nt=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new w.User,r=new w.Query(n),e.prev=2,e.next=5,r.get(t);case 5:return a=e.sent,e.prev=6,c=a.relation("readingList"),e.next=10,c.query().find();case 10:return s=e.sent,i=s.map((function(e){return{id:e.id,title:e.get("title"),author:e.get("author"),imageUrl:e.get("imageUrl")}})),e.abrupt("return",i);case 15:e.prev=15,e.t0=e.catch(6),console.error("Error while updating user",e.t0);case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),console.error("Error while retrieving user",e.t1);case 23:case"end":return e.stop()}}),e,null,[[2,20],[6,15]])})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new w.User,a=new w.Query(r),e.prev=2,e.next=5,a.get(t);case 5:return c=e.sent,e.prev=6,s=c.relation("readingList"),e.next=10,s.query().find();case 10:if(i=e.sent,!i.map((function(e){return e.id})).includes(n)){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 17:e.prev=17,e.t0=e.catch(6),console.error("Error while updating user",e.t0);case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(2),console.error("Error while retrieving user",e.t1);case 25:case"end":return e.stop()}}),e,null,[[2,22],[6,17]])})));return function(t,n){return e.apply(this,arguments)}}(),at=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new w.Object("Book")).id=n,a=new w.User,c=new w.Query(a),e.prev=4,e.next=7,c.get(t);case 7:return s=e.sent,e.prev=8,s.relation("readingList").remove(r),e.next=13,s.save();case 13:return e.abrupt("return",!0);case 16:e.prev=16,e.t0=e.catch(8),console.error("Error while updating user",e.t0);case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(4),console.error("Error while retrieving user",e.t1);case 24:case"end":return e.stop()}}),e,null,[[4,21],[8,16]])})));return function(t,n){return e.apply(this,arguments)}}(),ct={login:Ze,register:Xe,logout:$e,checkUserExists:et,updateUserReadingList:tt,getUserReadingList:nt,checkBookInUserReadingList:rt,removeBookFromUserReadingList:at};var st=function(){var e=Object(r.useState)(ke),t=Object(O.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(Ne),s=Object(O.a)(c,2),i=s[0],o=s[1],u=Object(r.useState)(!1),l=Object(O.a)(u,2),d=l[0],j=l[1],b=Object(r.useState)(we),m=Object(O.a)(b,2),f=m[0],x=m[1],v=Object(r.useState)(!1),g=Object(O.a)(v,2),N=g[0],k=g[1],w=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct.checkUserExists(t);case 3:if(!e.sent){e.next=8;break}return a({username:t}),x((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{exists:"User with such name already exists. Please sign up with another name."})})),e.abrupt("return",!0);case 8:return x((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{exists:null})})),e.abrupt("return",!1);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return{formValue:n,authValue:i,isLoading:d,validationError:f,isSuccess:N,onChangeInputHandler:function(e){e.preventDefault();var t=e.target.value,r=e.target.name;f.exists&&x((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{exists:null})}));var c=function(e,t,n){return"username"===e&&(t.trim().length<5||t.trim().length>15)?"Username must be between 5 and 15 characters long.":"password"===e&&(t.trim().length<6||t.trim().length>12)?"Password must be between 6 and 12 characters long.":"rePass"===e&&t!==n?"Passwords don't match.":null}(r,t,n.password);x((function(e){return Object(Re.a)(Object(Re.a)({},e),{},Object(qe.a)({},r,c))})),c||a((function(e){return Object(Re.a)(Object(Re.a)({},e),{},Object(qe.a)({},r,t))}))},onSubmitUserRegisterHandler:function(e){e.preventDefault();var t=new FormData(e.target),n={username:t.get("username"),password:t.get("password"),rePass:t.get("rePass")};function r(){return(r=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j(!0),e.next=4,w(n.username);case 4:if(!e.sent){e.next=8;break}return j(!1),e.abrupt("return");case 8:return e.next=10,ct.register(n);case 10:t=e.sent,o(t),j(!1),k(!0),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}f.username||f.password||f.rePass||""!==n.username&&""!==n.password&&""!==n.rePass&&function(){r.apply(this,arguments)}()},onSubmitUserLoginHandler:function(e){e.preventDefault();var t=new FormData(e.target),n={username:t.get("username"),password:t.get("password")};f.username||f.password||""!==n.username&&""!==n.password&&ct.login(n).then((function(e){j(!0),o(e),j(!1),k(!0)})).catch((function(e){"Invalid username/password."!==e.message||x((function(t){return Object(Re.a)(Object(Re.a)({},t),{},{credentials:e.message})}))}))}}},it=function(){var e=Object(u.h)(),t=Object(r.useContext)(l).login,n=st(),a=n.authValue,c=n.isLoading,s=n.validationError,i=n.isSuccess,o=n.onChangeInputHandler,j=n.onSubmitUserLoginHandler;return Object(r.useEffect)((function(){i&&(t(a),e("/home",{replace:!0}))}),[i]),c?Object(d.jsx)(fe,{children:Object(d.jsx)(le,{})}):Object(d.jsxs)(fe,{children:[Object(d.jsx)(Ke,{title:"Login"}),Object(d.jsx)("div",{className:"signin-section-wrapper",children:Object(d.jsxs)("div",{className:"signin-section",children:[Object(d.jsxs)("div",{className:"signin-section-info",children:[Object(d.jsx)("h2",{children:"Happy "}),Object(d.jsx)("i",{className:"fas fa-users"}),Object(d.jsx)("h2",{children:"to have you here."})]}),Object(d.jsx)("form",{action:"#",method:"POST",className:"signup-form",onSubmit:j,children:Object(d.jsxs)("ul",{className:"no-bullet",children:[Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{htmlFor:"username"}),Object(d.jsx)("input",{type:"text",className:"input-fields",id:"username",name:"username",placeholder:"Username",onChange:o}),s.username&&Object(d.jsx)(We,{message:s.username})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{htmlFor:"password"}),Object(d.jsx)("input",{type:"password",className:"input-fields",id:"password",name:"password",placeholder:"Password",onChange:o}),s.password&&Object(d.jsx)(We,{message:s.password})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("input",{type:"submit",className:"join-btn",name:"join",alt:"Join",value:"Join"}),s.credentials&&Object(d.jsx)(We,{message:s.credentials})]})]})})]})})]})},ot=(n(53),function(){var e=Object(r.useContext)(l).logout,t=Object(u.h)();return Object(d.jsxs)(fe,{children:[Object(d.jsx)("h1",{className:"page-title-logout",children:"Logout"}),Object(d.jsx)("div",{className:"signout-section-wrapper",children:Object(d.jsxs)("div",{className:"signout-section",children:[Object(d.jsxs)("div",{className:"signout-section-text",children:[Object(d.jsx)("h2",{children:"You are about to unsubscribe  "}),Object(d.jsx)("h3",{children:">>> READ ALOUD <<<"})]}),Object(d.jsx)("input",{type:"submit",className:"logout-btn",onClick:function(n){ct.logout().then((function(){e(),t("/home",{replace:!0})}))},value:"Confirm"})]})})]})}),ut=(n(54),!0),lt=!0,dt={criteria:null,search:null},jt=function(e){var t=Object(r.useState)({all:!0}),n=Object(O.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),i=Object(O.a)(s,2),o=i[0],u=i[1],l=Object(r.useState)({counter:1,perPage:2,totalPages:0,count:0}),d=Object(O.a)(l,2),j=d[0],b=d[1],m=Object(r.useState)(!1),f=Object(O.a)(m,2),x=f[0],v=f[1],g=function(){var t=Object(p.a)(h.a.mark((function t(){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v(!0),n=0,!a.all){t.next=6;break}return t.next=5,ee();case 5:n=t.sent;case 6:if(!a.myEvents){t.next=10;break}return t.next=9,se(e);case 9:n=t.sent;case 10:if(!a.active){t.next=14;break}return t.next=13,ne();case 13:n=t.sent;case 14:if(!a.cancelled){t.next=18;break}return t.next=17,ae();case 17:n=t.sent;case 18:(r=Math.ceil(n/j.perPage))<=1&&(ut=!0,lt=!0),r>1&&(ut=!1),b((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{count:n,totalPages:r})})),v(!1);case 23:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Object(p.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v(!0),n=[],!a.all){t.next=6;break}return t.next=5,$(j);case 5:n=t.sent;case 6:if(!a.myEvents){t.next=10;break}return t.next=9,ce(e,j);case 9:n=t.sent;case 10:if(!a.active){t.next=14;break}return t.next=13,te(j);case 13:n=t.sent;case 14:if(!a.cancelled){t.next=18;break}return t.next=17,re(j);case 17:n=t.sent;case 18:u(n),v(!1);case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{counter:1})})),c({myEvents:e}),dt={criteria:e+" profile",search:"events"};case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{counter:1})})),c({all:!0}),dt.criteria=null;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{counter:1})})),c({active:!0}),dt={criteria:"active",search:"events"};case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{counter:1})})),c({cancelled:!0}),dt={criteria:"cancelled",search:"events"};case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{query:a,events:o,pagination:j,isLoading:x,searchMessage:dt,isDisabledIncreaseButton:ut,isDisabledDecreaseButton:lt,decreaseCounter:function(){var e=j.counter-1;1===e&&(lt=!0),ut=!1,b((function(t){return Object(Re.a)(Object(Re.a)({},t),{},{counter:e})}))},increaseCounter:function(){var e=j.counter+1;e>=j.totalPages&&(ut=!0),lt=!1,b((function(t){return Object(Re.a)(Object(Re.a)({},t),{},{counter:e})}))},onClickMyEventsHandler:k,onClickAllEventsHandler:w,onClickActiveEventsHandler:y,onClickCancelledEventsHandler:E,requestCountHandler:g,requestDataHandler:N}},bt=function(){var e=Object(r.useContext)(l),t=e.user,n=e.isAuthenticated,a=jt(t.username),c=a.query,s=a.events,i=a.pagination,o=a.isLoading,u=a.searchMessage,j=a.isDisabledIncreaseButton,b=a.isDisabledDecreaseButton,m=a.decreaseCounter,h=a.increaseCounter,p=a.onClickMyEventsHandler,O=a.onClickAllEventsHandler,f=a.onClickActiveEventsHandler,x=a.onClickCancelledEventsHandler,v=a.requestCountHandler,g=a.requestDataHandler;Object(r.useEffect)((function(){v()}),[c]),Object(r.useEffect)((function(){i.count>0&&g()}),[i]);var N=Object(d.jsx)("div",{className:"search-my-events",children:Object(d.jsxs)("div",{className:"search-my-events-icon",children:[Object(d.jsx)("i",{className:"far fa-calendar-check"}),Object(d.jsx)("span",{className:"search-my-events-action",onClick:p,children:"MY EVENTS"})]})}),k=Object(d.jsx)("div",{className:"search-all-events",children:Object(d.jsxs)("div",{className:"search-all-events-icon",children:[Object(d.jsx)("i",{className:"far fa-calendar-check"}),Object(d.jsx)("span",{className:"search-all-events-action",onClick:O,children:"ALL EVENTS"})]})}),w=Object(d.jsx)("div",{className:"search-all-events",children:Object(d.jsxs)("div",{className:"search-all-events-icon",children:[Object(d.jsx)("i",{className:"far fa-calendar-check"}),Object(d.jsx)("span",{className:"search-all-events-action",onClick:f,children:"ACTIVE EVENTS"})]})}),y=Object(d.jsx)("div",{className:"search-all-events",children:Object(d.jsxs)("div",{className:"search-all-events-icon",children:[Object(d.jsx)("i",{className:"far fa-calendar-check"}),Object(d.jsx)("span",{className:"search-all-events-action",onClick:x,children:"CANCELLED EVENTS"})]})}),E=Object(d.jsxs)(d.Fragment,{children:[c.all&&Object(d.jsx)("p",{className:"search-message",children:"Latest events..."}),!c.all&&u.criteria&&Object(d.jsxs)("p",{className:"search-message",children:["Found \xa0 ",Object(d.jsx)("strong",{children:i.count})," \xa0 search results for \xa0 ",Object(d.jsx)("strong",{children:u.search})," \xa0 in  \xa0",Object(d.jsx)("strong",{children:u.criteria})," \xa0"]}),Object(d.jsxs)("div",{className:"events-container search",children:[Object(d.jsx)("button",{className:"prev-events",disabled:b,onClick:m,children:"\u276e"}),Object(d.jsx)("div",{className:"events-inner-container",children:s.map((function(e){return Object(d.jsx)(Te,{id:e.id,imageUrl:e.imageUrl,name:e.name,createdAt:e.createdAt,date:e.date,status:e.status},e.id)}))}),Object(d.jsx)("button",{className:"next-events",disabled:j,onClick:h,children:"\u276f"})]}),Object(d.jsxs)("p",{className:"search-pages",children:[0===i.totalPages?i.counter-1:i.counter,"/",i.totalPages]})]});return Object(d.jsxs)(fe,{children:[Object(d.jsx)(Ke,{title:"EVENTS"}),Object(d.jsxs)("div",{className:"search-events",children:[k,w,y,n&&N]}),Object(d.jsx)("div",{className:"all-events-container",children:o?Object(d.jsx)(le,{}):E})]})},mt=(n(55),n(56),a.a.createContext({})),ht=function(){var e=Object(r.useContext)(mt),t=e.notification,n=e.handleNotification;return t.show?Object(d.jsxs)("div",{className:"notification-message",children:[Object(d.jsx)("p",{className:"notification-message-text",children:t.message}),Object(d.jsxs)("div",{className:"notification-message-buttons",children:[Object(d.jsx)("button",{onClick:function(){return n("confirm")},className:"confirm",children:"CONFIRM"}),Object(d.jsx)("button",{onClick:function(){return n("cancel")},className:"cancel",children:"CANCEL"})]})]}):null},pt=(n(57),function(e){var t=e.onClickRemoveBook,n=e.userId,r=e.bookId,a=e.imageUrl,c=e.title,s=e.author;return Object(d.jsxs)("div",{className:"book-card-lite",children:[Object(d.jsx)("span",{className:"book-card-lite-img",children:Object(d.jsx)("img",{src:a||ve,alt:"Book_cover"})}),Object(d.jsxs)("div",{className:"book-card-lite-content",children:[Object(d.jsxs)("div",{className:"book-card-lite-content-text",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{className:"book-card-lite-content-heading",children:"Title: "}),c]}),Object(d.jsxs)("p",{children:[" ",Object(d.jsx)("span",{className:"book-card-lite-content-heading",children:" Author: "}),s]})]}),Object(d.jsxs)("div",{className:"book-card-lite-content-actions",children:[Object(d.jsx)(o.b,{className:"details-link-lite",to:"/books/".concat(r),children:"VIEW"}),Object(d.jsx)("span",{className:"slash-span",children:"/"}),Object(d.jsx)(o.b,{className:"delete-link-lite",to:"/my-page/".concat(n,"/book-remove/").concat(r),onClick:t,children:"REMOVE"})]})]})]})}),Ot=(n(58),function(e){var t=e.onClickSignoutEvent,n=e.eventId,r=e.imageUrl,a=e.name,c=e.date,s=e.status;return Object(d.jsxs)("div",{className:"event-card-lite",children:[Object(d.jsx)("span",{className:"event-card-lite-img",children:Object(d.jsx)("img",{src:r||ge,alt:"event_cover"})}),Object(d.jsxs)("div",{className:"event-card-lite-content",children:[Object(d.jsxs)("div",{className:"event-card-lite-content-text",children:[Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{className:"event-card-lite-content-heading",children:"Status: "}),s]}),Object(d.jsxs)("p",{children:[" ",Object(d.jsx)("span",{className:"event-card-lite-content-heading date",children:" Date: "}),c]}),Object(d.jsxs)("p",{children:[Object(d.jsx)("span",{className:"event-card-lite-content-heading",children:"Topic: "}),a]})]}),Object(d.jsxs)("div",{className:"book-card-lite-content-actions",children:[Object(d.jsx)(o.b,{className:"details-link-lite",to:"/events/".concat(n),children:"VIEW"}),Object(d.jsx)("span",{className:"slash-span",children:"/"}),Object(d.jsx)(o.b,{className:"delete-link-lite",to:"/my-page/".concat(n,"/event-remove/").concat(n),onClick:t,children:"SIGNOUT"})]})]})]})}),ft=1,xt=1,vt=function(){var e=Object(u.i)().userId,t=Object(r.useContext)(l).user,n=Object(r.useContext)(mt),a=n.notification,c=n.showNotification,s=Object(r.useState)({reading:!1,events:!1}),i=Object(O.a)(s,2),j=i[0],b=i[1],m=Object(r.useState)(!1),f=Object(O.a)(m,2),x=f[0],v=f[1],g=Object(r.useState)({all:[],view:[]}),N=Object(O.a)(g,2),k=N[0],w=N[1],y=Object(r.useState)({all:[],view:[]}),E=Object(O.a)(y,2),S=E[0],C=E[1],I=Object(r.useState)({reading:0,events:0}),B=Object(O.a)(I,2),U=B[0],D=B[1],P=Object(r.useState)({increase:!0,decrease:!0}),T=Object(O.a)(P,2),L=T[0],A=T[1],H=Object(r.useState)({increase:!0,decrease:!0}),q=Object(O.a)(H,2),R=q[0],F=q[1];Object(r.useEffect)((function(){var n=function(){var n=Object(p.a)(h.a.mark((function n(){var r,a,c,s;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return v(!0),n.next=3,ct.getUserReadingList(e);case 3:return r=n.sent,n.next=6,M(t.username);case 6:a=n.sent,v(!1),c=Math.ceil(r.length/3),s=Math.ceil(a.length/3),D({reading:c,events:s}),A(c>1?{increase:!1,decrease:!0}:{increase:!0,decrease:!0}),ft=1,F(s>1?function(e){return Object(Re.a)(Object(Re.a)({},e),{},{increase:!1})}:{increase:!0,decrease:!0}),xt=1,w((function(e){return{all:r,view:r.slice(0,3)}})),C((function(e){return{all:a,view:a.slice(0,3)}}));case 17:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e,j]);var V=function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c("You are above to remove this book from your reading list!",n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q=function(){var e=Object(p.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c("You are above to remove this event from your event list!",n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){a.message.includes("book")&&"confirm"===a.result&&ct.removeBookFromUserReadingList(e,a.objectId).then((function(e){b((function(t){return{reading:e,events:!1}}))})),a.message.includes("event")&&"confirm"===a.result&&_(t.username,a.objectId).then((function(e){b((function(t){return{reading:!1,events:e}}))}))}),[a.result]),x?Object(d.jsx)(fe,{children:Object(d.jsx)(le,{})}):Object(d.jsxs)(fe,{children:[Object(d.jsx)(ht,{}),Object(d.jsx)(Ke,{title:t.username.toLocaleUpperCase()+" 's page"}),Object(d.jsxs)("div",{className:"my-page-container",children:[Object(d.jsxs)("div",{className:"my-page-navigation",children:[Object(d.jsxs)(o.b,{className:"create-book-link",to:"/books/create",children:[Object(d.jsx)("i",{className:"fas fa-plus"}),"POST NEW BOOK"]}),Object(d.jsxs)(o.b,{className:"create-event-link",to:"/events/create",children:[Object(d.jsx)("i",{className:"fas fa-plus"}),"POST NEW EVENT"]})]}),Object(d.jsxs)("div",{className:"my-page-events-list",children:[Object(d.jsx)("h3",{className:"my-page-events-list-title",children:"MY EVENT SCHEDULE"}),S.view.length>0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"my-page-reading-list-items-container",children:[Object(d.jsx)("button",{className:"prev",disabled:R.decrease,onClick:function(){xt--,F(1===xt?function(e){return{increase:!1,decrease:!0}}:function(e){return{increase:!1,decrease:!1}}),C((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{view:S.all.slice(3*xt-3,3*xt)})}))},children:"\u276e"}),Object(d.jsx)("div",{className:"my-page-reading-list-items",children:S.view.map((function(e){return Object(d.jsx)(Ot,{onClickSignoutEvent:function(t){return Q(t,e.subscriptionId)},eventId:e.eventId,imageUrl:e.imageUrl,date:e.date,name:e.name,status:e.status},e.subscriptionId)}))}),Object(d.jsx)("button",{className:"next",disabled:R.increase,onClick:function(){++xt>=U.events?F((function(e){return{increase:!0,decrease:!1}})):F((function(e){return{increase:!1,decrease:!1}})),C((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{view:S.all.slice(3*xt-3,3*xt)})}))},children:"\u276f"})]}),Object(d.jsxs)("p",{children:[xt,"/",U.events]})]}):Object(d.jsx)("p",{className:"empty-reading-list",children:"You have not added anything to your event list yet."})]}),Object(d.jsxs)("div",{className:"my-page-reading-list",children:[Object(d.jsx)("h3",{className:"my-page-reading-list-title",children:"MY READING LIST"}),k.view.length>0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"my-page-reading-list-items-container",children:[Object(d.jsx)("button",{className:"prev",disabled:L.decrease,onClick:function(){ft--,A(1===ft?function(e){return{increase:!1,decrease:!0}}:function(e){return{increase:!1,decrease:!1}}),w((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{view:k.all.slice(3*ft-3,3*ft)})}))},children:"\u276e"}),Object(d.jsx)("div",{className:"my-page-reading-list-items",children:k.view.map((function(t){return Object(d.jsx)(pt,{onClickRemoveBook:function(e){return V(e,t.id)},userId:e,bookId:t.id,imageUrl:t.imageUrl,title:t.title,author:t.author},t.id)}))}),Object(d.jsx)("button",{className:"next",disabled:L.increase,onClick:function(){++ft>=U.reading?A((function(e){return{increase:!0,decrease:!1}})):A((function(e){return{increase:!1,decrease:!1}})),w((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{view:k.all.slice(3*ft-3,3*ft)})}))},children:"\u276f"})]}),Object(d.jsxs)("p",{children:[ft,"/",U.reading]})]}):Object(d.jsx)("p",{className:"empty-reading-list",children:"You have not added anything to your reading list yet."})]})]})]})},gt=(n(59),function(){var e=Object(u.h)(),t=Object(r.useContext)(l).login,n=st(),a=n.formValue,c=n.authValue,s=n.isLoading,i=n.validationError,o=n.isSuccess,j=n.onChangeInputHandler,b=n.onSubmitUserRegisterHandler;return Object(r.useEffect)((function(){o&&(t(c),e("/home",{replace:!0}))}),[o]),s?Object(d.jsx)(fe,{children:Object(d.jsx)(le,{})}):Object(d.jsxs)(fe,{children:[Object(d.jsx)(Ke,{title:"Register"}),Object(d.jsx)("div",{className:"signup-section-wrapper",children:Object(d.jsxs)("div",{className:"signup-section",children:[Object(d.jsxs)("div",{className:"signup-section-info",children:[Object(d.jsx)("h2",{children:"Welcome "}),Object(d.jsx)("i",{className:"fas fa-users"}),Object(d.jsx)("h2",{children:"to our community."})]}),Object(d.jsx)("form",{action:"#",method:"POST",className:"signup-form",onSubmit:b,children:Object(d.jsxs)("ul",{className:"no-bullet",children:[Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{htmlFor:"username"}),Object(d.jsx)("input",{type:"text",className:"input-fields",id:"username",name:"username",placeholder:"Username",defaultValue:a.username,onChange:j}),i.username&&Object(d.jsx)(We,{message:i.username}),i.exists&&Object(d.jsx)(We,{message:i.exists})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{htmlFor:"password"}),Object(d.jsx)("input",{type:"password",className:"input-fields",id:"password",name:"password",placeholder:"Password",defaultValue:a.password,onChange:j}),i.password&&Object(d.jsx)(We,{message:i.password})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{htmlFor:"rePass"}),Object(d.jsx)("input",{type:"password",className:"input-fields",id:"rePass",name:"rePass",placeholder:"Repeat password",defaultValue:a.rePass,onChange:j}),i.rePass&&Object(d.jsx)(We,{message:i.rePass})]}),Object(d.jsx)("li",{children:Object(d.jsx)("input",{type:"submit",className:"join-btn",name:"join",alt:"Join",value:"Join"})})]})})]})})]})}),Nt=(n(60),function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v,(r=new FormData).append("file",t),r.append("upload_preset","ReadAloud"),e.next=6,fetch(n,{method:"POST",body:r});case 6:return a=e.sent,e.next=9,a.json();case 9:return c=e.sent,e.abrupt("return",c.secure_url);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),kt=Nt,wt=function(e,t){var n=Object(r.useState)(!1),a=Object(O.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(!1),o=Object(O.a)(i,2),u=o[0],l=o[1],d=Object(r.useState)(!1),j=Object(O.a)(d,2),b=j[0],m=j[1],h=Object(r.useState)(ye),p=Object(O.a)(h,2),f=p[0],x=p[1],v=Object(r.useState)(!1),g=Object(O.a)(v,2),N=g[0],k=g[1],w=Object(r.useState)(Ee),y=Object(O.a)(w,2),E=y[0],B=y[1],U=Object(r.useState)(ve),D=Object(O.a)(U,2),P=D[0],T=D[1],L=Object(r.useCallback)((function(t){s(!0),I(t).then((function(t){x(t),T(t.imageUrl),s(!1),t.creator!==e.username&&k(!0)})).catch((function(e){return console.log(e)}))}),[]),A=function(){B(Ee),s(!1),m(!1),x(ye),T(ve)};return{bookValue:f,notCreator:N,isLoading:c,isImageLoading:u,isSuccess:b,validationError:E,imagePreview:P,onChangeImageHandler:function(e){var t=e.target.files[0],n=Fe("imageUrl",t||"");B((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{image:n})})),n||(t?(l(!0),kt(t).then((function(e){l(!1),T(e)})).catch((function(e){console.log(e)}))):T(ve))},onBlurInputHandler:function(e){var t=e.target.value,n=e.target.name;E.required&&B((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:null})}));var r=Fe(n,t);B((function(e){return Object(Re.a)(Object(Re.a)({},e),{},Object(qe.a)({},n,r))}))},onChangeInputHandler:function(e){var t=e.target.value,n=e.target.name;E.required&&B((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:null})}));var r=Fe(n,t);B((function(e){return Object(Re.a)(Object(Re.a)({},e),{},Object(qe.a)({},n,r))}))},onSubmitBookCreateHandler:function(e){e.preventDefault(),E.required&&B((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:null})}));var t=new FormData(e.target),n={title:t.get("title"),author:t.get("author"),description:t.get("description"),image:P};if(!(E.title||E.description||E.image||E.author))if(""!==n.title&&""!==n.description&&""!==n.author){var r=xe.reduce((function(e,n){return t.get(n)&&e.push(n),e}),[]);n.category=r,S(n).then((function(e){s(!0),x((function(t){return Object(Re.a)(Object(Re.a)({},t),{},{res:e})})),m(!0)})).catch((function(e){return console.log(e)})),A()}else B((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:"*Title, author and description are required."})}))},setInitialBookEditValue:L,onSubmitBookEditHandler:function(e){e.preventDefault(),E.required&&B((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:null})}));var n=new FormData(e.target),r={title:n.get("title"),author:n.get("author"),description:n.get("description"),category:t,image:P};E.title||E.description||E.image||E.author||(""!==r.title&&""!==r.description&&""!==r.author?(C(f.id,r).then((function(e){s(!0),x((function(t){return Object(Re.a)(Object(Re.a)({},t),{},{res:e})})),m(!0)})).catch((function(e){return console.log(e)})),A()):B((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:"*Title, author and description are required."})})))}}},yt=(n(61),function(e){var t=e.selectedCategories,n=xe,r=function(e){var n=t.indexOf(e.target.name);-1===n?t.push(e.target.name):t.splice(n,1)};return Object(d.jsx)("div",{className:"category-container",children:n.map((function(e,t){return Object(d.jsxs)("label",{className:"checkbox-label",children:[e,Object(d.jsx)("input",{className:"category-input",type:"checkbox",id:t,name:e,onChange:r}),Object(d.jsx)("span",{className:"checkmark"})]},e)}))})}),Et=function(){var e=Object(u.h)(),t=Object(r.useContext)(l).user,n=Object(u.i)().bookId,a=[],c=wt(t,a),s=c.bookValue,i=c.notCreator,o=c.isLoading,j=c.isImageLoading,b=c.isSuccess,m=c.validationError,h=c.imagePreview,p=c.onChangeImageHandler,O=c.onChangeInputHandler,f=c.onSubmitBookEditHandler,x=c.setInitialBookEditValue;return Object(r.useEffect)((function(){b&&e("/books")}),[b,e]),Object(r.useEffect)((function(){x(n)}),[n]),Object(r.useEffect)((function(){i&&e("/home")}),[i,e]),o?Object(d.jsx)(fe,{children:Object(d.jsx)(le,{})}):Object(d.jsx)(fe,{children:Object(d.jsxs)("div",{className:"book-form-container",children:[Object(d.jsx)("div",{className:"book-form-title",children:Object(d.jsxs)("h3",{children:[Object(d.jsx)("i",{className:"fa fa-arrow-right"}),"Edit book"]})}),Object(d.jsxs)("form",{className:"book-form-body",onSubmit:f,children:[Object(d.jsxs)("div",{className:"book-form-body-main",children:[Object(d.jsxs)("div",{className:"title",children:[Object(d.jsx)("input",{className:"title-input",type:"text",name:"title",id:"title",defaultValue:s.title,onChange:O}),Object(d.jsxs)("label",{htmlFor:"title",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Title"]}),m.title&&Object(d.jsx)(We,{message:m.title})]}),Object(d.jsxs)("div",{className:"author",children:[Object(d.jsx)("input",{className:"author-input",type:"text",name:"author",id:"author",defaultValue:s.author,onChange:O}),Object(d.jsxs)("label",{htmlFor:"title",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Author"]}),m.author&&Object(d.jsx)(We,{message:m.author})]}),Object(d.jsx)("div",{className:"default-image",children:j?Object(d.jsx)(le,{}):Object(d.jsx)("img",{src:h,alt:"Book_Image"})}),Object(d.jsxs)("div",{className:"image",children:[Object(d.jsx)("input",{className:"image-input",type:"file",accept:"image/*",lang:"en",name:"imageUrl",id:"imageUrl",onChange:p}),Object(d.jsxs)("label",{htmlFor:"image",children:[Object(d.jsx)("i",{className:"fas fa-image"}),"Image"]}),m.image&&Object(d.jsx)(We,{message:m.image})]})]}),Object(d.jsxs)("div",{className:"book-form-body-details",children:[Object(d.jsxs)("div",{className:"description",children:[Object(d.jsx)("textarea",{className:"description-input",type:"text",name:"description",id:"description",cols:"50",rows:"12",defaultValue:s.description,onChange:O}),Object(d.jsxs)("label",{htmlFor:"description",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Description"]}),m.description&&Object(d.jsx)(We,{message:m.description})]}),Object(d.jsx)(yt,{selectedCategories:a}),Object(d.jsx)("p",{className:"book-form-body-details-remark",children:"*The categories you choose will replace previous."})]}),Object(d.jsxs)("div",{className:"book-form-footer",children:[Object(d.jsxs)("div",{className:"recommend",children:[Object(d.jsx)("p",{children:"Recommended by"}),Object(d.jsx)("h3",{children:t.username})]}),Object(d.jsx)("div",{className:"action",children:Object(d.jsx)("button",{className:"action-btn",type:"submit",children:"Edit book"})}),m.required&&Object(d.jsx)(We,{message:m.required})]})]})]})})},St=(n(62),function(e){var t=Object(r.useState)(!1),n=Object(O.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(O.a)(s,2),o=i[0],u=i[1],l=Object(r.useState)(!1),d=Object(O.a)(l,2),j=d[0],b=d[1],m=Object(r.useState)(Ie),f=Object(O.a)(m,2),x=f[0],v=f[1],g=Object(r.useState)(Se),N=Object(O.a)(g,2),k=N[0],w=N[1],y=Object(r.useState)(!1),E=Object(O.a)(y,2),S=E[0],C=E[1],I=Object(r.useState)(Ce),B=Object(O.a)(I,2),U=B[0],D=B[1],P=Object(r.useState)(ge),T=Object(O.a)(P,2),L=T[0],A=T[1],H=Object(r.useCallback)((function(t){c(!0),X(t).then((function(t){w(t),v(t.location),A(t.imageUrl),c(!1),t.creator!==e.username&&C(!0)})).catch((function(e){return console.log(e)}))}),[]),q=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Z(k.id);case 3:w((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{status:"cancelled"})})),b(!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){D(Ce),c(!1),b(!1),v(Ie),w(Se),A(ge)};return{eventValue:k,notCreator:S,isLoading:a,isImageLoading:o,isSuccess:j,validationError:U,imagePreview:L,getGeoPoint:function(e){v(e)},onChangeImageHandler:function(e){var t=e.target.files[0],n=Ve("imageUrl",t||"");D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{image:n})})),n||(t?(u(!0),kt(t).then((function(e){u(!1),A(e)})).catch((function(e){console.log(e)}))):A(ge))},onBlurInputHandler:function(e){var t=e.target.value,n=e.target.name;U.required&&D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:null})}));var r=Ve(n,t);D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},Object(qe.a)({},n,r))}))},onChangeInputHandler:function(e){var t=e.target.value,n=e.target.name;U.required&&D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:null})}));var r=Ve(n,t);D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},Object(qe.a)({},n,r))}))},onSubmitEventCreateHandler:function(e){e.preventDefault(),U.required&&D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:null})}));var t=new FormData(e.target),n=Ct(t);n.image=L,n.status="active",n.location=x;var r=Ve("date",n.date,t.get("month"));D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{date:r})})),U.name||U.description||U.image||r||(""!==n.name&&""!==n.description&&JSON.stringify(n.location)!==JSON.stringify(Ie)?(W(n).then((function(e){c(!0),w((function(t){return Object(Re.a)(Object(Re.a)({},t),{},{res:e})})),b(!0)})).catch((function(e){return console.log(e)})),R()):D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:"*Topic, description, date and location are required."})})))},setInitialEventEditValue:H,onSubmitEventEditHandler:function(e){e.preventDefault(),U.required&&D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:null})}));var t=new FormData(e.target),n=Ct(t);n.image=L,n.location=x;var r=Ve("date",n.date,t.get("month"));D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{date:r})})),U.name||U.description||U.image||r||(""!==n.name&&""!==n.description?(z(k.id,n).then((function(e){c(!0),w((function(t){return Object(Re.a)(Object(Re.a)({},t),{},{res:e})})),b(!0)})).catch((function(e){return console.log(e)})),R()):D((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{required:"*Topic, description, date and location are required."})})))},onClickCancelEventHandler:q,eventFormReset:R}}),Ct=function(e){var t=e.get("year"),n=Number(e.get("month"))-1,r=e.get("day"),a=e.get("hour"),c=e.get("minute"),s=new Date(t,n,r,a,c,0);return{name:e.get("name"),location:e.get("location"),description:e.get("description"),date:s,status:e.get("status")||"active"}},It=n(72),Bt=n(73),Ut=n(74),Dt=n(75),Pt=n(76),Tt=(n(63),function(e){var t=e.getGeoPoint,n=Object(r.useState)(Ie),a=Object(O.a)(n,2),c=a[0],s=a[1];return Object(It.a)("click",(function(e){if(!t)return null;var n=[e.latlng.lat,e.latlng.lng];t(n),s(n)})),Object(d.jsx)(Bt.a,{position:c,children:Object(d.jsxs)(Ut.a,{children:["New Location ",Object(d.jsx)("br",{}),c[0].toString().slice(0,7),", ",c[1].toString().slice(0,7)]})})}),Lt=function(e){var t=e.getGeoPoint,n=e.center,r=e.message;return Object(d.jsx)("div",{className:"map-event",children:Object(d.jsxs)(Dt.a,{center:n||Be,zoom:8,scrollWheelZoom:!1,children:[Object(d.jsx)(Pt.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(d.jsx)(Bt.a,{position:n||Be,children:Object(d.jsx)(Ut.a,{children:r||"Sofia"})}),Object(d.jsx)(Tt,{getGeoPoint:t})]})})},At=function(){var e=Object(u.h)(),t=Object(r.useContext)(l).user,n=Object(u.i)().eventId,a=St(t),c=a.eventValue,s=a.notCreator,i=a.isLoading,j=a.isImageLoading,b=a.validationError,m=a.imagePreview,h=a.isSuccess,p=a.getGeoPoint,O=a.onChangeImageHandler,f=a.onChangeInputHandler,x=a.onSubmitEventEditHandler,v=a.setInitialEventEditValue,g=a.onClickCancelEventHandler;return Object(r.useEffect)((function(){h&&e("/events")}),[h,e]),Object(r.useEffect)((function(){v(n)}),[n]),Object(r.useEffect)((function(){s&&e("/home")}),[s,e]),i?Object(d.jsx)(fe,{children:Object(d.jsx)(le,{})}):Object(d.jsx)(fe,{children:Object(d.jsxs)("div",{className:"event-form-container",children:[Object(d.jsx)("div",{className:"event-form-title",children:Object(d.jsxs)("h3",{children:[Object(d.jsx)("i",{className:"fa fa-arrow-right"}),"Edit event"]})}),Object(d.jsxs)("form",{className:"event-form-body",onSubmit:x,children:[Object(d.jsxs)("div",{className:"event-form-body-main",children:[Object(d.jsxs)("div",{className:"event-name",children:[Object(d.jsx)("input",{className:"event-name-input",type:"text",name:"name",id:"name",defaultValue:c.name,onChange:f}),Object(d.jsxs)("label",{htmlFor:"name",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Topic"]}),b.name&&Object(d.jsx)(We,{message:b.name})]}),Object(d.jsxs)("div",{className:"event-date edit",children:[Object(d.jsx)("input",{className:"event-date-input-box",type:"number",name:"year",id:"year",min:2021,max:2050,placeholder:"YYYY",defaultValue:c.dateObj.year}),Object(d.jsx)("input",{className:"event-date-input-box",type:"number",name:"month",id:"month",min:1,max:12,placeholder:"MM",defaultValue:c.dateObj.month}),Object(d.jsx)("input",{className:"event-date-input-box",type:"number",name:"day",id:"day",min:1,max:31,placeholder:"DD",defaultValue:c.dateObj.day}),Object(d.jsx)("input",{className:"event-date-input-box",type:"number",name:"hour",id:"hour",min:0,max:24,placeholder:"HH",defaultValue:c.dateObj.hour}),Object(d.jsx)("input",{className:"event-date-input-box",type:"number",name:"minute",id:"minute",min:0,max:59,placeholder:"MM",defaultValue:c.dateObj.minute}),Object(d.jsxs)("label",{htmlFor:"date",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Date and time"]})]}),b.date&&Object(d.jsx)(We,{message:b.date}),Object(d.jsx)("div",{className:"event-status",children:"active"===c.status?Object(d.jsxs)("span",{className:"status-active",children:[Object(d.jsx)("i",{className:"fas fa-chart-line"}),c.status]}):Object(d.jsxs)("span",{className:"status-cancelled",children:[Object(d.jsx)("i",{className:"fas fa-ban"}),c.status]})}),Object(d.jsx)("div",{className:"event-default-image",children:j?Object(d.jsx)(le,{}):Object(d.jsx)("img",{src:m,alt:"Event_Image"})}),Object(d.jsxs)("div",{className:"event-image",children:[Object(d.jsx)("input",{className:"event-image-input",type:"file",accept:"image/*",lang:"en",name:"imageUrl",id:"imageUrl",onChange:O}),Object(d.jsxs)("label",{htmlFor:"image",children:[Object(d.jsx)("i",{className:"fas fa-image"}),"Image"]}),b.image&&Object(d.jsx)(We,{message:b.image})]})]}),Object(d.jsxs)("div",{className:"event-form-body-details",children:[Object(d.jsxs)("div",{className:"event-description",children:[Object(d.jsx)("textarea",{className:"event-description-input",type:"text",name:"description",id:"description",cols:"50",rows:"12",defaultValue:c.description,onChange:f}),Object(d.jsxs)("label",{htmlFor:"description",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Description"]}),b.description&&Object(d.jsx)(We,{message:b.description})]}),Object(d.jsx)(Lt,{center:c.location,getGeoPoint:p,message:"Current location"})]}),Object(d.jsxs)("div",{className:"event-edit-form-footer",children:[Object(d.jsx)("div",{className:"event-actions cancel",children:"active"===c.status?Object(d.jsxs)("div",{className:"event-actions-icon",children:[Object(d.jsx)("i",{className:"far fa-calendar-check"}),Object(d.jsx)(o.b,{className:"cancel-event-link",to:"/events/".concat(c.id,"/cancel"),onClick:g,children:"CANCEL EVENT"})]}):null}),Object(d.jsxs)("div",{className:"recommend",children:[Object(d.jsx)("p",{children:"Organised by"}),Object(d.jsx)("h3",{children:t.username})]}),Object(d.jsx)("div",{className:"event-action",children:Object(d.jsx)("button",{className:"event-action-btn",type:"submit",children:"Edit event"})}),b.required&&Object(d.jsx)(We,{message:b.required})]})]})]})})},Ht=(n(64),function(){var e=Object(u.h)(),t=Object(r.useContext)(l).user,n=[],a=wt(t,n),c=a.isLoading,s=a.isImageLoading,i=a.isSuccess,o=a.validationError,j=a.imagePreview,b=a.onChangeImageHandler,m=a.onBlurInputHandler,h=a.onSubmitBookCreateHandler;return Object(r.useEffect)((function(){i&&e("/books")}),[i,e]),c?Object(d.jsx)(fe,{children:Object(d.jsx)(le,{})}):Object(d.jsx)(fe,{children:Object(d.jsxs)("div",{className:"book-form-container",children:[Object(d.jsx)("div",{className:"book-form-title",children:Object(d.jsxs)("h3",{children:[Object(d.jsx)("i",{className:"fa fa-arrow-right"}),"New book"]})}),Object(d.jsxs)("form",{className:"book-form-body",onSubmit:h,children:[Object(d.jsxs)("div",{className:"book-form-body-main",children:[Object(d.jsxs)("div",{className:"title",children:[Object(d.jsx)("input",{className:"title-input",type:"text",name:"title",id:"title",onBlur:m}),Object(d.jsxs)("label",{htmlFor:"title",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Title"]}),o.title&&Object(d.jsx)(We,{message:o.title})]}),Object(d.jsxs)("div",{className:"author",children:[Object(d.jsx)("input",{className:"author-input",type:"text",name:"author",id:"author",onBlur:m}),Object(d.jsxs)("label",{htmlFor:"title",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Author"]}),o.author&&Object(d.jsx)(We,{message:o.author})]}),Object(d.jsx)("div",{className:"default-image",children:s?Object(d.jsx)(le,{}):Object(d.jsx)("img",{src:j,alt:"Book_Image"})}),Object(d.jsxs)("div",{className:"image",children:[Object(d.jsx)("input",{className:"image-input",type:"file",accept:"image/*",lang:"en",name:"imageUrl",id:"imageUrl",onChange:b}),Object(d.jsxs)("label",{htmlFor:"image",children:[Object(d.jsx)("i",{className:"fas fa-image"}),"Image"]}),o.image&&Object(d.jsx)(We,{message:o.image})]})]}),Object(d.jsxs)("div",{className:"book-form-body-details",children:[Object(d.jsxs)("div",{className:"description",children:[Object(d.jsx)("textarea",{className:"description-input",type:"text",name:"description",id:"description",cols:"50",rows:"12",onBlur:m}),Object(d.jsxs)("label",{htmlFor:"description",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Description"]}),o.description&&Object(d.jsx)(We,{message:o.description})]}),Object(d.jsx)(yt,{selectedCategories:n})]}),Object(d.jsxs)("div",{className:"book-form-footer",children:[Object(d.jsxs)("div",{className:"recommend",children:[Object(d.jsx)("p",{children:"Recommended by"}),Object(d.jsx)("h3",{children:t.username})]}),Object(d.jsx)("div",{className:"action",children:Object(d.jsx)("button",{className:"action-btn",type:"submit",children:"Add to books"})}),o.required&&Object(d.jsx)(We,{message:o.required})]})]})]})})}),qt=(n(65),function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new w.Object("Book")).id=t,r=w.Object.extend("BookComment"),(a=new w.Query(r)).include("creator"),a.equalTo("book",n),a.descending("createdAt"),e.prev=7,e.next=10,a.find();case 10:return c=e.sent,s=c.reduce((function(e,t){return e.push(Qt(t)),e}),[]),e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(7),console.error("Error while fetching BookComment",e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}()),Rt=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new w.Object("Event")).id=t,r=w.Object.extend("EventComment"),(a=new w.Query(r)).include("creator"),a.equalTo("event",n),a.descending("createdAt"),e.prev=7,e.next=10,a.find();case 10:return c=e.sent,s=c.reduce((function(e,t){return e.push(Qt(t)),e}),[]),e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(7),console.error("Error while fetching EventComment",e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new w.Object("Book")).id=t,(a=new w.Object("BookComment")).set("text",n),a.set("creator",w.User.current()),a.set("book",r),e.prev=6,e.next=9,a.save();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("Error while creating BookComment: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,n){return e.apply(this,arguments)}}(),Vt=function(){var e=Object(p.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new w.Object("Event")).id=t,(a=new w.Object("EventComment")).set("text",n),a.set("creator",w.User.current()),a.set("event",r),e.prev=6,e.next=9,a.save();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("Error while creating EventComment: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t,n){return e.apply(this,arguments)}}(),Qt=function(e){var t=e.get("creator").get("username"),n=new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"});return{id:e.id,createdAt:n,text:e.get("text"),creator:t}},Yt={id:"",title:"",author:"",description:"",imageUrl:"",rating:0,voted:[],createdAt:"",creator:"",category:[]},Mt=function(e,t,n){var a=Object(r.useState)(Yt),c=Object(O.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(!1),u=Object(O.a)(o,2),l=u[0],d=u[1],j=Object(r.useState)(!1),b=Object(O.a)(j,2),m=b[0],f=b[1],x=Object(r.useState)(!0),v=Object(O.a)(x,2),g=v[0],N=v[1],k=Object(r.useState)([]),w=Object(O.a)(k,2),y=w[0],E=w[1],S=Object(r.useState)(null),C=Object(O.a)(S,2),B=C[0],U=C[1],D=t&&n.username===s.creator;Object(r.useEffect)((function(){function r(){return r=Object(p.a)(h.a.mark((function r(){var a,c,s;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d(!0),r.next=3,I(e);case 3:if(a=r.sent,d(!1),i(a),t&&n.username!==a.creator&&!a.voted.includes(n.userId)&&f(!0),!Boolean(n.username)||n.username===a.creator){r.next=12;break}return r.next=10,ct.checkBookInUserReadingList(n.userId,e);case 10:c=r.sent,N(c);case 12:return r.next=14,qt(e);case 14:s=r.sent,E(s);case 16:case"end":return r.stop()}}),r)}))),r.apply(this,arguments)}!function(){r.apply(this,arguments)}()}),[e,n,t]);var P=function(){var t=Object(p.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.next=3,ct.updateUserReadingList(n.userId,e);case 3:N(!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){var t=Object(p.a)(h.a.mark((function t(n){var r,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=n.target.comment.value,!(a=Ye(r))){t.next=6;break}return U(a),t.abrupt("return");case 6:return B&&U(null),t.next=9,Ft(e,r);case 9:return t.next=11,qt(e);case 11:c=t.sent,E(c),n.target.comment.value="";case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{book:s,isLoading:l,isCreator:D,canVote:m,canAdd:g,comments:y,validationError:B,onClickAddBookHandler:P,onSubmitCommentHandler:T}},Gt=(n(66),function(e){var t=e.userId,n=e.bookId,a=Object(r.useState)(!1),c=Object(O.a)(a,2),s=c[0],i=c[1];return Object(d.jsx)("div",{className:"rating",children:Object(d.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault();var r=new FormData(e.target),a=Array.from(r.values()).reduce((function(e,t){return Number(t)>e&&(e=Number(t)),e}),0);E(t,n,a).then((function(){i(!0)})).catch((function(e){return console.log(e)}))},className:"rating-form",children:[Object(d.jsxs)("div",{className:"stars",children:[Object(d.jsx)("input",{className:"star star-5",id:"star-5",type:"checkbox",name:"5",defaultValue:"5",disabled:s}),Object(d.jsx)("label",{className:"star star-5",htmlFor:"star-5",children:"\u2605"}),Object(d.jsx)("input",{className:"star star-4",id:"star-4",type:"checkbox",name:"4",defaultValue:"4",disabled:s}),Object(d.jsx)("label",{className:"star star-4",htmlFor:"star-4",children:"\u2605"}),Object(d.jsx)("input",{className:"star star-3",id:"star-3",type:"checkbox",name:"3",defaultValue:"3",disabled:s}),Object(d.jsx)("label",{className:"star star-3",htmlFor:"star-3",children:"\u2605"}),Object(d.jsx)("input",{className:"star star-2",id:"star-2",type:"checkbox",name:"2",defaultValue:"2",disabled:s}),Object(d.jsx)("label",{className:"star star-2",htmlFor:"star-2",children:"\u2605"}),Object(d.jsx)("input",{className:"star star-1",id:"star-1",type:"checkbox",name:"1",defaultValue:"1",disabled:s}),Object(d.jsx)("label",{className:"star star-1",htmlFor:"star-1",children:"\u2605"})]}),Object(d.jsx)("button",{type:"submit",disabled:s,className:"rating-btn",children:"click the stars"})]})})}),Jt=(n(67),function(e){var t=e.creator,n=e.text,r=e.createdAt;return Object(d.jsxs)("div",{className:"comment-container",children:[Object(d.jsxs)("div",{className:"comment-author",children:[Object(d.jsx)("i",{className:"fas fa-user-circle"}),Object(d.jsx)("span",{children:t})]}),Object(d.jsx)("p",{className:"comment-date",children:r}),Object(d.jsx)("div",{className:"comment-text",children:n})]})}),_t=function(){var e=Object(r.useContext)(l),t=e.isAuthenticated,n=e.user,a=Object(u.i)().bookId,c=Mt(a,t,n),s=c.book,i=c.isLoading,j=c.isCreator,b=c.canVote,m=c.canAdd,h=c.comments,p=c.validationError,O=c.onClickAddBookHandler,f=c.onSubmitCommentHandler;return i?Object(d.jsx)(fe,{children:Object(d.jsx)(le,{})}):Object(d.jsxs)(fe,{children:[Object(d.jsx)("h1",{children:"Book"}),Object(d.jsxs)("div",{className:"book-details-container",children:[Object(d.jsxs)("div",{className:"book-main",children:[Object(d.jsx)("h4",{className:"book-author",children:s.author}),Object(d.jsx)("h1",{className:"book-title",children:s.title}),Object(d.jsxs)("div",{className:"book-details",children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("i",{className:"far fa-clock"}),s.createdAt]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("i",{className:"far fa-user"}),s.creator]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("i",{className:"far fa-comment-alt"}),h.length]})]}),b?null:Object(d.jsx)(De,{rating:s.rating}),Object(d.jsx)("div",{className:"book-image",children:Object(d.jsx)("img",{src:s.imageUrl?s.imageUrl:ve,alt:"Book_cover"})}),Object(d.jsx)("p",{className:"book-description",children:s.description}),Object(d.jsx)("div",{className:"book-categories",children:s.category.map((function(e){return Object(d.jsxs)("span",{children:[Object(d.jsx)("i",{className:"far fa-circle"}),e]},e)}))})]}),Object(d.jsxs)("div",{className:"book-additional",children:[Object(d.jsx)("div",{className:"book-comments",children:h.length>0?h.map((function(e){return Object(d.jsx)(Jt,{createdAt:e.createdAt,text:e.text,creator:e.creator},e.id)})):Object(d.jsx)("p",{children:"No comments yet... Be the first one to comment!"})}),Object(d.jsx)("div",{className:"book-rating",children:b&&Object(d.jsx)(Gt,{userId:n.userId,bookId:a})}),t?Object(d.jsx)("div",{className:"book-comments-form",children:Object(d.jsxs)("form",{action:"",method:"post",onSubmit:f,children:[Object(d.jsx)("h4",{children:"You can write your comment here:"}),Object(d.jsx)("textarea",{className:"comment-input",name:"comment",id:"comment",cols:"50",rows:"6"}),p&&Object(d.jsx)("p",{className:"comment-error",children:p}),Object(d.jsx)("button",{className:"comment-btn",type:"submit",children:"POST"})]})}):null]}),Object(d.jsxs)("div",{className:"book-actions",children:[Object(d.jsx)("div",{className:"book-actions-icon",children:Object(d.jsx)("i",{className:"far fa-calendar-check"})}),t?j?Object(d.jsx)(o.b,{className:"edit-link",to:"/books/".concat(s.id,"/edit"),children:"EDIT BOOK"}):m?Object(d.jsx)(o.b,{className:"add-to-reading-list-link",to:"/books/".concat(s.id,"/add"),onClick:O,children:"ADD TO YOUR LIST"}):Object(d.jsx)("p",{className:"added-to-reading-list",children:"ADDED TO YOUR LIST"}):Object(d.jsx)(o.b,{className:"join-link",to:"/register",children:"JOIN US"})]})]})]})},Kt=(n(68),function(){var e=Object(u.h)(),t=Object(r.useContext)(l).user,n=St(),a=n.isLoading,c=n.isImageLoading,s=n.validationError,i=n.imagePreview,o=n.isSuccess,j=n.getGeoPoint,b=n.onChangeImageHandler,m=n.onBlurInputHandler,h=n.onSubmitEventCreateHandler;return Object(r.useEffect)((function(){o&&e("/events")}),[o,e]),a?Object(d.jsx)(fe,{children:Object(d.jsx)(le,{})}):Object(d.jsx)(fe,{children:Object(d.jsxs)("div",{className:"event-form-container",children:[Object(d.jsx)("div",{className:"event-form-title",children:Object(d.jsxs)("h3",{children:[Object(d.jsx)("i",{className:"fa fa-arrow-right"}),"New event"]})}),Object(d.jsxs)("form",{className:"event-form-body",onSubmit:h,children:[Object(d.jsxs)("div",{className:"event-form-body-main",children:[Object(d.jsxs)("div",{className:"event-name",children:[Object(d.jsx)("input",{className:"event-name-input",type:"text",name:"name",id:"name",onBlur:m}),Object(d.jsxs)("label",{htmlFor:"name",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Topic"]}),s.name&&Object(d.jsx)(We,{message:s.name})]}),Object(d.jsxs)("div",{className:"event-date",children:[Object(d.jsx)("input",{className:"event-date-input-box",type:"number",name:"year",id:"year",min:2021,max:2050,placeholder:"YYYY"}),Object(d.jsx)("input",{className:"event-date-input-box",type:"number",name:"month",id:"month",min:1,max:12,placeholder:"MM"}),Object(d.jsx)("input",{className:"event-date-input-box",type:"number",name:"day",id:"day",min:1,max:31,placeholder:"DD"}),Object(d.jsx)("input",{className:"event-date-input-box",type:"number",name:"hour",id:"hour",min:0,max:23,placeholder:"HH"}),Object(d.jsx)("input",{className:"event-date-input-box",type:"number",name:"minute",id:"minute",min:0,max:59,placeholder:"MM"}),Object(d.jsxs)("label",{htmlFor:"date",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Date and time"]})]}),s.date&&Object(d.jsx)(We,{message:s.date}),Object(d.jsx)("div",{className:"event-default-image",children:c?Object(d.jsx)(le,{}):Object(d.jsx)("img",{src:i,alt:"Event_Image"})}),Object(d.jsxs)("div",{className:"event-image",children:[Object(d.jsx)("input",{className:"event-image-input",type:"file",accept:"image/*",lang:"en",name:"imageUrl",id:"imageUrl",onChange:b}),Object(d.jsxs)("label",{htmlFor:"image",children:[Object(d.jsx)("i",{className:"fas fa-image"}),"Image"]}),s.image&&Object(d.jsx)(We,{message:s.image})]})]}),Object(d.jsxs)("div",{className:"event-form-body-details",children:[Object(d.jsxs)("div",{className:"event-description",children:[Object(d.jsx)("textarea",{className:"event-description-input",type:"text",name:"description",id:"description",cols:"50",rows:"12",onBlur:m}),Object(d.jsxs)("label",{htmlFor:"description",children:[Object(d.jsx)("i",{className:"fa fa-pen"}),"Description"]}),s.description&&Object(d.jsx)(We,{message:s.description})]}),Object(d.jsx)(Lt,{getGeoPoint:j})]}),Object(d.jsxs)("div",{className:"event-form-footer",children:[Object(d.jsxs)("div",{className:"recommend",children:[Object(d.jsx)("p",{children:"Organised by"}),Object(d.jsx)("h3",{children:t.username})]}),Object(d.jsx)("div",{className:"event-action",children:Object(d.jsx)("button",{className:"event-action-btn",type:"submit",children:"Add to events"})}),s.required&&Object(d.jsx)(We,{message:s.required})]})]})]})})}),Wt=(n(69),{id:"",name:"",date:"",location:"",description:"",imageUrl:"",status:"",createdAt:"",creator:"",subscriptionId:"",subscribed:[],dateObj:{}}),zt=function(e,t,n){var a=Object(r.useState)(Wt),c=Object(O.a)(a,2),s=c[0],i=c[1],o=Object(r.useState)(!1),u=Object(O.a)(o,2),l=u[0],d=u[1],j=Object(r.useState)(!1),b=Object(O.a)(j,2),m=b[0],f=b[1],x=Object(r.useState)([]),v=Object(O.a)(x,2),g=v[0],N=v[1],k=Object(r.useState)(null),w=Object(O.a)(k,2),y=w[0],E=w[1],S=t&&n.username===s.creator;Object(r.useEffect)((function(){function r(){return r=Object(p.a)(h.a.mark((function r(){var a,c;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d(!0),r.next=3,X(e);case 3:return a=r.sent,d(!1),i(a),t&&n.username!==a.creator&&!a.subscribed.includes(n.username)&&"active"===a.status&&f(!0),r.next=9,Rt(e);case 9:c=r.sent,N(c);case 11:case"end":return r.stop()}}),r)}))),r.apply(this,arguments)}!function(){r.apply(this,arguments)}()}),[e,n,t]);var C=function(){var e=Object(p.a)(h.a.mark((function e(t){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,J(n.username,s.subscriptionId,s.subscribed);case 3:r=[].concat(Object(Y.a)(s.subscribed),[n.username]),i((function(e){return Object(Re.a)(Object(Re.a)({},e),{},{subscribed:r})})),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var t=Object(p.a)(h.a.mark((function t(n){var r,a,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=n.target.comment.value,!(a=Ye(r))){t.next=6;break}return E(a),t.abrupt("return");case 6:return y&&E(null),t.next=9,Vt(e,r);case 9:return t.next=11,Rt(e);case 11:c=t.sent,N(c),n.target.comment.value="";case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{event:s,isLoading:l,isCreator:S,canSubscribe:m,comments:g,validationError:y,onClickAddEventHandler:C,onSubmitCommentHandler:I}},Zt=function(){var e=Object(r.useContext)(l),t=e.isAuthenticated,n=e.user,a=Object(u.i)().eventId,c=zt(a,t,n),s=c.event,i=c.isLoading,j=c.isCreator,b=c.canSubscribe,m=c.comments,h=c.validationError,p=c.onClickAddEventHandler,O=c.onSubmitCommentHandler;return i?Object(d.jsx)(fe,{children:Object(d.jsx)(le,{})}):Object(d.jsxs)(fe,{children:[Object(d.jsx)("h1",{children:"Event"}),Object(d.jsxs)("div",{className:"event-details-container",children:[Object(d.jsxs)("div",{className:"event-main",children:[Object(d.jsxs)("h3",{className:"event-schedule",children:["SCHEDULE: ",s.date]}),Object(d.jsxs)("h3",{className:"event-heading",children:[" TOPIC: ",s.name]}),Object(d.jsxs)("div",{className:"event-details",children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("i",{className:"far fa-clock"}),s.createdAt]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("i",{className:"far fa-user"}),s.creator]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("i",{className:"far fa-comment-alt"}),m.length]})]}),Object(d.jsx)("div",{className:"event-status",children:"active"===s.status?Object(d.jsxs)("span",{className:"status-active",children:[Object(d.jsx)("i",{className:"fas fa-chart-line"}),s.status]}):Object(d.jsxs)("span",{className:"status-cancelled",children:[Object(d.jsx)("i",{className:"fas fa-ban"}),s.status]})}),Object(d.jsx)("div",{className:"event-image",children:Object(d.jsx)("img",{src:s.imageUrl?s.imageUrl:ge,alt:"Event_cover"})}),Object(d.jsx)("p",{className:"event-description",children:s.description}),Object(d.jsx)("div",{className:"event-subscribed",children:s.subscribed.length>0?s.subscribed.map((function(e){return Object(d.jsxs)("span",{children:[" ",Object(d.jsx)("i",{className:"fas fa-user-circle subscribed"}),e]},e)})):Object(d.jsx)("p",{children:"No one has subscribed yet..."})})]}),Object(d.jsxs)("div",{className:"event-additional",children:[Object(d.jsx)("div",{className:"event-map-container",children:s.location&&Object(d.jsx)(Lt,{getGeoPoint:null,center:s.location,message:"Event location"})}),Object(d.jsx)("div",{className:"event-comments",children:m.length>0?m.map((function(e){return Object(d.jsx)(Jt,{createdAt:e.createdAt,text:e.text,creator:e.creator},e.id)})):Object(d.jsx)("p",{children:"No comments yet... Be the first one to comment!"})}),t?Object(d.jsx)("div",{className:"event-comments-form",children:Object(d.jsxs)("form",{action:"",method:"post",onSubmit:O,children:[Object(d.jsx)("h4",{children:"You can write your comment here:"}),Object(d.jsx)("textarea",{className:"comment-input",name:"comment",id:"comment",cols:"50",rows:"6"}),h&&Object(d.jsx)("p",{className:"comment-error",children:h}),Object(d.jsx)("button",{className:"comment-btn",type:"submit",children:"POST"})]})}):null]}),Object(d.jsxs)("div",{className:"event-actions",children:[Object(d.jsx)("div",{className:"event-actions-icon",children:Object(d.jsx)("i",{className:"far fa-calendar-check"})}),t?j?Object(d.jsx)(o.b,{className:"edit-link",to:"/events/".concat(s.id,"/edit"),children:"EDIT EVENT"}):b?Object(d.jsx)(o.b,{className:"add-to-event-list-link",to:"/events/".concat(s.id,"/subscribe"),onClick:p,children:"ADD TO YOUR LIST"}):"cancelled"===s.status?Object(d.jsx)("p",{className:"added-to-event-list",children:"CANCELLED EVENT"}):Object(d.jsx)("p",{className:"added-to-event-list",children:"ADDED TO YOUR LIST"}):Object(d.jsx)(o.b,{className:"join-link",to:"/register",children:"JOIN US"})]})]})]})},Xt=function(){return Object(d.jsxs)(u.e,{children:[Object(d.jsx)(u.c,{path:"/",element:Object(d.jsx)(Ae,{})}),Object(d.jsx)(u.c,{path:"/home",element:Object(d.jsx)(Le,{})}),Object(d.jsx)(u.c,{path:"/books",element:Object(d.jsx)(ze,{})}),Object(d.jsx)(u.c,{path:"/books/:bookId",element:Object(d.jsx)(_t,{})}),Object(d.jsxs)(u.c,{element:Object(d.jsx)(j,{}),children:[Object(d.jsx)(u.c,{path:"/books/:bookId/edit",element:Object(d.jsx)(Et,{})}),Object(d.jsx)(u.c,{path:"/books/create",element:Object(d.jsx)(Ht,{})})]}),Object(d.jsx)(u.c,{path:"/events",element:Object(d.jsx)(bt,{})}),Object(d.jsx)(u.c,{path:"/events/:eventId",element:Object(d.jsx)(Zt,{})}),Object(d.jsxs)(u.c,{element:Object(d.jsx)(j,{}),children:[Object(d.jsx)(u.c,{path:"/events/:eventId/edit",element:Object(d.jsx)(At,{})}),Object(d.jsx)(u.c,{path:"/events/create",element:Object(d.jsx)(Kt,{})})]}),Object(d.jsxs)(u.c,{element:Object(d.jsx)(b,{}),children:[Object(d.jsx)(u.c,{path:"/login",element:Object(d.jsx)(it,{})}),Object(d.jsx)(u.c,{path:"/register",element:Object(d.jsx)(gt,{})})]}),Object(d.jsxs)(u.c,{element:Object(d.jsx)(j,{}),children:[Object(d.jsx)(u.c,{path:"/my-page/:userId",element:Object(d.jsx)(vt,{})}),Object(d.jsx)(u.c,{path:"/logout",element:Object(d.jsx)(ot,{})})]}),Object(d.jsx)(u.c,{path:"*",element:Object(d.jsx)(He,{})})]})},$t=n(22),en=n(23),tn=n(26),nn=n(25),rn=function(e){Object(tn.a)(n,e);var t=Object(nn.a)(n);function n(e){var r;return Object($t.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r}return Object(en.a)(n,[{key:"componentDidCatch",value:function(e){console.log("Error from componentDidCatch: ",e)}},{key:"render",value:function(){return this.state.hasError?Object(d.jsx)("h1",{children:"Something went wrong!!!"}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(a.a.Component),an=function(e,t){var n=Object(r.useState)((function(){try{var n=localStorage.getItem(e);return n?JSON.parse(n):t}catch(r){return console.log(r.message),t}})),a=Object(O.a)(n,2),c=a[0],s=a[1];return[c,function(t){try{localStorage.setItem(e,JSON.stringify(t)),s(t)}catch(n){console.log(n.message)}}]},cn=function(e){var t=an("user",Ne),n=Object(O.a)(t,2),r=n[0],a=n[1];return Object(d.jsx)(l.Provider,{value:{user:r,login:function(e){a(e)},logout:function(){a(Ne)},isAuthenticated:r.username},children:e.children})},sn=function(e){var t=e.children,n=Object(r.useState)(Ue),a=Object(O.a)(n,2),c=a[0],s=a[1],i=Object(r.useCallback)((function(e,t){s((function(n){return Object(Re.a)(Object(Re.a)({},n),{},{show:!0,message:e,objectId:t})})),setTimeout((function(){s(Ue)}),5e3)}),[]);return Object(d.jsx)(mt.Provider,{value:{notification:c,showNotification:i,handleNotification:function(e){"cancel"===e&&s(Ue),s((function(t){return Object(Re.a)(Object(Re.a)({},t),{},{result:e})}))}},children:t})};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(rn,{children:Object(d.jsx)(cn,{children:Object(d.jsx)(sn,{children:Object(d.jsx)(o.a,{basename:"/read-aloud",children:Object(d.jsx)(Xt,{})})})})})}),document.getElementById("root")),i()}]),[[70,1,2]]]);
//# sourceMappingURL=main.e06af4f3.chunk.js.map